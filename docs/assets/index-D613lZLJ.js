(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(i){if(i.ep)return;i.ep=!0;const r=n(i);fetch(i.href,r)}})();function F_(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Oy={exports:{}},bl={},Vy={exports:{}},K={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mo=Symbol.for("react.element"),O_=Symbol.for("react.portal"),V_=Symbol.for("react.fragment"),z_=Symbol.for("react.strict_mode"),B_=Symbol.for("react.profiler"),$_=Symbol.for("react.provider"),U_=Symbol.for("react.context"),W_=Symbol.for("react.forward_ref"),H_=Symbol.for("react.suspense"),K_=Symbol.for("react.memo"),G_=Symbol.for("react.lazy"),hp=Symbol.iterator;function Y_(t){return t===null||typeof t!="object"?null:(t=hp&&t[hp]||t["@@iterator"],typeof t=="function"?t:null)}var zy={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},By=Object.assign,$y={};function Ri(t,e,n){this.props=t,this.context=e,this.refs=$y,this.updater=n||zy}Ri.prototype.isReactComponent={};Ri.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ri.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Uy(){}Uy.prototype=Ri.prototype;function Gd(t,e,n){this.props=t,this.context=e,this.refs=$y,this.updater=n||zy}var Yd=Gd.prototype=new Uy;Yd.constructor=Gd;By(Yd,Ri.prototype);Yd.isPureReactComponent=!0;var fp=Array.isArray,Wy=Object.prototype.hasOwnProperty,Qd={current:null},Hy={key:!0,ref:!0,__self:!0,__source:!0};function Ky(t,e,n){var s,i={},r=null,o=null;if(e!=null)for(s in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(r=""+e.key),e)Wy.call(e,s)&&!Hy.hasOwnProperty(s)&&(i[s]=e[s]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(s in a=t.defaultProps,a)i[s]===void 0&&(i[s]=a[s]);return{$$typeof:mo,type:t,key:r,ref:o,props:i,_owner:Qd.current}}function Q_(t,e){return{$$typeof:mo,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function qd(t){return typeof t=="object"&&t!==null&&t.$$typeof===mo}function q_(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var pp=/\/+/g;function dc(t,e){return typeof t=="object"&&t!==null&&t.key!=null?q_(""+t.key):e.toString(36)}function ca(t,e,n,s,i){var r=typeof t;(r==="undefined"||r==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(r){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case mo:case O_:o=!0}}if(o)return o=t,i=i(o),t=s===""?"."+dc(o,0):s,fp(i)?(n="",t!=null&&(n=t.replace(pp,"$&/")+"/"),ca(i,e,n,"",function(c){return c})):i!=null&&(qd(i)&&(i=Q_(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(pp,"$&/")+"/")+t)),e.push(i)),1;if(o=0,s=s===""?".":s+":",fp(t))for(var a=0;a<t.length;a++){r=t[a];var l=s+dc(r,a);o+=ca(r,e,n,l,i)}else if(l=Y_(t),typeof l=="function")for(t=l.call(t),a=0;!(r=t.next()).done;)r=r.value,l=s+dc(r,a++),o+=ca(r,e,n,l,i);else if(r==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Oo(t,e,n){if(t==null)return t;var s=[],i=0;return ca(t,s,"","",function(r){return e.call(n,r,i++)}),s}function X_(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var st={current:null},ua={transition:null},J_={ReactCurrentDispatcher:st,ReactCurrentBatchConfig:ua,ReactCurrentOwner:Qd};function Gy(){throw Error("act(...) is not supported in production builds of React.")}K.Children={map:Oo,forEach:function(t,e,n){Oo(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Oo(t,function(){e++}),e},toArray:function(t){return Oo(t,function(e){return e})||[]},only:function(t){if(!qd(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};K.Component=Ri;K.Fragment=V_;K.Profiler=B_;K.PureComponent=Gd;K.StrictMode=z_;K.Suspense=H_;K.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=J_;K.act=Gy;K.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var s=By({},t.props),i=t.key,r=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(r=e.ref,o=Qd.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)Wy.call(e,l)&&!Hy.hasOwnProperty(l)&&(s[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];s.children=a}return{$$typeof:mo,type:t.type,key:i,ref:r,props:s,_owner:o}};K.createContext=function(t){return t={$$typeof:U_,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:$_,_context:t},t.Consumer=t};K.createElement=Ky;K.createFactory=function(t){var e=Ky.bind(null,t);return e.type=t,e};K.createRef=function(){return{current:null}};K.forwardRef=function(t){return{$$typeof:W_,render:t}};K.isValidElement=qd;K.lazy=function(t){return{$$typeof:G_,_payload:{_status:-1,_result:t},_init:X_}};K.memo=function(t,e){return{$$typeof:K_,type:t,compare:e===void 0?null:e}};K.startTransition=function(t){var e=ua.transition;ua.transition={};try{t()}finally{ua.transition=e}};K.unstable_act=Gy;K.useCallback=function(t,e){return st.current.useCallback(t,e)};K.useContext=function(t){return st.current.useContext(t)};K.useDebugValue=function(){};K.useDeferredValue=function(t){return st.current.useDeferredValue(t)};K.useEffect=function(t,e){return st.current.useEffect(t,e)};K.useId=function(){return st.current.useId()};K.useImperativeHandle=function(t,e,n){return st.current.useImperativeHandle(t,e,n)};K.useInsertionEffect=function(t,e){return st.current.useInsertionEffect(t,e)};K.useLayoutEffect=function(t,e){return st.current.useLayoutEffect(t,e)};K.useMemo=function(t,e){return st.current.useMemo(t,e)};K.useReducer=function(t,e,n){return st.current.useReducer(t,e,n)};K.useRef=function(t){return st.current.useRef(t)};K.useState=function(t){return st.current.useState(t)};K.useSyncExternalStore=function(t,e,n){return st.current.useSyncExternalStore(t,e,n)};K.useTransition=function(){return st.current.useTransition()};K.version="18.3.1";Vy.exports=K;var v=Vy.exports;const Z_=F_(v);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eS=v,tS=Symbol.for("react.element"),nS=Symbol.for("react.fragment"),sS=Object.prototype.hasOwnProperty,iS=eS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,rS={key:!0,ref:!0,__self:!0,__source:!0};function Yy(t,e,n){var s,i={},r=null,o=null;n!==void 0&&(r=""+n),e.key!==void 0&&(r=""+e.key),e.ref!==void 0&&(o=e.ref);for(s in e)sS.call(e,s)&&!rS.hasOwnProperty(s)&&(i[s]=e[s]);if(t&&t.defaultProps)for(s in e=t.defaultProps,e)i[s]===void 0&&(i[s]=e[s]);return{$$typeof:tS,type:t,key:r,ref:o,props:i,_owner:iS.current}}bl.Fragment=nS;bl.jsx=Yy;bl.jsxs=Yy;Oy.exports=bl;var u=Oy.exports,Qy={exports:{}},yt={},qy={exports:{}},Xy={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(D,R){var L=D.length;D.push(R);e:for(;0<L;){var z=L-1>>>1,B=D[z];if(0<i(B,R))D[z]=R,D[L]=B,L=z;else break e}}function n(D){return D.length===0?null:D[0]}function s(D){if(D.length===0)return null;var R=D[0],L=D.pop();if(L!==R){D[0]=L;e:for(var z=0,B=D.length,ht=B>>>1;z<ht;){var Fe=2*(z+1)-1,X=D[Fe],J=Fe+1,qe=D[J];if(0>i(X,L))J<B&&0>i(qe,X)?(D[z]=qe,D[J]=L,z=J):(D[z]=X,D[Fe]=L,z=Fe);else if(J<B&&0>i(qe,L))D[z]=qe,D[J]=L,z=J;else break e}}return R}function i(D,R){var L=D.sortIndex-R.sortIndex;return L!==0?L:D.id-R.id}if(typeof performance=="object"&&typeof performance.now=="function"){var r=performance;t.unstable_now=function(){return r.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],d=1,f=null,h=3,p=!1,y=!1,w=!1,C=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(D){for(var R=n(c);R!==null;){if(R.callback===null)s(c);else if(R.startTime<=D)s(c),R.sortIndex=R.expirationTime,e(l,R);else break;R=n(c)}}function b(D){if(w=!1,x(D),!y)if(n(l)!==null)y=!0,wt(S);else{var R=n(c);R!==null&&ne(b,R.startTime-D)}}function S(D,R){y=!1,w&&(w=!1,g(_),_=-1),p=!0;var L=h;try{for(x(R),f=n(l);f!==null&&(!(f.expirationTime>R)||D&&!P());){var z=f.callback;if(typeof z=="function"){f.callback=null,h=f.priorityLevel;var B=z(f.expirationTime<=R);R=t.unstable_now(),typeof B=="function"?f.callback=B:f===n(l)&&s(l),x(R)}else s(l);f=n(l)}if(f!==null)var ht=!0;else{var Fe=n(c);Fe!==null&&ne(b,Fe.startTime-R),ht=!1}return ht}finally{f=null,h=L,p=!1}}var T=!1,E=null,_=-1,k=5,N=-1;function P(){return!(t.unstable_now()-N<k)}function $(){if(E!==null){var D=t.unstable_now();N=D;var R=!0;try{R=E(!0,D)}finally{R?M():(T=!1,E=null)}}else T=!1}var M;if(typeof m=="function")M=function(){m($)};else if(typeof MessageChannel<"u"){var ge=new MessageChannel,Qe=ge.port2;ge.port1.onmessage=$,M=function(){Qe.postMessage(null)}}else M=function(){C($,0)};function wt(D){E=D,T||(T=!0,M())}function ne(D,R){_=C(function(){D(t.unstable_now())},R)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(D){D.callback=null},t.unstable_continueExecution=function(){y||p||(y=!0,wt(S))},t.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<D?Math.floor(1e3/D):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(D){switch(h){case 1:case 2:case 3:var R=3;break;default:R=h}var L=h;h=R;try{return D()}finally{h=L}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(D,R){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var L=h;h=D;try{return R()}finally{h=L}},t.unstable_scheduleCallback=function(D,R,L){var z=t.unstable_now();switch(typeof L=="object"&&L!==null?(L=L.delay,L=typeof L=="number"&&0<L?z+L:z):L=z,D){case 1:var B=-1;break;case 2:B=250;break;case 5:B=1073741823;break;case 4:B=1e4;break;default:B=5e3}return B=L+B,D={id:d++,callback:R,priorityLevel:D,startTime:L,expirationTime:B,sortIndex:-1},L>z?(D.sortIndex=L,e(c,D),n(l)===null&&D===n(c)&&(w?(g(_),_=-1):w=!0,ne(b,L-z))):(D.sortIndex=B,e(l,D),y||p||(y=!0,wt(S))),D},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(D){var R=h;return function(){var L=h;h=R;try{return D.apply(this,arguments)}finally{h=L}}}})(Xy);qy.exports=Xy;var oS=qy.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aS=v,gt=oS;function I(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Jy=new Set,Rr={};function Is(t,e){yi(t,e),yi(t+"Capture",e)}function yi(t,e){for(Rr[t]=e,t=0;t<e.length;t++)Jy.add(e[t])}var pn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),du=Object.prototype.hasOwnProperty,lS=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,mp={},gp={};function cS(t){return du.call(gp,t)?!0:du.call(mp,t)?!1:lS.test(t)?gp[t]=!0:(mp[t]=!0,!1)}function uS(t,e,n,s){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return s?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function dS(t,e,n,s){if(e===null||typeof e>"u"||uS(t,e,n,s))return!0;if(s)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function it(t,e,n,s,i,r,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=s,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=r,this.removeEmptyString=o}var $e={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){$e[t]=new it(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];$e[e]=new it(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){$e[t]=new it(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){$e[t]=new it(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){$e[t]=new it(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){$e[t]=new it(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){$e[t]=new it(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){$e[t]=new it(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){$e[t]=new it(t,5,!1,t.toLowerCase(),null,!1,!1)});var Xd=/[\-:]([a-z])/g;function Jd(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Xd,Jd);$e[e]=new it(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Xd,Jd);$e[e]=new it(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Xd,Jd);$e[e]=new it(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){$e[t]=new it(t,1,!1,t.toLowerCase(),null,!1,!1)});$e.xlinkHref=new it("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){$e[t]=new it(t,1,!1,t.toLowerCase(),null,!0,!0)});function Zd(t,e,n,s){var i=$e.hasOwnProperty(e)?$e[e]:null;(i!==null?i.type!==0:s||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(dS(e,n,i,s)&&(n=null),s||i===null?cS(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,s=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,s?t.setAttributeNS(s,e,n):t.setAttribute(e,n))))}var bn=aS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Vo=Symbol.for("react.element"),Us=Symbol.for("react.portal"),Ws=Symbol.for("react.fragment"),eh=Symbol.for("react.strict_mode"),hu=Symbol.for("react.profiler"),Zy=Symbol.for("react.provider"),e0=Symbol.for("react.context"),th=Symbol.for("react.forward_ref"),fu=Symbol.for("react.suspense"),pu=Symbol.for("react.suspense_list"),nh=Symbol.for("react.memo"),Pn=Symbol.for("react.lazy"),t0=Symbol.for("react.offscreen"),yp=Symbol.iterator;function Wi(t){return t===null||typeof t!="object"?null:(t=yp&&t[yp]||t["@@iterator"],typeof t=="function"?t:null)}var me=Object.assign,hc;function ir(t){if(hc===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);hc=e&&e[1]||""}return`
`+hc+t}var fc=!1;function pc(t,e){if(!t||fc)return"";fc=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var s=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){s=c}t.call(e.prototype)}else{try{throw Error()}catch(c){s=c}t()}}catch(c){if(c&&s&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),r=s.stack.split(`
`),o=i.length-1,a=r.length-1;1<=o&&0<=a&&i[o]!==r[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==r[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==r[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{fc=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?ir(t):""}function hS(t){switch(t.tag){case 5:return ir(t.type);case 16:return ir("Lazy");case 13:return ir("Suspense");case 19:return ir("SuspenseList");case 0:case 2:case 15:return t=pc(t.type,!1),t;case 11:return t=pc(t.type.render,!1),t;case 1:return t=pc(t.type,!0),t;default:return""}}function mu(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ws:return"Fragment";case Us:return"Portal";case hu:return"Profiler";case eh:return"StrictMode";case fu:return"Suspense";case pu:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case e0:return(t.displayName||"Context")+".Consumer";case Zy:return(t._context.displayName||"Context")+".Provider";case th:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case nh:return e=t.displayName||null,e!==null?e:mu(t.type)||"Memo";case Pn:e=t._payload,t=t._init;try{return mu(t(e))}catch{}}return null}function fS(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return mu(e);case 8:return e===eh?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Qn(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function n0(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function pS(t){var e=n0(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),s=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,r=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){s=""+o,r.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return s},setValue:function(o){s=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function zo(t){t._valueTracker||(t._valueTracker=pS(t))}function s0(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),s="";return t&&(s=n0(t)?t.checked?"true":"false":t.value),t=s,t!==n?(e.setValue(t),!0):!1}function Ta(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function gu(t,e){var n=e.checked;return me({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function vp(t,e){var n=e.defaultValue==null?"":e.defaultValue,s=e.checked!=null?e.checked:e.defaultChecked;n=Qn(e.value!=null?e.value:n),t._wrapperState={initialChecked:s,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function i0(t,e){e=e.checked,e!=null&&Zd(t,"checked",e,!1)}function yu(t,e){i0(t,e);var n=Qn(e.value),s=e.type;if(n!=null)s==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(s==="submit"||s==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?vu(t,e.type,n):e.hasOwnProperty("defaultValue")&&vu(t,e.type,Qn(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function xp(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var s=e.type;if(!(s!=="submit"&&s!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function vu(t,e,n){(e!=="number"||Ta(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var rr=Array.isArray;function ai(t,e,n,s){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&s&&(t[n].defaultSelected=!0)}else{for(n=""+Qn(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,s&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function xu(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(I(91));return me({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function wp(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(I(92));if(rr(n)){if(1<n.length)throw Error(I(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Qn(n)}}function r0(t,e){var n=Qn(e.value),s=Qn(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),s!=null&&(t.defaultValue=""+s)}function _p(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function o0(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function wu(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?o0(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Bo,a0=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,s,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,s,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Bo=Bo||document.createElement("div"),Bo.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Bo.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ir(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ur={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},mS=["Webkit","ms","Moz","O"];Object.keys(ur).forEach(function(t){mS.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ur[e]=ur[t]})});function l0(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ur.hasOwnProperty(t)&&ur[t]?(""+e).trim():e+"px"}function c0(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var s=n.indexOf("--")===0,i=l0(n,e[n],s);n==="float"&&(n="cssFloat"),s?t.setProperty(n,i):t[n]=i}}var gS=me({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function _u(t,e){if(e){if(gS[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(I(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(I(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(I(61))}if(e.style!=null&&typeof e.style!="object")throw Error(I(62))}}function Su(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Cu=null;function sh(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Eu=null,li=null,ci=null;function Sp(t){if(t=vo(t)){if(typeof Eu!="function")throw Error(I(280));var e=t.stateNode;e&&(e=Pl(e),Eu(t.stateNode,t.type,e))}}function u0(t){li?ci?ci.push(t):ci=[t]:li=t}function d0(){if(li){var t=li,e=ci;if(ci=li=null,Sp(t),e)for(t=0;t<e.length;t++)Sp(e[t])}}function h0(t,e){return t(e)}function f0(){}var mc=!1;function p0(t,e,n){if(mc)return t(e,n);mc=!0;try{return h0(t,e,n)}finally{mc=!1,(li!==null||ci!==null)&&(f0(),d0())}}function Ar(t,e){var n=t.stateNode;if(n===null)return null;var s=Pl(n);if(s===null)return null;n=s[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(t=t.type,s=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!s;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(I(231,e,typeof n));return n}var bu=!1;if(pn)try{var Hi={};Object.defineProperty(Hi,"passive",{get:function(){bu=!0}}),window.addEventListener("test",Hi,Hi),window.removeEventListener("test",Hi,Hi)}catch{bu=!1}function yS(t,e,n,s,i,r,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(d){this.onError(d)}}var dr=!1,ja=null,Pa=!1,Nu=null,vS={onError:function(t){dr=!0,ja=t}};function xS(t,e,n,s,i,r,o,a,l){dr=!1,ja=null,yS.apply(vS,arguments)}function wS(t,e,n,s,i,r,o,a,l){if(xS.apply(this,arguments),dr){if(dr){var c=ja;dr=!1,ja=null}else throw Error(I(198));Pa||(Pa=!0,Nu=c)}}function As(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function m0(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Cp(t){if(As(t)!==t)throw Error(I(188))}function _S(t){var e=t.alternate;if(!e){if(e=As(t),e===null)throw Error(I(188));return e!==t?null:t}for(var n=t,s=e;;){var i=n.return;if(i===null)break;var r=i.alternate;if(r===null){if(s=i.return,s!==null){n=s;continue}break}if(i.child===r.child){for(r=i.child;r;){if(r===n)return Cp(i),t;if(r===s)return Cp(i),e;r=r.sibling}throw Error(I(188))}if(n.return!==s.return)n=i,s=r;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,s=r;break}if(a===s){o=!0,s=i,n=r;break}a=a.sibling}if(!o){for(a=r.child;a;){if(a===n){o=!0,n=r,s=i;break}if(a===s){o=!0,s=r,n=i;break}a=a.sibling}if(!o)throw Error(I(189))}}if(n.alternate!==s)throw Error(I(190))}if(n.tag!==3)throw Error(I(188));return n.stateNode.current===n?t:e}function g0(t){return t=_S(t),t!==null?y0(t):null}function y0(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=y0(t);if(e!==null)return e;t=t.sibling}return null}var v0=gt.unstable_scheduleCallback,Ep=gt.unstable_cancelCallback,SS=gt.unstable_shouldYield,CS=gt.unstable_requestPaint,Se=gt.unstable_now,ES=gt.unstable_getCurrentPriorityLevel,ih=gt.unstable_ImmediatePriority,x0=gt.unstable_UserBlockingPriority,Ra=gt.unstable_NormalPriority,bS=gt.unstable_LowPriority,w0=gt.unstable_IdlePriority,Nl=null,Qt=null;function NS(t){if(Qt&&typeof Qt.onCommitFiberRoot=="function")try{Qt.onCommitFiberRoot(Nl,t,void 0,(t.current.flags&128)===128)}catch{}}var $t=Math.clz32?Math.clz32:jS,kS=Math.log,TS=Math.LN2;function jS(t){return t>>>=0,t===0?32:31-(kS(t)/TS|0)|0}var $o=64,Uo=4194304;function or(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ia(t,e){var n=t.pendingLanes;if(n===0)return 0;var s=0,i=t.suspendedLanes,r=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?s=or(a):(r&=o,r!==0&&(s=or(r)))}else o=n&~i,o!==0?s=or(o):r!==0&&(s=or(r));if(s===0)return 0;if(e!==0&&e!==s&&!(e&i)&&(i=s&-s,r=e&-e,i>=r||i===16&&(r&4194240)!==0))return e;if(s&4&&(s|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=s;0<e;)n=31-$t(e),i=1<<n,s|=t[n],e&=~i;return s}function PS(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function RS(t,e){for(var n=t.suspendedLanes,s=t.pingedLanes,i=t.expirationTimes,r=t.pendingLanes;0<r;){var o=31-$t(r),a=1<<o,l=i[o];l===-1?(!(a&n)||a&s)&&(i[o]=PS(a,e)):l<=e&&(t.expiredLanes|=a),r&=~a}}function ku(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function _0(){var t=$o;return $o<<=1,!($o&4194240)&&($o=64),t}function gc(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function go(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-$t(e),t[e]=n}function IS(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var s=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-$t(n),r=1<<i;e[i]=0,s[i]=-1,t[i]=-1,n&=~r}}function rh(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var s=31-$t(n),i=1<<s;i&e|t[s]&e&&(t[s]|=e),n&=~i}}var ee=0;function S0(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var C0,oh,E0,b0,N0,Tu=!1,Wo=[],Fn=null,On=null,Vn=null,Dr=new Map,Mr=new Map,In=[],AS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function bp(t,e){switch(t){case"focusin":case"focusout":Fn=null;break;case"dragenter":case"dragleave":On=null;break;case"mouseover":case"mouseout":Vn=null;break;case"pointerover":case"pointerout":Dr.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Mr.delete(e.pointerId)}}function Ki(t,e,n,s,i,r){return t===null||t.nativeEvent!==r?(t={blockedOn:e,domEventName:n,eventSystemFlags:s,nativeEvent:r,targetContainers:[i]},e!==null&&(e=vo(e),e!==null&&oh(e)),t):(t.eventSystemFlags|=s,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function DS(t,e,n,s,i){switch(e){case"focusin":return Fn=Ki(Fn,t,e,n,s,i),!0;case"dragenter":return On=Ki(On,t,e,n,s,i),!0;case"mouseover":return Vn=Ki(Vn,t,e,n,s,i),!0;case"pointerover":var r=i.pointerId;return Dr.set(r,Ki(Dr.get(r)||null,t,e,n,s,i)),!0;case"gotpointercapture":return r=i.pointerId,Mr.set(r,Ki(Mr.get(r)||null,t,e,n,s,i)),!0}return!1}function k0(t){var e=hs(t.target);if(e!==null){var n=As(e);if(n!==null){if(e=n.tag,e===13){if(e=m0(n),e!==null){t.blockedOn=e,N0(t.priority,function(){E0(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function da(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=ju(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var s=new n.constructor(n.type,n);Cu=s,n.target.dispatchEvent(s),Cu=null}else return e=vo(n),e!==null&&oh(e),t.blockedOn=n,!1;e.shift()}return!0}function Np(t,e,n){da(t)&&n.delete(e)}function MS(){Tu=!1,Fn!==null&&da(Fn)&&(Fn=null),On!==null&&da(On)&&(On=null),Vn!==null&&da(Vn)&&(Vn=null),Dr.forEach(Np),Mr.forEach(Np)}function Gi(t,e){t.blockedOn===e&&(t.blockedOn=null,Tu||(Tu=!0,gt.unstable_scheduleCallback(gt.unstable_NormalPriority,MS)))}function Lr(t){function e(i){return Gi(i,t)}if(0<Wo.length){Gi(Wo[0],t);for(var n=1;n<Wo.length;n++){var s=Wo[n];s.blockedOn===t&&(s.blockedOn=null)}}for(Fn!==null&&Gi(Fn,t),On!==null&&Gi(On,t),Vn!==null&&Gi(Vn,t),Dr.forEach(e),Mr.forEach(e),n=0;n<In.length;n++)s=In[n],s.blockedOn===t&&(s.blockedOn=null);for(;0<In.length&&(n=In[0],n.blockedOn===null);)k0(n),n.blockedOn===null&&In.shift()}var ui=bn.ReactCurrentBatchConfig,Aa=!0;function LS(t,e,n,s){var i=ee,r=ui.transition;ui.transition=null;try{ee=1,ah(t,e,n,s)}finally{ee=i,ui.transition=r}}function FS(t,e,n,s){var i=ee,r=ui.transition;ui.transition=null;try{ee=4,ah(t,e,n,s)}finally{ee=i,ui.transition=r}}function ah(t,e,n,s){if(Aa){var i=ju(t,e,n,s);if(i===null)Nc(t,e,s,Da,n),bp(t,s);else if(DS(i,t,e,n,s))s.stopPropagation();else if(bp(t,s),e&4&&-1<AS.indexOf(t)){for(;i!==null;){var r=vo(i);if(r!==null&&C0(r),r=ju(t,e,n,s),r===null&&Nc(t,e,s,Da,n),r===i)break;i=r}i!==null&&s.stopPropagation()}else Nc(t,e,s,null,n)}}var Da=null;function ju(t,e,n,s){if(Da=null,t=sh(s),t=hs(t),t!==null)if(e=As(t),e===null)t=null;else if(n=e.tag,n===13){if(t=m0(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Da=t,null}function T0(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ES()){case ih:return 1;case x0:return 4;case Ra:case bS:return 16;case w0:return 536870912;default:return 16}default:return 16}}var Dn=null,lh=null,ha=null;function j0(){if(ha)return ha;var t,e=lh,n=e.length,s,i="value"in Dn?Dn.value:Dn.textContent,r=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(s=1;s<=o&&e[n-s]===i[r-s];s++);return ha=i.slice(t,1<s?1-s:void 0)}function fa(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ho(){return!0}function kp(){return!1}function vt(t){function e(n,s,i,r,o){this._reactName=n,this._targetInst=i,this.type=s,this.nativeEvent=r,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(r):r[a]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?Ho:kp,this.isPropagationStopped=kp,this}return me(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ho)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ho)},persist:function(){},isPersistent:Ho}),e}var Ii={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ch=vt(Ii),yo=me({},Ii,{view:0,detail:0}),OS=vt(yo),yc,vc,Yi,kl=me({},yo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:uh,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Yi&&(Yi&&t.type==="mousemove"?(yc=t.screenX-Yi.screenX,vc=t.screenY-Yi.screenY):vc=yc=0,Yi=t),yc)},movementY:function(t){return"movementY"in t?t.movementY:vc}}),Tp=vt(kl),VS=me({},kl,{dataTransfer:0}),zS=vt(VS),BS=me({},yo,{relatedTarget:0}),xc=vt(BS),$S=me({},Ii,{animationName:0,elapsedTime:0,pseudoElement:0}),US=vt($S),WS=me({},Ii,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),HS=vt(WS),KS=me({},Ii,{data:0}),jp=vt(KS),GS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},YS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},QS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function qS(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=QS[t])?!!e[t]:!1}function uh(){return qS}var XS=me({},yo,{key:function(t){if(t.key){var e=GS[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=fa(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?YS[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:uh,charCode:function(t){return t.type==="keypress"?fa(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?fa(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),JS=vt(XS),ZS=me({},kl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Pp=vt(ZS),eC=me({},yo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:uh}),tC=vt(eC),nC=me({},Ii,{propertyName:0,elapsedTime:0,pseudoElement:0}),sC=vt(nC),iC=me({},kl,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),rC=vt(iC),oC=[9,13,27,32],dh=pn&&"CompositionEvent"in window,hr=null;pn&&"documentMode"in document&&(hr=document.documentMode);var aC=pn&&"TextEvent"in window&&!hr,P0=pn&&(!dh||hr&&8<hr&&11>=hr),Rp=" ",Ip=!1;function R0(t,e){switch(t){case"keyup":return oC.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function I0(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Hs=!1;function lC(t,e){switch(t){case"compositionend":return I0(e);case"keypress":return e.which!==32?null:(Ip=!0,Rp);case"textInput":return t=e.data,t===Rp&&Ip?null:t;default:return null}}function cC(t,e){if(Hs)return t==="compositionend"||!dh&&R0(t,e)?(t=j0(),ha=lh=Dn=null,Hs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return P0&&e.locale!=="ko"?null:e.data;default:return null}}var uC={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ap(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!uC[t.type]:e==="textarea"}function A0(t,e,n,s){u0(s),e=Ma(e,"onChange"),0<e.length&&(n=new ch("onChange","change",null,n,s),t.push({event:n,listeners:e}))}var fr=null,Fr=null;function dC(t){W0(t,0)}function Tl(t){var e=Ys(t);if(s0(e))return t}function hC(t,e){if(t==="change")return e}var D0=!1;if(pn){var wc;if(pn){var _c="oninput"in document;if(!_c){var Dp=document.createElement("div");Dp.setAttribute("oninput","return;"),_c=typeof Dp.oninput=="function"}wc=_c}else wc=!1;D0=wc&&(!document.documentMode||9<document.documentMode)}function Mp(){fr&&(fr.detachEvent("onpropertychange",M0),Fr=fr=null)}function M0(t){if(t.propertyName==="value"&&Tl(Fr)){var e=[];A0(e,Fr,t,sh(t)),p0(dC,e)}}function fC(t,e,n){t==="focusin"?(Mp(),fr=e,Fr=n,fr.attachEvent("onpropertychange",M0)):t==="focusout"&&Mp()}function pC(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Tl(Fr)}function mC(t,e){if(t==="click")return Tl(e)}function gC(t,e){if(t==="input"||t==="change")return Tl(e)}function yC(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ht=typeof Object.is=="function"?Object.is:yC;function Or(t,e){if(Ht(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),s=Object.keys(e);if(n.length!==s.length)return!1;for(s=0;s<n.length;s++){var i=n[s];if(!du.call(e,i)||!Ht(t[i],e[i]))return!1}return!0}function Lp(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Fp(t,e){var n=Lp(t);t=0;for(var s;n;){if(n.nodeType===3){if(s=t+n.textContent.length,t<=e&&s>=e)return{node:n,offset:e-t};t=s}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Lp(n)}}function L0(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?L0(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function F0(){for(var t=window,e=Ta();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Ta(t.document)}return e}function hh(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function vC(t){var e=F0(),n=t.focusedElem,s=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&L0(n.ownerDocument.documentElement,n)){if(s!==null&&hh(n)){if(e=s.start,t=s.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,r=Math.min(s.start,i);s=s.end===void 0?r:Math.min(s.end,i),!t.extend&&r>s&&(i=s,s=r,r=i),i=Fp(n,r);var o=Fp(n,s);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),r>s?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var xC=pn&&"documentMode"in document&&11>=document.documentMode,Ks=null,Pu=null,pr=null,Ru=!1;function Op(t,e,n){var s=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ru||Ks==null||Ks!==Ta(s)||(s=Ks,"selectionStart"in s&&hh(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),pr&&Or(pr,s)||(pr=s,s=Ma(Pu,"onSelect"),0<s.length&&(e=new ch("onSelect","select",null,e,n),t.push({event:e,listeners:s}),e.target=Ks)))}function Ko(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Gs={animationend:Ko("Animation","AnimationEnd"),animationiteration:Ko("Animation","AnimationIteration"),animationstart:Ko("Animation","AnimationStart"),transitionend:Ko("Transition","TransitionEnd")},Sc={},O0={};pn&&(O0=document.createElement("div").style,"AnimationEvent"in window||(delete Gs.animationend.animation,delete Gs.animationiteration.animation,delete Gs.animationstart.animation),"TransitionEvent"in window||delete Gs.transitionend.transition);function jl(t){if(Sc[t])return Sc[t];if(!Gs[t])return t;var e=Gs[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in O0)return Sc[t]=e[n];return t}var V0=jl("animationend"),z0=jl("animationiteration"),B0=jl("animationstart"),$0=jl("transitionend"),U0=new Map,Vp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ts(t,e){U0.set(t,e),Is(e,[t])}for(var Cc=0;Cc<Vp.length;Cc++){var Ec=Vp[Cc],wC=Ec.toLowerCase(),_C=Ec[0].toUpperCase()+Ec.slice(1);ts(wC,"on"+_C)}ts(V0,"onAnimationEnd");ts(z0,"onAnimationIteration");ts(B0,"onAnimationStart");ts("dblclick","onDoubleClick");ts("focusin","onFocus");ts("focusout","onBlur");ts($0,"onTransitionEnd");yi("onMouseEnter",["mouseout","mouseover"]);yi("onMouseLeave",["mouseout","mouseover"]);yi("onPointerEnter",["pointerout","pointerover"]);yi("onPointerLeave",["pointerout","pointerover"]);Is("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Is("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Is("onBeforeInput",["compositionend","keypress","textInput","paste"]);Is("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Is("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Is("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ar="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),SC=new Set("cancel close invalid load scroll toggle".split(" ").concat(ar));function zp(t,e,n){var s=t.type||"unknown-event";t.currentTarget=n,wS(s,e,void 0,t),t.currentTarget=null}function W0(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var s=t[n],i=s.event;s=s.listeners;e:{var r=void 0;if(e)for(var o=s.length-1;0<=o;o--){var a=s[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==r&&i.isPropagationStopped())break e;zp(i,a,c),r=l}else for(o=0;o<s.length;o++){if(a=s[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==r&&i.isPropagationStopped())break e;zp(i,a,c),r=l}}}if(Pa)throw t=Nu,Pa=!1,Nu=null,t}function ae(t,e){var n=e[Lu];n===void 0&&(n=e[Lu]=new Set);var s=t+"__bubble";n.has(s)||(H0(e,t,2,!1),n.add(s))}function bc(t,e,n){var s=0;e&&(s|=4),H0(n,t,s,e)}var Go="_reactListening"+Math.random().toString(36).slice(2);function Vr(t){if(!t[Go]){t[Go]=!0,Jy.forEach(function(n){n!=="selectionchange"&&(SC.has(n)||bc(n,!1,t),bc(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Go]||(e[Go]=!0,bc("selectionchange",!1,e))}}function H0(t,e,n,s){switch(T0(e)){case 1:var i=LS;break;case 4:i=FS;break;default:i=ah}n=i.bind(null,e,n,t),i=void 0,!bu||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),s?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Nc(t,e,n,s,i){var r=s;if(!(e&1)&&!(e&2)&&s!==null)e:for(;;){if(s===null)return;var o=s.tag;if(o===3||o===4){var a=s.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=s.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=hs(a),o===null)return;if(l=o.tag,l===5||l===6){s=r=o;continue e}a=a.parentNode}}s=s.return}p0(function(){var c=r,d=sh(n),f=[];e:{var h=U0.get(t);if(h!==void 0){var p=ch,y=t;switch(t){case"keypress":if(fa(n)===0)break e;case"keydown":case"keyup":p=JS;break;case"focusin":y="focus",p=xc;break;case"focusout":y="blur",p=xc;break;case"beforeblur":case"afterblur":p=xc;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=Tp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=zS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=tC;break;case V0:case z0:case B0:p=US;break;case $0:p=sC;break;case"scroll":p=OS;break;case"wheel":p=rC;break;case"copy":case"cut":case"paste":p=HS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=Pp}var w=(e&4)!==0,C=!w&&t==="scroll",g=w?h!==null?h+"Capture":null:h;w=[];for(var m=c,x;m!==null;){x=m;var b=x.stateNode;if(x.tag===5&&b!==null&&(x=b,g!==null&&(b=Ar(m,g),b!=null&&w.push(zr(m,b,x)))),C)break;m=m.return}0<w.length&&(h=new p(h,y,null,n,d),f.push({event:h,listeners:w}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",h&&n!==Cu&&(y=n.relatedTarget||n.fromElement)&&(hs(y)||y[mn]))break e;if((p||h)&&(h=d.window===d?d:(h=d.ownerDocument)?h.defaultView||h.parentWindow:window,p?(y=n.relatedTarget||n.toElement,p=c,y=y?hs(y):null,y!==null&&(C=As(y),y!==C||y.tag!==5&&y.tag!==6)&&(y=null)):(p=null,y=c),p!==y)){if(w=Tp,b="onMouseLeave",g="onMouseEnter",m="mouse",(t==="pointerout"||t==="pointerover")&&(w=Pp,b="onPointerLeave",g="onPointerEnter",m="pointer"),C=p==null?h:Ys(p),x=y==null?h:Ys(y),h=new w(b,m+"leave",p,n,d),h.target=C,h.relatedTarget=x,b=null,hs(d)===c&&(w=new w(g,m+"enter",y,n,d),w.target=x,w.relatedTarget=C,b=w),C=b,p&&y)t:{for(w=p,g=y,m=0,x=w;x;x=Bs(x))m++;for(x=0,b=g;b;b=Bs(b))x++;for(;0<m-x;)w=Bs(w),m--;for(;0<x-m;)g=Bs(g),x--;for(;m--;){if(w===g||g!==null&&w===g.alternate)break t;w=Bs(w),g=Bs(g)}w=null}else w=null;p!==null&&Bp(f,h,p,w,!1),y!==null&&C!==null&&Bp(f,C,y,w,!0)}}e:{if(h=c?Ys(c):window,p=h.nodeName&&h.nodeName.toLowerCase(),p==="select"||p==="input"&&h.type==="file")var S=hC;else if(Ap(h))if(D0)S=gC;else{S=pC;var T=fC}else(p=h.nodeName)&&p.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(S=mC);if(S&&(S=S(t,c))){A0(f,S,n,d);break e}T&&T(t,h,c),t==="focusout"&&(T=h._wrapperState)&&T.controlled&&h.type==="number"&&vu(h,"number",h.value)}switch(T=c?Ys(c):window,t){case"focusin":(Ap(T)||T.contentEditable==="true")&&(Ks=T,Pu=c,pr=null);break;case"focusout":pr=Pu=Ks=null;break;case"mousedown":Ru=!0;break;case"contextmenu":case"mouseup":case"dragend":Ru=!1,Op(f,n,d);break;case"selectionchange":if(xC)break;case"keydown":case"keyup":Op(f,n,d)}var E;if(dh)e:{switch(t){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else Hs?R0(t,n)&&(_="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(_="onCompositionStart");_&&(P0&&n.locale!=="ko"&&(Hs||_!=="onCompositionStart"?_==="onCompositionEnd"&&Hs&&(E=j0()):(Dn=d,lh="value"in Dn?Dn.value:Dn.textContent,Hs=!0)),T=Ma(c,_),0<T.length&&(_=new jp(_,t,null,n,d),f.push({event:_,listeners:T}),E?_.data=E:(E=I0(n),E!==null&&(_.data=E)))),(E=aC?lC(t,n):cC(t,n))&&(c=Ma(c,"onBeforeInput"),0<c.length&&(d=new jp("onBeforeInput","beforeinput",null,n,d),f.push({event:d,listeners:c}),d.data=E))}W0(f,e)})}function zr(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Ma(t,e){for(var n=e+"Capture",s=[];t!==null;){var i=t,r=i.stateNode;i.tag===5&&r!==null&&(i=r,r=Ar(t,n),r!=null&&s.unshift(zr(t,r,i)),r=Ar(t,e),r!=null&&s.push(zr(t,r,i))),t=t.return}return s}function Bs(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Bp(t,e,n,s,i){for(var r=e._reactName,o=[];n!==null&&n!==s;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===s)break;a.tag===5&&c!==null&&(a=c,i?(l=Ar(n,r),l!=null&&o.unshift(zr(n,l,a))):i||(l=Ar(n,r),l!=null&&o.push(zr(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var CC=/\r\n?/g,EC=/\u0000|\uFFFD/g;function $p(t){return(typeof t=="string"?t:""+t).replace(CC,`
`).replace(EC,"")}function Yo(t,e,n){if(e=$p(e),$p(t)!==e&&n)throw Error(I(425))}function La(){}var Iu=null,Au=null;function Du(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Mu=typeof setTimeout=="function"?setTimeout:void 0,bC=typeof clearTimeout=="function"?clearTimeout:void 0,Up=typeof Promise=="function"?Promise:void 0,NC=typeof queueMicrotask=="function"?queueMicrotask:typeof Up<"u"?function(t){return Up.resolve(null).then(t).catch(kC)}:Mu;function kC(t){setTimeout(function(){throw t})}function kc(t,e){var n=e,s=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(s===0){t.removeChild(i),Lr(e);return}s--}else n!=="$"&&n!=="$?"&&n!=="$!"||s++;n=i}while(n);Lr(e)}function zn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Wp(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ai=Math.random().toString(36).slice(2),Yt="__reactFiber$"+Ai,Br="__reactProps$"+Ai,mn="__reactContainer$"+Ai,Lu="__reactEvents$"+Ai,TC="__reactListeners$"+Ai,jC="__reactHandles$"+Ai;function hs(t){var e=t[Yt];if(e)return e;for(var n=t.parentNode;n;){if(e=n[mn]||n[Yt]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Wp(t);t!==null;){if(n=t[Yt])return n;t=Wp(t)}return e}t=n,n=t.parentNode}return null}function vo(t){return t=t[Yt]||t[mn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ys(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(I(33))}function Pl(t){return t[Br]||null}var Fu=[],Qs=-1;function ns(t){return{current:t}}function le(t){0>Qs||(t.current=Fu[Qs],Fu[Qs]=null,Qs--)}function oe(t,e){Qs++,Fu[Qs]=t.current,t.current=e}var qn={},Ye=ns(qn),ct=ns(!1),Ss=qn;function vi(t,e){var n=t.type.contextTypes;if(!n)return qn;var s=t.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===e)return s.__reactInternalMemoizedMaskedChildContext;var i={},r;for(r in n)i[r]=e[r];return s&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function ut(t){return t=t.childContextTypes,t!=null}function Fa(){le(ct),le(Ye)}function Hp(t,e,n){if(Ye.current!==qn)throw Error(I(168));oe(Ye,e),oe(ct,n)}function K0(t,e,n){var s=t.stateNode;if(e=e.childContextTypes,typeof s.getChildContext!="function")return n;s=s.getChildContext();for(var i in s)if(!(i in e))throw Error(I(108,fS(t)||"Unknown",i));return me({},n,s)}function Oa(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||qn,Ss=Ye.current,oe(Ye,t),oe(ct,ct.current),!0}function Kp(t,e,n){var s=t.stateNode;if(!s)throw Error(I(169));n?(t=K0(t,e,Ss),s.__reactInternalMemoizedMergedChildContext=t,le(ct),le(Ye),oe(Ye,t)):le(ct),oe(ct,n)}var on=null,Rl=!1,Tc=!1;function G0(t){on===null?on=[t]:on.push(t)}function PC(t){Rl=!0,G0(t)}function ss(){if(!Tc&&on!==null){Tc=!0;var t=0,e=ee;try{var n=on;for(ee=1;t<n.length;t++){var s=n[t];do s=s(!0);while(s!==null)}on=null,Rl=!1}catch(i){throw on!==null&&(on=on.slice(t+1)),v0(ih,ss),i}finally{ee=e,Tc=!1}}return null}var qs=[],Xs=0,Va=null,za=0,Ct=[],Et=0,Cs=null,an=1,ln="";function as(t,e){qs[Xs++]=za,qs[Xs++]=Va,Va=t,za=e}function Y0(t,e,n){Ct[Et++]=an,Ct[Et++]=ln,Ct[Et++]=Cs,Cs=t;var s=an;t=ln;var i=32-$t(s)-1;s&=~(1<<i),n+=1;var r=32-$t(e)+i;if(30<r){var o=i-i%5;r=(s&(1<<o)-1).toString(32),s>>=o,i-=o,an=1<<32-$t(e)+i|n<<i|s,ln=r+t}else an=1<<r|n<<i|s,ln=t}function fh(t){t.return!==null&&(as(t,1),Y0(t,1,0))}function ph(t){for(;t===Va;)Va=qs[--Xs],qs[Xs]=null,za=qs[--Xs],qs[Xs]=null;for(;t===Cs;)Cs=Ct[--Et],Ct[Et]=null,ln=Ct[--Et],Ct[Et]=null,an=Ct[--Et],Ct[Et]=null}var mt=null,pt=null,ue=!1,Vt=null;function Q0(t,e){var n=bt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Gp(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,mt=t,pt=zn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,mt=t,pt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Cs!==null?{id:an,overflow:ln}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=bt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,mt=t,pt=null,!0):!1;default:return!1}}function Ou(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Vu(t){if(ue){var e=pt;if(e){var n=e;if(!Gp(t,e)){if(Ou(t))throw Error(I(418));e=zn(n.nextSibling);var s=mt;e&&Gp(t,e)?Q0(s,n):(t.flags=t.flags&-4097|2,ue=!1,mt=t)}}else{if(Ou(t))throw Error(I(418));t.flags=t.flags&-4097|2,ue=!1,mt=t}}}function Yp(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;mt=t}function Qo(t){if(t!==mt)return!1;if(!ue)return Yp(t),ue=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Du(t.type,t.memoizedProps)),e&&(e=pt)){if(Ou(t))throw q0(),Error(I(418));for(;e;)Q0(t,e),e=zn(e.nextSibling)}if(Yp(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(I(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){pt=zn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}pt=null}}else pt=mt?zn(t.stateNode.nextSibling):null;return!0}function q0(){for(var t=pt;t;)t=zn(t.nextSibling)}function xi(){pt=mt=null,ue=!1}function mh(t){Vt===null?Vt=[t]:Vt.push(t)}var RC=bn.ReactCurrentBatchConfig;function Qi(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(I(309));var s=n.stateNode}if(!s)throw Error(I(147,t));var i=s,r=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===r?e.ref:(e=function(o){var a=i.refs;o===null?delete a[r]:a[r]=o},e._stringRef=r,e)}if(typeof t!="string")throw Error(I(284));if(!n._owner)throw Error(I(290,t))}return t}function qo(t,e){throw t=Object.prototype.toString.call(e),Error(I(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Qp(t){var e=t._init;return e(t._payload)}function X0(t){function e(g,m){if(t){var x=g.deletions;x===null?(g.deletions=[m],g.flags|=16):x.push(m)}}function n(g,m){if(!t)return null;for(;m!==null;)e(g,m),m=m.sibling;return null}function s(g,m){for(g=new Map;m!==null;)m.key!==null?g.set(m.key,m):g.set(m.index,m),m=m.sibling;return g}function i(g,m){return g=Wn(g,m),g.index=0,g.sibling=null,g}function r(g,m,x){return g.index=x,t?(x=g.alternate,x!==null?(x=x.index,x<m?(g.flags|=2,m):x):(g.flags|=2,m)):(g.flags|=1048576,m)}function o(g){return t&&g.alternate===null&&(g.flags|=2),g}function a(g,m,x,b){return m===null||m.tag!==6?(m=Mc(x,g.mode,b),m.return=g,m):(m=i(m,x),m.return=g,m)}function l(g,m,x,b){var S=x.type;return S===Ws?d(g,m,x.props.children,b,x.key):m!==null&&(m.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Pn&&Qp(S)===m.type)?(b=i(m,x.props),b.ref=Qi(g,m,x),b.return=g,b):(b=wa(x.type,x.key,x.props,null,g.mode,b),b.ref=Qi(g,m,x),b.return=g,b)}function c(g,m,x,b){return m===null||m.tag!==4||m.stateNode.containerInfo!==x.containerInfo||m.stateNode.implementation!==x.implementation?(m=Lc(x,g.mode,b),m.return=g,m):(m=i(m,x.children||[]),m.return=g,m)}function d(g,m,x,b,S){return m===null||m.tag!==7?(m=xs(x,g.mode,b,S),m.return=g,m):(m=i(m,x),m.return=g,m)}function f(g,m,x){if(typeof m=="string"&&m!==""||typeof m=="number")return m=Mc(""+m,g.mode,x),m.return=g,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case Vo:return x=wa(m.type,m.key,m.props,null,g.mode,x),x.ref=Qi(g,null,m),x.return=g,x;case Us:return m=Lc(m,g.mode,x),m.return=g,m;case Pn:var b=m._init;return f(g,b(m._payload),x)}if(rr(m)||Wi(m))return m=xs(m,g.mode,x,null),m.return=g,m;qo(g,m)}return null}function h(g,m,x,b){var S=m!==null?m.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return S!==null?null:a(g,m,""+x,b);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Vo:return x.key===S?l(g,m,x,b):null;case Us:return x.key===S?c(g,m,x,b):null;case Pn:return S=x._init,h(g,m,S(x._payload),b)}if(rr(x)||Wi(x))return S!==null?null:d(g,m,x,b,null);qo(g,x)}return null}function p(g,m,x,b,S){if(typeof b=="string"&&b!==""||typeof b=="number")return g=g.get(x)||null,a(m,g,""+b,S);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Vo:return g=g.get(b.key===null?x:b.key)||null,l(m,g,b,S);case Us:return g=g.get(b.key===null?x:b.key)||null,c(m,g,b,S);case Pn:var T=b._init;return p(g,m,x,T(b._payload),S)}if(rr(b)||Wi(b))return g=g.get(x)||null,d(m,g,b,S,null);qo(m,b)}return null}function y(g,m,x,b){for(var S=null,T=null,E=m,_=m=0,k=null;E!==null&&_<x.length;_++){E.index>_?(k=E,E=null):k=E.sibling;var N=h(g,E,x[_],b);if(N===null){E===null&&(E=k);break}t&&E&&N.alternate===null&&e(g,E),m=r(N,m,_),T===null?S=N:T.sibling=N,T=N,E=k}if(_===x.length)return n(g,E),ue&&as(g,_),S;if(E===null){for(;_<x.length;_++)E=f(g,x[_],b),E!==null&&(m=r(E,m,_),T===null?S=E:T.sibling=E,T=E);return ue&&as(g,_),S}for(E=s(g,E);_<x.length;_++)k=p(E,g,_,x[_],b),k!==null&&(t&&k.alternate!==null&&E.delete(k.key===null?_:k.key),m=r(k,m,_),T===null?S=k:T.sibling=k,T=k);return t&&E.forEach(function(P){return e(g,P)}),ue&&as(g,_),S}function w(g,m,x,b){var S=Wi(x);if(typeof S!="function")throw Error(I(150));if(x=S.call(x),x==null)throw Error(I(151));for(var T=S=null,E=m,_=m=0,k=null,N=x.next();E!==null&&!N.done;_++,N=x.next()){E.index>_?(k=E,E=null):k=E.sibling;var P=h(g,E,N.value,b);if(P===null){E===null&&(E=k);break}t&&E&&P.alternate===null&&e(g,E),m=r(P,m,_),T===null?S=P:T.sibling=P,T=P,E=k}if(N.done)return n(g,E),ue&&as(g,_),S;if(E===null){for(;!N.done;_++,N=x.next())N=f(g,N.value,b),N!==null&&(m=r(N,m,_),T===null?S=N:T.sibling=N,T=N);return ue&&as(g,_),S}for(E=s(g,E);!N.done;_++,N=x.next())N=p(E,g,_,N.value,b),N!==null&&(t&&N.alternate!==null&&E.delete(N.key===null?_:N.key),m=r(N,m,_),T===null?S=N:T.sibling=N,T=N);return t&&E.forEach(function($){return e(g,$)}),ue&&as(g,_),S}function C(g,m,x,b){if(typeof x=="object"&&x!==null&&x.type===Ws&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case Vo:e:{for(var S=x.key,T=m;T!==null;){if(T.key===S){if(S=x.type,S===Ws){if(T.tag===7){n(g,T.sibling),m=i(T,x.props.children),m.return=g,g=m;break e}}else if(T.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Pn&&Qp(S)===T.type){n(g,T.sibling),m=i(T,x.props),m.ref=Qi(g,T,x),m.return=g,g=m;break e}n(g,T);break}else e(g,T);T=T.sibling}x.type===Ws?(m=xs(x.props.children,g.mode,b,x.key),m.return=g,g=m):(b=wa(x.type,x.key,x.props,null,g.mode,b),b.ref=Qi(g,m,x),b.return=g,g=b)}return o(g);case Us:e:{for(T=x.key;m!==null;){if(m.key===T)if(m.tag===4&&m.stateNode.containerInfo===x.containerInfo&&m.stateNode.implementation===x.implementation){n(g,m.sibling),m=i(m,x.children||[]),m.return=g,g=m;break e}else{n(g,m);break}else e(g,m);m=m.sibling}m=Lc(x,g.mode,b),m.return=g,g=m}return o(g);case Pn:return T=x._init,C(g,m,T(x._payload),b)}if(rr(x))return y(g,m,x,b);if(Wi(x))return w(g,m,x,b);qo(g,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,m!==null&&m.tag===6?(n(g,m.sibling),m=i(m,x),m.return=g,g=m):(n(g,m),m=Mc(x,g.mode,b),m.return=g,g=m),o(g)):n(g,m)}return C}var wi=X0(!0),J0=X0(!1),Ba=ns(null),$a=null,Js=null,gh=null;function yh(){gh=Js=$a=null}function vh(t){var e=Ba.current;le(Ba),t._currentValue=e}function zu(t,e,n){for(;t!==null;){var s=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,s!==null&&(s.childLanes|=e)):s!==null&&(s.childLanes&e)!==e&&(s.childLanes|=e),t===n)break;t=t.return}}function di(t,e){$a=t,gh=Js=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(ot=!0),t.firstContext=null)}function jt(t){var e=t._currentValue;if(gh!==t)if(t={context:t,memoizedValue:e,next:null},Js===null){if($a===null)throw Error(I(308));Js=t,$a.dependencies={lanes:0,firstContext:t}}else Js=Js.next=t;return e}var fs=null;function xh(t){fs===null?fs=[t]:fs.push(t)}function Z0(t,e,n,s){var i=e.interleaved;return i===null?(n.next=n,xh(e)):(n.next=i.next,i.next=n),e.interleaved=n,gn(t,s)}function gn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Rn=!1;function wh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ev(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function dn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Bn(t,e,n){var s=t.updateQueue;if(s===null)return null;if(s=s.shared,q&2){var i=s.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),s.pending=e,gn(t,n)}return i=s.interleaved,i===null?(e.next=e,xh(s)):(e.next=i.next,i.next=e),s.interleaved=e,gn(t,n)}function pa(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var s=e.lanes;s&=t.pendingLanes,n|=s,e.lanes=n,rh(t,n)}}function qp(t,e){var n=t.updateQueue,s=t.alternate;if(s!==null&&(s=s.updateQueue,n===s)){var i=null,r=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};r===null?i=r=o:r=r.next=o,n=n.next}while(n!==null);r===null?i=r=e:r=r.next=e}else i=r=e;n={baseState:s.baseState,firstBaseUpdate:i,lastBaseUpdate:r,shared:s.shared,effects:s.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Ua(t,e,n,s){var i=t.updateQueue;Rn=!1;var r=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?r=c:o.next=c,o=l;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=l))}if(r!==null){var f=i.baseState;o=0,d=c=l=null,a=r;do{var h=a.lane,p=a.eventTime;if((s&h)===h){d!==null&&(d=d.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var y=t,w=a;switch(h=e,p=n,w.tag){case 1:if(y=w.payload,typeof y=="function"){f=y.call(p,f,h);break e}f=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=w.payload,h=typeof y=="function"?y.call(p,f,h):y,h==null)break e;f=me({},f,h);break e;case 2:Rn=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,h=i.effects,h===null?i.effects=[a]:h.push(a))}else p={eventTime:p,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=p,l=f):d=d.next=p,o|=h;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;h=a,a=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(!0);if(d===null&&(l=f),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else r===null&&(i.shared.lanes=0);bs|=o,t.lanes=o,t.memoizedState=f}}function Xp(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var s=t[e],i=s.callback;if(i!==null){if(s.callback=null,s=n,typeof i!="function")throw Error(I(191,i));i.call(s)}}}var xo={},qt=ns(xo),$r=ns(xo),Ur=ns(xo);function ps(t){if(t===xo)throw Error(I(174));return t}function _h(t,e){switch(oe(Ur,e),oe($r,t),oe(qt,xo),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:wu(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=wu(e,t)}le(qt),oe(qt,e)}function _i(){le(qt),le($r),le(Ur)}function tv(t){ps(Ur.current);var e=ps(qt.current),n=wu(e,t.type);e!==n&&(oe($r,t),oe(qt,n))}function Sh(t){$r.current===t&&(le(qt),le($r))}var de=ns(0);function Wa(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var jc=[];function Ch(){for(var t=0;t<jc.length;t++)jc[t]._workInProgressVersionPrimary=null;jc.length=0}var ma=bn.ReactCurrentDispatcher,Pc=bn.ReactCurrentBatchConfig,Es=0,fe=null,Te=null,De=null,Ha=!1,mr=!1,Wr=0,IC=0;function We(){throw Error(I(321))}function Eh(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Ht(t[n],e[n]))return!1;return!0}function bh(t,e,n,s,i,r){if(Es=r,fe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ma.current=t===null||t.memoizedState===null?LC:FC,t=n(s,i),mr){r=0;do{if(mr=!1,Wr=0,25<=r)throw Error(I(301));r+=1,De=Te=null,e.updateQueue=null,ma.current=OC,t=n(s,i)}while(mr)}if(ma.current=Ka,e=Te!==null&&Te.next!==null,Es=0,De=Te=fe=null,Ha=!1,e)throw Error(I(300));return t}function Nh(){var t=Wr!==0;return Wr=0,t}function Gt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return De===null?fe.memoizedState=De=t:De=De.next=t,De}function Pt(){if(Te===null){var t=fe.alternate;t=t!==null?t.memoizedState:null}else t=Te.next;var e=De===null?fe.memoizedState:De.next;if(e!==null)De=e,Te=t;else{if(t===null)throw Error(I(310));Te=t,t={memoizedState:Te.memoizedState,baseState:Te.baseState,baseQueue:Te.baseQueue,queue:Te.queue,next:null},De===null?fe.memoizedState=De=t:De=De.next=t}return De}function Hr(t,e){return typeof e=="function"?e(t):e}function Rc(t){var e=Pt(),n=e.queue;if(n===null)throw Error(I(311));n.lastRenderedReducer=t;var s=Te,i=s.baseQueue,r=n.pending;if(r!==null){if(i!==null){var o=i.next;i.next=r.next,r.next=o}s.baseQueue=i=r,n.pending=null}if(i!==null){r=i.next,s=s.baseState;var a=o=null,l=null,c=r;do{var d=c.lane;if((Es&d)===d)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),s=c.hasEagerState?c.eagerState:t(s,c.action);else{var f={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=f,o=s):l=l.next=f,fe.lanes|=d,bs|=d}c=c.next}while(c!==null&&c!==r);l===null?o=s:l.next=a,Ht(s,e.memoizedState)||(ot=!0),e.memoizedState=s,e.baseState=o,e.baseQueue=l,n.lastRenderedState=s}if(t=n.interleaved,t!==null){i=t;do r=i.lane,fe.lanes|=r,bs|=r,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Ic(t){var e=Pt(),n=e.queue;if(n===null)throw Error(I(311));n.lastRenderedReducer=t;var s=n.dispatch,i=n.pending,r=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do r=t(r,o.action),o=o.next;while(o!==i);Ht(r,e.memoizedState)||(ot=!0),e.memoizedState=r,e.baseQueue===null&&(e.baseState=r),n.lastRenderedState=r}return[r,s]}function nv(){}function sv(t,e){var n=fe,s=Pt(),i=e(),r=!Ht(s.memoizedState,i);if(r&&(s.memoizedState=i,ot=!0),s=s.queue,kh(ov.bind(null,n,s,t),[t]),s.getSnapshot!==e||r||De!==null&&De.memoizedState.tag&1){if(n.flags|=2048,Kr(9,rv.bind(null,n,s,i,e),void 0,null),Le===null)throw Error(I(349));Es&30||iv(n,e,i)}return i}function iv(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=fe.updateQueue,e===null?(e={lastEffect:null,stores:null},fe.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function rv(t,e,n,s){e.value=n,e.getSnapshot=s,av(e)&&lv(t)}function ov(t,e,n){return n(function(){av(e)&&lv(t)})}function av(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Ht(t,n)}catch{return!0}}function lv(t){var e=gn(t,1);e!==null&&Ut(e,t,1,-1)}function Jp(t){var e=Gt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Hr,lastRenderedState:t},e.queue=t,t=t.dispatch=MC.bind(null,fe,t),[e.memoizedState,t]}function Kr(t,e,n,s){return t={tag:t,create:e,destroy:n,deps:s,next:null},e=fe.updateQueue,e===null?(e={lastEffect:null,stores:null},fe.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(s=n.next,n.next=t,t.next=s,e.lastEffect=t)),t}function cv(){return Pt().memoizedState}function ga(t,e,n,s){var i=Gt();fe.flags|=t,i.memoizedState=Kr(1|e,n,void 0,s===void 0?null:s)}function Il(t,e,n,s){var i=Pt();s=s===void 0?null:s;var r=void 0;if(Te!==null){var o=Te.memoizedState;if(r=o.destroy,s!==null&&Eh(s,o.deps)){i.memoizedState=Kr(e,n,r,s);return}}fe.flags|=t,i.memoizedState=Kr(1|e,n,r,s)}function Zp(t,e){return ga(8390656,8,t,e)}function kh(t,e){return Il(2048,8,t,e)}function uv(t,e){return Il(4,2,t,e)}function dv(t,e){return Il(4,4,t,e)}function hv(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function fv(t,e,n){return n=n!=null?n.concat([t]):null,Il(4,4,hv.bind(null,e,t),n)}function Th(){}function pv(t,e){var n=Pt();e=e===void 0?null:e;var s=n.memoizedState;return s!==null&&e!==null&&Eh(e,s[1])?s[0]:(n.memoizedState=[t,e],t)}function mv(t,e){var n=Pt();e=e===void 0?null:e;var s=n.memoizedState;return s!==null&&e!==null&&Eh(e,s[1])?s[0]:(t=t(),n.memoizedState=[t,e],t)}function gv(t,e,n){return Es&21?(Ht(n,e)||(n=_0(),fe.lanes|=n,bs|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,ot=!0),t.memoizedState=n)}function AC(t,e){var n=ee;ee=n!==0&&4>n?n:4,t(!0);var s=Pc.transition;Pc.transition={};try{t(!1),e()}finally{ee=n,Pc.transition=s}}function yv(){return Pt().memoizedState}function DC(t,e,n){var s=Un(t);if(n={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null},vv(t))xv(e,n);else if(n=Z0(t,e,n,s),n!==null){var i=tt();Ut(n,t,s,i),wv(n,e,s)}}function MC(t,e,n){var s=Un(t),i={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null};if(vv(t))xv(e,i);else{var r=t.alternate;if(t.lanes===0&&(r===null||r.lanes===0)&&(r=e.lastRenderedReducer,r!==null))try{var o=e.lastRenderedState,a=r(o,n);if(i.hasEagerState=!0,i.eagerState=a,Ht(a,o)){var l=e.interleaved;l===null?(i.next=i,xh(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=Z0(t,e,i,s),n!==null&&(i=tt(),Ut(n,t,s,i),wv(n,e,s))}}function vv(t){var e=t.alternate;return t===fe||e!==null&&e===fe}function xv(t,e){mr=Ha=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function wv(t,e,n){if(n&4194240){var s=e.lanes;s&=t.pendingLanes,n|=s,e.lanes=n,rh(t,n)}}var Ka={readContext:jt,useCallback:We,useContext:We,useEffect:We,useImperativeHandle:We,useInsertionEffect:We,useLayoutEffect:We,useMemo:We,useReducer:We,useRef:We,useState:We,useDebugValue:We,useDeferredValue:We,useTransition:We,useMutableSource:We,useSyncExternalStore:We,useId:We,unstable_isNewReconciler:!1},LC={readContext:jt,useCallback:function(t,e){return Gt().memoizedState=[t,e===void 0?null:e],t},useContext:jt,useEffect:Zp,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,ga(4194308,4,hv.bind(null,e,t),n)},useLayoutEffect:function(t,e){return ga(4194308,4,t,e)},useInsertionEffect:function(t,e){return ga(4,2,t,e)},useMemo:function(t,e){var n=Gt();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var s=Gt();return e=n!==void 0?n(e):e,s.memoizedState=s.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},s.queue=t,t=t.dispatch=DC.bind(null,fe,t),[s.memoizedState,t]},useRef:function(t){var e=Gt();return t={current:t},e.memoizedState=t},useState:Jp,useDebugValue:Th,useDeferredValue:function(t){return Gt().memoizedState=t},useTransition:function(){var t=Jp(!1),e=t[0];return t=AC.bind(null,t[1]),Gt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var s=fe,i=Gt();if(ue){if(n===void 0)throw Error(I(407));n=n()}else{if(n=e(),Le===null)throw Error(I(349));Es&30||iv(s,e,n)}i.memoizedState=n;var r={value:n,getSnapshot:e};return i.queue=r,Zp(ov.bind(null,s,r,t),[t]),s.flags|=2048,Kr(9,rv.bind(null,s,r,n,e),void 0,null),n},useId:function(){var t=Gt(),e=Le.identifierPrefix;if(ue){var n=ln,s=an;n=(s&~(1<<32-$t(s)-1)).toString(32)+n,e=":"+e+"R"+n,n=Wr++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=IC++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},FC={readContext:jt,useCallback:pv,useContext:jt,useEffect:kh,useImperativeHandle:fv,useInsertionEffect:uv,useLayoutEffect:dv,useMemo:mv,useReducer:Rc,useRef:cv,useState:function(){return Rc(Hr)},useDebugValue:Th,useDeferredValue:function(t){var e=Pt();return gv(e,Te.memoizedState,t)},useTransition:function(){var t=Rc(Hr)[0],e=Pt().memoizedState;return[t,e]},useMutableSource:nv,useSyncExternalStore:sv,useId:yv,unstable_isNewReconciler:!1},OC={readContext:jt,useCallback:pv,useContext:jt,useEffect:kh,useImperativeHandle:fv,useInsertionEffect:uv,useLayoutEffect:dv,useMemo:mv,useReducer:Ic,useRef:cv,useState:function(){return Ic(Hr)},useDebugValue:Th,useDeferredValue:function(t){var e=Pt();return Te===null?e.memoizedState=t:gv(e,Te.memoizedState,t)},useTransition:function(){var t=Ic(Hr)[0],e=Pt().memoizedState;return[t,e]},useMutableSource:nv,useSyncExternalStore:sv,useId:yv,unstable_isNewReconciler:!1};function Mt(t,e){if(t&&t.defaultProps){e=me({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Bu(t,e,n,s){e=t.memoizedState,n=n(s,e),n=n==null?e:me({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Al={isMounted:function(t){return(t=t._reactInternals)?As(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var s=tt(),i=Un(t),r=dn(s,i);r.payload=e,n!=null&&(r.callback=n),e=Bn(t,r,i),e!==null&&(Ut(e,t,i,s),pa(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var s=tt(),i=Un(t),r=dn(s,i);r.tag=1,r.payload=e,n!=null&&(r.callback=n),e=Bn(t,r,i),e!==null&&(Ut(e,t,i,s),pa(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=tt(),s=Un(t),i=dn(n,s);i.tag=2,e!=null&&(i.callback=e),e=Bn(t,i,s),e!==null&&(Ut(e,t,s,n),pa(e,t,s))}};function em(t,e,n,s,i,r,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(s,r,o):e.prototype&&e.prototype.isPureReactComponent?!Or(n,s)||!Or(i,r):!0}function _v(t,e,n){var s=!1,i=qn,r=e.contextType;return typeof r=="object"&&r!==null?r=jt(r):(i=ut(e)?Ss:Ye.current,s=e.contextTypes,r=(s=s!=null)?vi(t,i):qn),e=new e(n,r),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Al,t.stateNode=e,e._reactInternals=t,s&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=r),e}function tm(t,e,n,s){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,s),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,s),e.state!==t&&Al.enqueueReplaceState(e,e.state,null)}function $u(t,e,n,s){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},wh(t);var r=e.contextType;typeof r=="object"&&r!==null?i.context=jt(r):(r=ut(e)?Ss:Ye.current,i.context=vi(t,r)),i.state=t.memoizedState,r=e.getDerivedStateFromProps,typeof r=="function"&&(Bu(t,e,r,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Al.enqueueReplaceState(i,i.state,null),Ua(t,n,i,s),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Si(t,e){try{var n="",s=e;do n+=hS(s),s=s.return;while(s);var i=n}catch(r){i=`
Error generating stack: `+r.message+`
`+r.stack}return{value:t,source:e,stack:i,digest:null}}function Ac(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Uu(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var VC=typeof WeakMap=="function"?WeakMap:Map;function Sv(t,e,n){n=dn(-1,n),n.tag=3,n.payload={element:null};var s=e.value;return n.callback=function(){Ya||(Ya=!0,Zu=s),Uu(t,e)},n}function Cv(t,e,n){n=dn(-1,n),n.tag=3;var s=t.type.getDerivedStateFromError;if(typeof s=="function"){var i=e.value;n.payload=function(){return s(i)},n.callback=function(){Uu(t,e)}}var r=t.stateNode;return r!==null&&typeof r.componentDidCatch=="function"&&(n.callback=function(){Uu(t,e),typeof s!="function"&&($n===null?$n=new Set([this]):$n.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function nm(t,e,n){var s=t.pingCache;if(s===null){s=t.pingCache=new VC;var i=new Set;s.set(e,i)}else i=s.get(e),i===void 0&&(i=new Set,s.set(e,i));i.has(n)||(i.add(n),t=ZC.bind(null,t,e,n),e.then(t,t))}function sm(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function im(t,e,n,s,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=dn(-1,1),e.tag=2,Bn(n,e,1))),n.lanes|=1),t)}var zC=bn.ReactCurrentOwner,ot=!1;function Xe(t,e,n,s){e.child=t===null?J0(e,null,n,s):wi(e,t.child,n,s)}function rm(t,e,n,s,i){n=n.render;var r=e.ref;return di(e,i),s=bh(t,e,n,s,r,i),n=Nh(),t!==null&&!ot?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,yn(t,e,i)):(ue&&n&&fh(e),e.flags|=1,Xe(t,e,s,i),e.child)}function om(t,e,n,s,i){if(t===null){var r=n.type;return typeof r=="function"&&!Lh(r)&&r.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=r,Ev(t,e,r,s,i)):(t=wa(n.type,null,s,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(r=t.child,!(t.lanes&i)){var o=r.memoizedProps;if(n=n.compare,n=n!==null?n:Or,n(o,s)&&t.ref===e.ref)return yn(t,e,i)}return e.flags|=1,t=Wn(r,s),t.ref=e.ref,t.return=e,e.child=t}function Ev(t,e,n,s,i){if(t!==null){var r=t.memoizedProps;if(Or(r,s)&&t.ref===e.ref)if(ot=!1,e.pendingProps=s=r,(t.lanes&i)!==0)t.flags&131072&&(ot=!0);else return e.lanes=t.lanes,yn(t,e,i)}return Wu(t,e,n,s,i)}function bv(t,e,n){var s=e.pendingProps,i=s.children,r=t!==null?t.memoizedState:null;if(s.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},oe(ei,ft),ft|=n;else{if(!(n&1073741824))return t=r!==null?r.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,oe(ei,ft),ft|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=r!==null?r.baseLanes:n,oe(ei,ft),ft|=s}else r!==null?(s=r.baseLanes|n,e.memoizedState=null):s=n,oe(ei,ft),ft|=s;return Xe(t,e,i,n),e.child}function Nv(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Wu(t,e,n,s,i){var r=ut(n)?Ss:Ye.current;return r=vi(e,r),di(e,i),n=bh(t,e,n,s,r,i),s=Nh(),t!==null&&!ot?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,yn(t,e,i)):(ue&&s&&fh(e),e.flags|=1,Xe(t,e,n,i),e.child)}function am(t,e,n,s,i){if(ut(n)){var r=!0;Oa(e)}else r=!1;if(di(e,i),e.stateNode===null)ya(t,e),_v(e,n,s),$u(e,n,s,i),s=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=jt(c):(c=ut(n)?Ss:Ye.current,c=vi(e,c));var d=n.getDerivedStateFromProps,f=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==s||l!==c)&&tm(e,o,s,c),Rn=!1;var h=e.memoizedState;o.state=h,Ua(e,s,o,i),l=e.memoizedState,a!==s||h!==l||ct.current||Rn?(typeof d=="function"&&(Bu(e,n,d,s),l=e.memoizedState),(a=Rn||em(e,n,a,s,h,l,c))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=s,e.memoizedState=l),o.props=s,o.state=l,o.context=c,s=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),s=!1)}else{o=e.stateNode,ev(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:Mt(e.type,a),o.props=c,f=e.pendingProps,h=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=jt(l):(l=ut(n)?Ss:Ye.current,l=vi(e,l));var p=n.getDerivedStateFromProps;(d=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||h!==l)&&tm(e,o,s,l),Rn=!1,h=e.memoizedState,o.state=h,Ua(e,s,o,i);var y=e.memoizedState;a!==f||h!==y||ct.current||Rn?(typeof p=="function"&&(Bu(e,n,p,s),y=e.memoizedState),(c=Rn||em(e,n,c,s,h,y,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(s,y,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(s,y,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=s,e.memoizedState=y),o.props=s,o.state=y,o.context=l,s=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),s=!1)}return Hu(t,e,n,s,r,i)}function Hu(t,e,n,s,i,r){Nv(t,e);var o=(e.flags&128)!==0;if(!s&&!o)return i&&Kp(e,n,!1),yn(t,e,r);s=e.stateNode,zC.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:s.render();return e.flags|=1,t!==null&&o?(e.child=wi(e,t.child,null,r),e.child=wi(e,null,a,r)):Xe(t,e,a,r),e.memoizedState=s.state,i&&Kp(e,n,!0),e.child}function kv(t){var e=t.stateNode;e.pendingContext?Hp(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Hp(t,e.context,!1),_h(t,e.containerInfo)}function lm(t,e,n,s,i){return xi(),mh(i),e.flags|=256,Xe(t,e,n,s),e.child}var Ku={dehydrated:null,treeContext:null,retryLane:0};function Gu(t){return{baseLanes:t,cachePool:null,transitions:null}}function Tv(t,e,n){var s=e.pendingProps,i=de.current,r=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(r=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),oe(de,i&1),t===null)return Vu(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=s.children,t=s.fallback,r?(s=e.mode,r=e.child,o={mode:"hidden",children:o},!(s&1)&&r!==null?(r.childLanes=0,r.pendingProps=o):r=Ll(o,s,0,null),t=xs(t,s,n,null),r.return=e,t.return=e,r.sibling=t,e.child=r,e.child.memoizedState=Gu(n),e.memoizedState=Ku,t):jh(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return BC(t,e,o,s,a,i,n);if(r){r=s.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:s.children};return!(o&1)&&e.child!==i?(s=e.child,s.childLanes=0,s.pendingProps=l,e.deletions=null):(s=Wn(i,l),s.subtreeFlags=i.subtreeFlags&14680064),a!==null?r=Wn(a,r):(r=xs(r,o,n,null),r.flags|=2),r.return=e,s.return=e,s.sibling=r,e.child=s,s=r,r=e.child,o=t.child.memoizedState,o=o===null?Gu(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},r.memoizedState=o,r.childLanes=t.childLanes&~n,e.memoizedState=Ku,s}return r=t.child,t=r.sibling,s=Wn(r,{mode:"visible",children:s.children}),!(e.mode&1)&&(s.lanes=n),s.return=e,s.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=s,e.memoizedState=null,s}function jh(t,e){return e=Ll({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Xo(t,e,n,s){return s!==null&&mh(s),wi(e,t.child,null,n),t=jh(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function BC(t,e,n,s,i,r,o){if(n)return e.flags&256?(e.flags&=-257,s=Ac(Error(I(422))),Xo(t,e,o,s)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(r=s.fallback,i=e.mode,s=Ll({mode:"visible",children:s.children},i,0,null),r=xs(r,i,o,null),r.flags|=2,s.return=e,r.return=e,s.sibling=r,e.child=s,e.mode&1&&wi(e,t.child,null,o),e.child.memoizedState=Gu(o),e.memoizedState=Ku,r);if(!(e.mode&1))return Xo(t,e,o,null);if(i.data==="$!"){if(s=i.nextSibling&&i.nextSibling.dataset,s)var a=s.dgst;return s=a,r=Error(I(419)),s=Ac(r,s,void 0),Xo(t,e,o,s)}if(a=(o&t.childLanes)!==0,ot||a){if(s=Le,s!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(s.suspendedLanes|o)?0:i,i!==0&&i!==r.retryLane&&(r.retryLane=i,gn(t,i),Ut(s,t,i,-1))}return Mh(),s=Ac(Error(I(421))),Xo(t,e,o,s)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=eE.bind(null,t),i._reactRetry=e,null):(t=r.treeContext,pt=zn(i.nextSibling),mt=e,ue=!0,Vt=null,t!==null&&(Ct[Et++]=an,Ct[Et++]=ln,Ct[Et++]=Cs,an=t.id,ln=t.overflow,Cs=e),e=jh(e,s.children),e.flags|=4096,e)}function cm(t,e,n){t.lanes|=e;var s=t.alternate;s!==null&&(s.lanes|=e),zu(t.return,e,n)}function Dc(t,e,n,s,i){var r=t.memoizedState;r===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:s,tail:n,tailMode:i}:(r.isBackwards=e,r.rendering=null,r.renderingStartTime=0,r.last=s,r.tail=n,r.tailMode=i)}function jv(t,e,n){var s=e.pendingProps,i=s.revealOrder,r=s.tail;if(Xe(t,e,s.children,n),s=de.current,s&2)s=s&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&cm(t,n,e);else if(t.tag===19)cm(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}s&=1}if(oe(de,s),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Wa(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Dc(e,!1,i,n,r);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Wa(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Dc(e,!0,n,null,r);break;case"together":Dc(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ya(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function yn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),bs|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(I(153));if(e.child!==null){for(t=e.child,n=Wn(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Wn(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function $C(t,e,n){switch(e.tag){case 3:kv(e),xi();break;case 5:tv(e);break;case 1:ut(e.type)&&Oa(e);break;case 4:_h(e,e.stateNode.containerInfo);break;case 10:var s=e.type._context,i=e.memoizedProps.value;oe(Ba,s._currentValue),s._currentValue=i;break;case 13:if(s=e.memoizedState,s!==null)return s.dehydrated!==null?(oe(de,de.current&1),e.flags|=128,null):n&e.child.childLanes?Tv(t,e,n):(oe(de,de.current&1),t=yn(t,e,n),t!==null?t.sibling:null);oe(de,de.current&1);break;case 19:if(s=(n&e.childLanes)!==0,t.flags&128){if(s)return jv(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),oe(de,de.current),s)break;return null;case 22:case 23:return e.lanes=0,bv(t,e,n)}return yn(t,e,n)}var Pv,Yu,Rv,Iv;Pv=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Yu=function(){};Rv=function(t,e,n,s){var i=t.memoizedProps;if(i!==s){t=e.stateNode,ps(qt.current);var r=null;switch(n){case"input":i=gu(t,i),s=gu(t,s),r=[];break;case"select":i=me({},i,{value:void 0}),s=me({},s,{value:void 0}),r=[];break;case"textarea":i=xu(t,i),s=xu(t,s),r=[];break;default:typeof i.onClick!="function"&&typeof s.onClick=="function"&&(t.onclick=La)}_u(n,s);var o;n=null;for(c in i)if(!s.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Rr.hasOwnProperty(c)?r||(r=[]):(r=r||[]).push(c,null));for(c in s){var l=s[c];if(a=i!=null?i[c]:void 0,s.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(r||(r=[]),r.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(r=r||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(r=r||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Rr.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&ae("scroll",t),r||a===l||(r=[])):(r=r||[]).push(c,l))}n&&(r=r||[]).push("style",n);var c=r;(e.updateQueue=c)&&(e.flags|=4)}};Iv=function(t,e,n,s){n!==s&&(e.flags|=4)};function qi(t,e){if(!ue)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:s.sibling=null}}function He(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,s=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,s|=i.subtreeFlags&14680064,s|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,s|=i.subtreeFlags,s|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=s,t.childLanes=n,e}function UC(t,e,n){var s=e.pendingProps;switch(ph(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return He(e),null;case 1:return ut(e.type)&&Fa(),He(e),null;case 3:return s=e.stateNode,_i(),le(ct),le(Ye),Ch(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(t===null||t.child===null)&&(Qo(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Vt!==null&&(nd(Vt),Vt=null))),Yu(t,e),He(e),null;case 5:Sh(e);var i=ps(Ur.current);if(n=e.type,t!==null&&e.stateNode!=null)Rv(t,e,n,s,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!s){if(e.stateNode===null)throw Error(I(166));return He(e),null}if(t=ps(qt.current),Qo(e)){s=e.stateNode,n=e.type;var r=e.memoizedProps;switch(s[Yt]=e,s[Br]=r,t=(e.mode&1)!==0,n){case"dialog":ae("cancel",s),ae("close",s);break;case"iframe":case"object":case"embed":ae("load",s);break;case"video":case"audio":for(i=0;i<ar.length;i++)ae(ar[i],s);break;case"source":ae("error",s);break;case"img":case"image":case"link":ae("error",s),ae("load",s);break;case"details":ae("toggle",s);break;case"input":vp(s,r),ae("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!r.multiple},ae("invalid",s);break;case"textarea":wp(s,r),ae("invalid",s)}_u(n,r),i=null;for(var o in r)if(r.hasOwnProperty(o)){var a=r[o];o==="children"?typeof a=="string"?s.textContent!==a&&(r.suppressHydrationWarning!==!0&&Yo(s.textContent,a,t),i=["children",a]):typeof a=="number"&&s.textContent!==""+a&&(r.suppressHydrationWarning!==!0&&Yo(s.textContent,a,t),i=["children",""+a]):Rr.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&ae("scroll",s)}switch(n){case"input":zo(s),xp(s,r,!0);break;case"textarea":zo(s),_p(s);break;case"select":case"option":break;default:typeof r.onClick=="function"&&(s.onclick=La)}s=i,e.updateQueue=s,s!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=o0(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof s.is=="string"?t=o.createElement(n,{is:s.is}):(t=o.createElement(n),n==="select"&&(o=t,s.multiple?o.multiple=!0:s.size&&(o.size=s.size))):t=o.createElementNS(t,n),t[Yt]=e,t[Br]=s,Pv(t,e,!1,!1),e.stateNode=t;e:{switch(o=Su(n,s),n){case"dialog":ae("cancel",t),ae("close",t),i=s;break;case"iframe":case"object":case"embed":ae("load",t),i=s;break;case"video":case"audio":for(i=0;i<ar.length;i++)ae(ar[i],t);i=s;break;case"source":ae("error",t),i=s;break;case"img":case"image":case"link":ae("error",t),ae("load",t),i=s;break;case"details":ae("toggle",t),i=s;break;case"input":vp(t,s),i=gu(t,s),ae("invalid",t);break;case"option":i=s;break;case"select":t._wrapperState={wasMultiple:!!s.multiple},i=me({},s,{value:void 0}),ae("invalid",t);break;case"textarea":wp(t,s),i=xu(t,s),ae("invalid",t);break;default:i=s}_u(n,i),a=i;for(r in a)if(a.hasOwnProperty(r)){var l=a[r];r==="style"?c0(t,l):r==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&a0(t,l)):r==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Ir(t,l):typeof l=="number"&&Ir(t,""+l):r!=="suppressContentEditableWarning"&&r!=="suppressHydrationWarning"&&r!=="autoFocus"&&(Rr.hasOwnProperty(r)?l!=null&&r==="onScroll"&&ae("scroll",t):l!=null&&Zd(t,r,l,o))}switch(n){case"input":zo(t),xp(t,s,!1);break;case"textarea":zo(t),_p(t);break;case"option":s.value!=null&&t.setAttribute("value",""+Qn(s.value));break;case"select":t.multiple=!!s.multiple,r=s.value,r!=null?ai(t,!!s.multiple,r,!1):s.defaultValue!=null&&ai(t,!!s.multiple,s.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=La)}switch(n){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return He(e),null;case 6:if(t&&e.stateNode!=null)Iv(t,e,t.memoizedProps,s);else{if(typeof s!="string"&&e.stateNode===null)throw Error(I(166));if(n=ps(Ur.current),ps(qt.current),Qo(e)){if(s=e.stateNode,n=e.memoizedProps,s[Yt]=e,(r=s.nodeValue!==n)&&(t=mt,t!==null))switch(t.tag){case 3:Yo(s.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Yo(s.nodeValue,n,(t.mode&1)!==0)}r&&(e.flags|=4)}else s=(n.nodeType===9?n:n.ownerDocument).createTextNode(s),s[Yt]=e,e.stateNode=s}return He(e),null;case 13:if(le(de),s=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ue&&pt!==null&&e.mode&1&&!(e.flags&128))q0(),xi(),e.flags|=98560,r=!1;else if(r=Qo(e),s!==null&&s.dehydrated!==null){if(t===null){if(!r)throw Error(I(318));if(r=e.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(I(317));r[Yt]=e}else xi(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;He(e),r=!1}else Vt!==null&&(nd(Vt),Vt=null),r=!0;if(!r)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(s=s!==null,s!==(t!==null&&t.memoizedState!==null)&&s&&(e.child.flags|=8192,e.mode&1&&(t===null||de.current&1?Re===0&&(Re=3):Mh())),e.updateQueue!==null&&(e.flags|=4),He(e),null);case 4:return _i(),Yu(t,e),t===null&&Vr(e.stateNode.containerInfo),He(e),null;case 10:return vh(e.type._context),He(e),null;case 17:return ut(e.type)&&Fa(),He(e),null;case 19:if(le(de),r=e.memoizedState,r===null)return He(e),null;if(s=(e.flags&128)!==0,o=r.rendering,o===null)if(s)qi(r,!1);else{if(Re!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Wa(t),o!==null){for(e.flags|=128,qi(r,!1),s=o.updateQueue,s!==null&&(e.updateQueue=s,e.flags|=4),e.subtreeFlags=0,s=n,n=e.child;n!==null;)r=n,t=s,r.flags&=14680066,o=r.alternate,o===null?(r.childLanes=0,r.lanes=t,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=o.childLanes,r.lanes=o.lanes,r.child=o.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=o.memoizedProps,r.memoizedState=o.memoizedState,r.updateQueue=o.updateQueue,r.type=o.type,t=o.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return oe(de,de.current&1|2),e.child}t=t.sibling}r.tail!==null&&Se()>Ci&&(e.flags|=128,s=!0,qi(r,!1),e.lanes=4194304)}else{if(!s)if(t=Wa(o),t!==null){if(e.flags|=128,s=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),qi(r,!0),r.tail===null&&r.tailMode==="hidden"&&!o.alternate&&!ue)return He(e),null}else 2*Se()-r.renderingStartTime>Ci&&n!==1073741824&&(e.flags|=128,s=!0,qi(r,!1),e.lanes=4194304);r.isBackwards?(o.sibling=e.child,e.child=o):(n=r.last,n!==null?n.sibling=o:e.child=o,r.last=o)}return r.tail!==null?(e=r.tail,r.rendering=e,r.tail=e.sibling,r.renderingStartTime=Se(),e.sibling=null,n=de.current,oe(de,s?n&1|2:n&1),e):(He(e),null);case 22:case 23:return Dh(),s=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==s&&(e.flags|=8192),s&&e.mode&1?ft&1073741824&&(He(e),e.subtreeFlags&6&&(e.flags|=8192)):He(e),null;case 24:return null;case 25:return null}throw Error(I(156,e.tag))}function WC(t,e){switch(ph(e),e.tag){case 1:return ut(e.type)&&Fa(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return _i(),le(ct),le(Ye),Ch(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Sh(e),null;case 13:if(le(de),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(I(340));xi()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return le(de),null;case 4:return _i(),null;case 10:return vh(e.type._context),null;case 22:case 23:return Dh(),null;case 24:return null;default:return null}}var Jo=!1,Ke=!1,HC=typeof WeakSet=="function"?WeakSet:Set,F=null;function Zs(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(s){ve(t,e,s)}else n.current=null}function Qu(t,e,n){try{n()}catch(s){ve(t,e,s)}}var um=!1;function KC(t,e){if(Iu=Aa,t=F0(),hh(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var s=n.getSelection&&n.getSelection();if(s&&s.rangeCount!==0){n=s.anchorNode;var i=s.anchorOffset,r=s.focusNode;s=s.focusOffset;try{n.nodeType,r.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,d=0,f=t,h=null;t:for(;;){for(var p;f!==n||i!==0&&f.nodeType!==3||(a=o+i),f!==r||s!==0&&f.nodeType!==3||(l=o+s),f.nodeType===3&&(o+=f.nodeValue.length),(p=f.firstChild)!==null;)h=f,f=p;for(;;){if(f===t)break t;if(h===n&&++c===i&&(a=o),h===r&&++d===s&&(l=o),(p=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=p}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Au={focusedElem:t,selectionRange:n},Aa=!1,F=e;F!==null;)if(e=F,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,F=t;else for(;F!==null;){e=F;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var w=y.memoizedProps,C=y.memoizedState,g=e.stateNode,m=g.getSnapshotBeforeUpdate(e.elementType===e.type?w:Mt(e.type,w),C);g.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var x=e.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(I(163))}}catch(b){ve(e,e.return,b)}if(t=e.sibling,t!==null){t.return=e.return,F=t;break}F=e.return}return y=um,um=!1,y}function gr(t,e,n){var s=e.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var i=s=s.next;do{if((i.tag&t)===t){var r=i.destroy;i.destroy=void 0,r!==void 0&&Qu(e,n,r)}i=i.next}while(i!==s)}}function Dl(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var s=n.create;n.destroy=s()}n=n.next}while(n!==e)}}function qu(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Av(t){var e=t.alternate;e!==null&&(t.alternate=null,Av(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Yt],delete e[Br],delete e[Lu],delete e[TC],delete e[jC])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Dv(t){return t.tag===5||t.tag===3||t.tag===4}function dm(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Dv(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Xu(t,e,n){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=La));else if(s!==4&&(t=t.child,t!==null))for(Xu(t,e,n),t=t.sibling;t!==null;)Xu(t,e,n),t=t.sibling}function Ju(t,e,n){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(s!==4&&(t=t.child,t!==null))for(Ju(t,e,n),t=t.sibling;t!==null;)Ju(t,e,n),t=t.sibling}var Oe=null,Lt=!1;function kn(t,e,n){for(n=n.child;n!==null;)Mv(t,e,n),n=n.sibling}function Mv(t,e,n){if(Qt&&typeof Qt.onCommitFiberUnmount=="function")try{Qt.onCommitFiberUnmount(Nl,n)}catch{}switch(n.tag){case 5:Ke||Zs(n,e);case 6:var s=Oe,i=Lt;Oe=null,kn(t,e,n),Oe=s,Lt=i,Oe!==null&&(Lt?(t=Oe,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Oe.removeChild(n.stateNode));break;case 18:Oe!==null&&(Lt?(t=Oe,n=n.stateNode,t.nodeType===8?kc(t.parentNode,n):t.nodeType===1&&kc(t,n),Lr(t)):kc(Oe,n.stateNode));break;case 4:s=Oe,i=Lt,Oe=n.stateNode.containerInfo,Lt=!0,kn(t,e,n),Oe=s,Lt=i;break;case 0:case 11:case 14:case 15:if(!Ke&&(s=n.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){i=s=s.next;do{var r=i,o=r.destroy;r=r.tag,o!==void 0&&(r&2||r&4)&&Qu(n,e,o),i=i.next}while(i!==s)}kn(t,e,n);break;case 1:if(!Ke&&(Zs(n,e),s=n.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=n.memoizedProps,s.state=n.memoizedState,s.componentWillUnmount()}catch(a){ve(n,e,a)}kn(t,e,n);break;case 21:kn(t,e,n);break;case 22:n.mode&1?(Ke=(s=Ke)||n.memoizedState!==null,kn(t,e,n),Ke=s):kn(t,e,n);break;default:kn(t,e,n)}}function hm(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new HC),e.forEach(function(s){var i=tE.bind(null,t,s);n.has(s)||(n.add(s),s.then(i,i))})}}function It(t,e){var n=e.deletions;if(n!==null)for(var s=0;s<n.length;s++){var i=n[s];try{var r=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Oe=a.stateNode,Lt=!1;break e;case 3:Oe=a.stateNode.containerInfo,Lt=!0;break e;case 4:Oe=a.stateNode.containerInfo,Lt=!0;break e}a=a.return}if(Oe===null)throw Error(I(160));Mv(r,o,i),Oe=null,Lt=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){ve(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Lv(e,t),e=e.sibling}function Lv(t,e){var n=t.alternate,s=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(It(e,t),Kt(t),s&4){try{gr(3,t,t.return),Dl(3,t)}catch(w){ve(t,t.return,w)}try{gr(5,t,t.return)}catch(w){ve(t,t.return,w)}}break;case 1:It(e,t),Kt(t),s&512&&n!==null&&Zs(n,n.return);break;case 5:if(It(e,t),Kt(t),s&512&&n!==null&&Zs(n,n.return),t.flags&32){var i=t.stateNode;try{Ir(i,"")}catch(w){ve(t,t.return,w)}}if(s&4&&(i=t.stateNode,i!=null)){var r=t.memoizedProps,o=n!==null?n.memoizedProps:r,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&r.type==="radio"&&r.name!=null&&i0(i,r),Su(a,o);var c=Su(a,r);for(o=0;o<l.length;o+=2){var d=l[o],f=l[o+1];d==="style"?c0(i,f):d==="dangerouslySetInnerHTML"?a0(i,f):d==="children"?Ir(i,f):Zd(i,d,f,c)}switch(a){case"input":yu(i,r);break;case"textarea":r0(i,r);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!r.multiple;var p=r.value;p!=null?ai(i,!!r.multiple,p,!1):h!==!!r.multiple&&(r.defaultValue!=null?ai(i,!!r.multiple,r.defaultValue,!0):ai(i,!!r.multiple,r.multiple?[]:"",!1))}i[Br]=r}catch(w){ve(t,t.return,w)}}break;case 6:if(It(e,t),Kt(t),s&4){if(t.stateNode===null)throw Error(I(162));i=t.stateNode,r=t.memoizedProps;try{i.nodeValue=r}catch(w){ve(t,t.return,w)}}break;case 3:if(It(e,t),Kt(t),s&4&&n!==null&&n.memoizedState.isDehydrated)try{Lr(e.containerInfo)}catch(w){ve(t,t.return,w)}break;case 4:It(e,t),Kt(t);break;case 13:It(e,t),Kt(t),i=t.child,i.flags&8192&&(r=i.memoizedState!==null,i.stateNode.isHidden=r,!r||i.alternate!==null&&i.alternate.memoizedState!==null||(Ih=Se())),s&4&&hm(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(Ke=(c=Ke)||d,It(e,t),Ke=c):It(e,t),Kt(t),s&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(F=t,d=t.child;d!==null;){for(f=F=d;F!==null;){switch(h=F,p=h.child,h.tag){case 0:case 11:case 14:case 15:gr(4,h,h.return);break;case 1:Zs(h,h.return);var y=h.stateNode;if(typeof y.componentWillUnmount=="function"){s=h,n=h.return;try{e=s,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(w){ve(s,n,w)}}break;case 5:Zs(h,h.return);break;case 22:if(h.memoizedState!==null){pm(f);continue}}p!==null?(p.return=h,F=p):pm(f)}d=d.sibling}e:for(d=null,f=t;;){if(f.tag===5){if(d===null){d=f;try{i=f.stateNode,c?(r=i.style,typeof r.setProperty=="function"?r.setProperty("display","none","important"):r.display="none"):(a=f.stateNode,l=f.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=l0("display",o))}catch(w){ve(t,t.return,w)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(w){ve(t,t.return,w)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:It(e,t),Kt(t),s&4&&hm(t);break;case 21:break;default:It(e,t),Kt(t)}}function Kt(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Dv(n)){var s=n;break e}n=n.return}throw Error(I(160))}switch(s.tag){case 5:var i=s.stateNode;s.flags&32&&(Ir(i,""),s.flags&=-33);var r=dm(t);Ju(t,r,i);break;case 3:case 4:var o=s.stateNode.containerInfo,a=dm(t);Xu(t,a,o);break;default:throw Error(I(161))}}catch(l){ve(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function GC(t,e,n){F=t,Fv(t)}function Fv(t,e,n){for(var s=(t.mode&1)!==0;F!==null;){var i=F,r=i.child;if(i.tag===22&&s){var o=i.memoizedState!==null||Jo;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Ke;a=Jo;var c=Ke;if(Jo=o,(Ke=l)&&!c)for(F=i;F!==null;)o=F,l=o.child,o.tag===22&&o.memoizedState!==null?mm(i):l!==null?(l.return=o,F=l):mm(i);for(;r!==null;)F=r,Fv(r),r=r.sibling;F=i,Jo=a,Ke=c}fm(t)}else i.subtreeFlags&8772&&r!==null?(r.return=i,F=r):fm(t)}}function fm(t){for(;F!==null;){var e=F;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ke||Dl(5,e);break;case 1:var s=e.stateNode;if(e.flags&4&&!Ke)if(n===null)s.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Mt(e.type,n.memoizedProps);s.componentDidUpdate(i,n.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var r=e.updateQueue;r!==null&&Xp(e,r,s);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Xp(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&Lr(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(I(163))}Ke||e.flags&512&&qu(e)}catch(h){ve(e,e.return,h)}}if(e===t){F=null;break}if(n=e.sibling,n!==null){n.return=e.return,F=n;break}F=e.return}}function pm(t){for(;F!==null;){var e=F;if(e===t){F=null;break}var n=e.sibling;if(n!==null){n.return=e.return,F=n;break}F=e.return}}function mm(t){for(;F!==null;){var e=F;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Dl(4,e)}catch(l){ve(e,n,l)}break;case 1:var s=e.stateNode;if(typeof s.componentDidMount=="function"){var i=e.return;try{s.componentDidMount()}catch(l){ve(e,i,l)}}var r=e.return;try{qu(e)}catch(l){ve(e,r,l)}break;case 5:var o=e.return;try{qu(e)}catch(l){ve(e,o,l)}}}catch(l){ve(e,e.return,l)}if(e===t){F=null;break}var a=e.sibling;if(a!==null){a.return=e.return,F=a;break}F=e.return}}var YC=Math.ceil,Ga=bn.ReactCurrentDispatcher,Ph=bn.ReactCurrentOwner,kt=bn.ReactCurrentBatchConfig,q=0,Le=null,ke=null,Be=0,ft=0,ei=ns(0),Re=0,Gr=null,bs=0,Ml=0,Rh=0,yr=null,rt=null,Ih=0,Ci=1/0,rn=null,Ya=!1,Zu=null,$n=null,Zo=!1,Mn=null,Qa=0,vr=0,ed=null,va=-1,xa=0;function tt(){return q&6?Se():va!==-1?va:va=Se()}function Un(t){return t.mode&1?q&2&&Be!==0?Be&-Be:RC.transition!==null?(xa===0&&(xa=_0()),xa):(t=ee,t!==0||(t=window.event,t=t===void 0?16:T0(t.type)),t):1}function Ut(t,e,n,s){if(50<vr)throw vr=0,ed=null,Error(I(185));go(t,n,s),(!(q&2)||t!==Le)&&(t===Le&&(!(q&2)&&(Ml|=n),Re===4&&An(t,Be)),dt(t,s),n===1&&q===0&&!(e.mode&1)&&(Ci=Se()+500,Rl&&ss()))}function dt(t,e){var n=t.callbackNode;RS(t,e);var s=Ia(t,t===Le?Be:0);if(s===0)n!==null&&Ep(n),t.callbackNode=null,t.callbackPriority=0;else if(e=s&-s,t.callbackPriority!==e){if(n!=null&&Ep(n),e===1)t.tag===0?PC(gm.bind(null,t)):G0(gm.bind(null,t)),NC(function(){!(q&6)&&ss()}),n=null;else{switch(S0(s)){case 1:n=ih;break;case 4:n=x0;break;case 16:n=Ra;break;case 536870912:n=w0;break;default:n=Ra}n=Hv(n,Ov.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Ov(t,e){if(va=-1,xa=0,q&6)throw Error(I(327));var n=t.callbackNode;if(hi()&&t.callbackNode!==n)return null;var s=Ia(t,t===Le?Be:0);if(s===0)return null;if(s&30||s&t.expiredLanes||e)e=qa(t,s);else{e=s;var i=q;q|=2;var r=zv();(Le!==t||Be!==e)&&(rn=null,Ci=Se()+500,vs(t,e));do try{XC();break}catch(a){Vv(t,a)}while(!0);yh(),Ga.current=r,q=i,ke!==null?e=0:(Le=null,Be=0,e=Re)}if(e!==0){if(e===2&&(i=ku(t),i!==0&&(s=i,e=td(t,i))),e===1)throw n=Gr,vs(t,0),An(t,s),dt(t,Se()),n;if(e===6)An(t,s);else{if(i=t.current.alternate,!(s&30)&&!QC(i)&&(e=qa(t,s),e===2&&(r=ku(t),r!==0&&(s=r,e=td(t,r))),e===1))throw n=Gr,vs(t,0),An(t,s),dt(t,Se()),n;switch(t.finishedWork=i,t.finishedLanes=s,e){case 0:case 1:throw Error(I(345));case 2:ls(t,rt,rn);break;case 3:if(An(t,s),(s&130023424)===s&&(e=Ih+500-Se(),10<e)){if(Ia(t,0)!==0)break;if(i=t.suspendedLanes,(i&s)!==s){tt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Mu(ls.bind(null,t,rt,rn),e);break}ls(t,rt,rn);break;case 4:if(An(t,s),(s&4194240)===s)break;for(e=t.eventTimes,i=-1;0<s;){var o=31-$t(s);r=1<<o,o=e[o],o>i&&(i=o),s&=~r}if(s=i,s=Se()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*YC(s/1960))-s,10<s){t.timeoutHandle=Mu(ls.bind(null,t,rt,rn),s);break}ls(t,rt,rn);break;case 5:ls(t,rt,rn);break;default:throw Error(I(329))}}}return dt(t,Se()),t.callbackNode===n?Ov.bind(null,t):null}function td(t,e){var n=yr;return t.current.memoizedState.isDehydrated&&(vs(t,e).flags|=256),t=qa(t,e),t!==2&&(e=rt,rt=n,e!==null&&nd(e)),t}function nd(t){rt===null?rt=t:rt.push.apply(rt,t)}function QC(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var s=0;s<n.length;s++){var i=n[s],r=i.getSnapshot;i=i.value;try{if(!Ht(r(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function An(t,e){for(e&=~Rh,e&=~Ml,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-$t(e),s=1<<n;t[n]=-1,e&=~s}}function gm(t){if(q&6)throw Error(I(327));hi();var e=Ia(t,0);if(!(e&1))return dt(t,Se()),null;var n=qa(t,e);if(t.tag!==0&&n===2){var s=ku(t);s!==0&&(e=s,n=td(t,s))}if(n===1)throw n=Gr,vs(t,0),An(t,e),dt(t,Se()),n;if(n===6)throw Error(I(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ls(t,rt,rn),dt(t,Se()),null}function Ah(t,e){var n=q;q|=1;try{return t(e)}finally{q=n,q===0&&(Ci=Se()+500,Rl&&ss())}}function Ns(t){Mn!==null&&Mn.tag===0&&!(q&6)&&hi();var e=q;q|=1;var n=kt.transition,s=ee;try{if(kt.transition=null,ee=1,t)return t()}finally{ee=s,kt.transition=n,q=e,!(q&6)&&ss()}}function Dh(){ft=ei.current,le(ei)}function vs(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,bC(n)),ke!==null)for(n=ke.return;n!==null;){var s=n;switch(ph(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&Fa();break;case 3:_i(),le(ct),le(Ye),Ch();break;case 5:Sh(s);break;case 4:_i();break;case 13:le(de);break;case 19:le(de);break;case 10:vh(s.type._context);break;case 22:case 23:Dh()}n=n.return}if(Le=t,ke=t=Wn(t.current,null),Be=ft=e,Re=0,Gr=null,Rh=Ml=bs=0,rt=yr=null,fs!==null){for(e=0;e<fs.length;e++)if(n=fs[e],s=n.interleaved,s!==null){n.interleaved=null;var i=s.next,r=n.pending;if(r!==null){var o=r.next;r.next=i,s.next=o}n.pending=s}fs=null}return t}function Vv(t,e){do{var n=ke;try{if(yh(),ma.current=Ka,Ha){for(var s=fe.memoizedState;s!==null;){var i=s.queue;i!==null&&(i.pending=null),s=s.next}Ha=!1}if(Es=0,De=Te=fe=null,mr=!1,Wr=0,Ph.current=null,n===null||n.return===null){Re=1,Gr=e,ke=null;break}e:{var r=t,o=n.return,a=n,l=e;if(e=Be,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,d=a,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var h=d.alternate;h?(d.updateQueue=h.updateQueue,d.memoizedState=h.memoizedState,d.lanes=h.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=sm(o);if(p!==null){p.flags&=-257,im(p,o,a,r,e),p.mode&1&&nm(r,c,e),e=p,l=c;var y=e.updateQueue;if(y===null){var w=new Set;w.add(l),e.updateQueue=w}else y.add(l);break e}else{if(!(e&1)){nm(r,c,e),Mh();break e}l=Error(I(426))}}else if(ue&&a.mode&1){var C=sm(o);if(C!==null){!(C.flags&65536)&&(C.flags|=256),im(C,o,a,r,e),mh(Si(l,a));break e}}r=l=Si(l,a),Re!==4&&(Re=2),yr===null?yr=[r]:yr.push(r),r=o;do{switch(r.tag){case 3:r.flags|=65536,e&=-e,r.lanes|=e;var g=Sv(r,l,e);qp(r,g);break e;case 1:a=l;var m=r.type,x=r.stateNode;if(!(r.flags&128)&&(typeof m.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&($n===null||!$n.has(x)))){r.flags|=65536,e&=-e,r.lanes|=e;var b=Cv(r,a,e);qp(r,b);break e}}r=r.return}while(r!==null)}$v(n)}catch(S){e=S,ke===n&&n!==null&&(ke=n=n.return);continue}break}while(!0)}function zv(){var t=Ga.current;return Ga.current=Ka,t===null?Ka:t}function Mh(){(Re===0||Re===3||Re===2)&&(Re=4),Le===null||!(bs&268435455)&&!(Ml&268435455)||An(Le,Be)}function qa(t,e){var n=q;q|=2;var s=zv();(Le!==t||Be!==e)&&(rn=null,vs(t,e));do try{qC();break}catch(i){Vv(t,i)}while(!0);if(yh(),q=n,Ga.current=s,ke!==null)throw Error(I(261));return Le=null,Be=0,Re}function qC(){for(;ke!==null;)Bv(ke)}function XC(){for(;ke!==null&&!SS();)Bv(ke)}function Bv(t){var e=Wv(t.alternate,t,ft);t.memoizedProps=t.pendingProps,e===null?$v(t):ke=e,Ph.current=null}function $v(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=WC(n,e),n!==null){n.flags&=32767,ke=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Re=6,ke=null;return}}else if(n=UC(n,e,ft),n!==null){ke=n;return}if(e=e.sibling,e!==null){ke=e;return}ke=e=t}while(e!==null);Re===0&&(Re=5)}function ls(t,e,n){var s=ee,i=kt.transition;try{kt.transition=null,ee=1,JC(t,e,n,s)}finally{kt.transition=i,ee=s}return null}function JC(t,e,n,s){do hi();while(Mn!==null);if(q&6)throw Error(I(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(I(177));t.callbackNode=null,t.callbackPriority=0;var r=n.lanes|n.childLanes;if(IS(t,r),t===Le&&(ke=Le=null,Be=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Zo||(Zo=!0,Hv(Ra,function(){return hi(),null})),r=(n.flags&15990)!==0,n.subtreeFlags&15990||r){r=kt.transition,kt.transition=null;var o=ee;ee=1;var a=q;q|=4,Ph.current=null,KC(t,n),Lv(n,t),vC(Au),Aa=!!Iu,Au=Iu=null,t.current=n,GC(n),CS(),q=a,ee=o,kt.transition=r}else t.current=n;if(Zo&&(Zo=!1,Mn=t,Qa=i),r=t.pendingLanes,r===0&&($n=null),NS(n.stateNode),dt(t,Se()),e!==null)for(s=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],s(i.value,{componentStack:i.stack,digest:i.digest});if(Ya)throw Ya=!1,t=Zu,Zu=null,t;return Qa&1&&t.tag!==0&&hi(),r=t.pendingLanes,r&1?t===ed?vr++:(vr=0,ed=t):vr=0,ss(),null}function hi(){if(Mn!==null){var t=S0(Qa),e=kt.transition,n=ee;try{if(kt.transition=null,ee=16>t?16:t,Mn===null)var s=!1;else{if(t=Mn,Mn=null,Qa=0,q&6)throw Error(I(331));var i=q;for(q|=4,F=t.current;F!==null;){var r=F,o=r.child;if(F.flags&16){var a=r.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(F=c;F!==null;){var d=F;switch(d.tag){case 0:case 11:case 15:gr(8,d,r)}var f=d.child;if(f!==null)f.return=d,F=f;else for(;F!==null;){d=F;var h=d.sibling,p=d.return;if(Av(d),d===c){F=null;break}if(h!==null){h.return=p,F=h;break}F=p}}}var y=r.alternate;if(y!==null){var w=y.child;if(w!==null){y.child=null;do{var C=w.sibling;w.sibling=null,w=C}while(w!==null)}}F=r}}if(r.subtreeFlags&2064&&o!==null)o.return=r,F=o;else e:for(;F!==null;){if(r=F,r.flags&2048)switch(r.tag){case 0:case 11:case 15:gr(9,r,r.return)}var g=r.sibling;if(g!==null){g.return=r.return,F=g;break e}F=r.return}}var m=t.current;for(F=m;F!==null;){o=F;var x=o.child;if(o.subtreeFlags&2064&&x!==null)x.return=o,F=x;else e:for(o=m;F!==null;){if(a=F,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Dl(9,a)}}catch(S){ve(a,a.return,S)}if(a===o){F=null;break e}var b=a.sibling;if(b!==null){b.return=a.return,F=b;break e}F=a.return}}if(q=i,ss(),Qt&&typeof Qt.onPostCommitFiberRoot=="function")try{Qt.onPostCommitFiberRoot(Nl,t)}catch{}s=!0}return s}finally{ee=n,kt.transition=e}}return!1}function ym(t,e,n){e=Si(n,e),e=Sv(t,e,1),t=Bn(t,e,1),e=tt(),t!==null&&(go(t,1,e),dt(t,e))}function ve(t,e,n){if(t.tag===3)ym(t,t,n);else for(;e!==null;){if(e.tag===3){ym(e,t,n);break}else if(e.tag===1){var s=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&($n===null||!$n.has(s))){t=Si(n,t),t=Cv(e,t,1),e=Bn(e,t,1),t=tt(),e!==null&&(go(e,1,t),dt(e,t));break}}e=e.return}}function ZC(t,e,n){var s=t.pingCache;s!==null&&s.delete(e),e=tt(),t.pingedLanes|=t.suspendedLanes&n,Le===t&&(Be&n)===n&&(Re===4||Re===3&&(Be&130023424)===Be&&500>Se()-Ih?vs(t,0):Rh|=n),dt(t,e)}function Uv(t,e){e===0&&(t.mode&1?(e=Uo,Uo<<=1,!(Uo&130023424)&&(Uo=4194304)):e=1);var n=tt();t=gn(t,e),t!==null&&(go(t,e,n),dt(t,n))}function eE(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Uv(t,n)}function tE(t,e){var n=0;switch(t.tag){case 13:var s=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:s=t.stateNode;break;default:throw Error(I(314))}s!==null&&s.delete(e),Uv(t,n)}var Wv;Wv=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||ct.current)ot=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return ot=!1,$C(t,e,n);ot=!!(t.flags&131072)}else ot=!1,ue&&e.flags&1048576&&Y0(e,za,e.index);switch(e.lanes=0,e.tag){case 2:var s=e.type;ya(t,e),t=e.pendingProps;var i=vi(e,Ye.current);di(e,n),i=bh(null,e,s,t,i,n);var r=Nh();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,ut(s)?(r=!0,Oa(e)):r=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,wh(e),i.updater=Al,e.stateNode=i,i._reactInternals=e,$u(e,s,t,n),e=Hu(null,e,s,!0,r,n)):(e.tag=0,ue&&r&&fh(e),Xe(null,e,i,n),e=e.child),e;case 16:s=e.elementType;e:{switch(ya(t,e),t=e.pendingProps,i=s._init,s=i(s._payload),e.type=s,i=e.tag=sE(s),t=Mt(s,t),i){case 0:e=Wu(null,e,s,t,n);break e;case 1:e=am(null,e,s,t,n);break e;case 11:e=rm(null,e,s,t,n);break e;case 14:e=om(null,e,s,Mt(s.type,t),n);break e}throw Error(I(306,s,""))}return e;case 0:return s=e.type,i=e.pendingProps,i=e.elementType===s?i:Mt(s,i),Wu(t,e,s,i,n);case 1:return s=e.type,i=e.pendingProps,i=e.elementType===s?i:Mt(s,i),am(t,e,s,i,n);case 3:e:{if(kv(e),t===null)throw Error(I(387));s=e.pendingProps,r=e.memoizedState,i=r.element,ev(t,e),Ua(e,s,null,n);var o=e.memoizedState;if(s=o.element,r.isDehydrated)if(r={element:s,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=r,e.memoizedState=r,e.flags&256){i=Si(Error(I(423)),e),e=lm(t,e,s,n,i);break e}else if(s!==i){i=Si(Error(I(424)),e),e=lm(t,e,s,n,i);break e}else for(pt=zn(e.stateNode.containerInfo.firstChild),mt=e,ue=!0,Vt=null,n=J0(e,null,s,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(xi(),s===i){e=yn(t,e,n);break e}Xe(t,e,s,n)}e=e.child}return e;case 5:return tv(e),t===null&&Vu(e),s=e.type,i=e.pendingProps,r=t!==null?t.memoizedProps:null,o=i.children,Du(s,i)?o=null:r!==null&&Du(s,r)&&(e.flags|=32),Nv(t,e),Xe(t,e,o,n),e.child;case 6:return t===null&&Vu(e),null;case 13:return Tv(t,e,n);case 4:return _h(e,e.stateNode.containerInfo),s=e.pendingProps,t===null?e.child=wi(e,null,s,n):Xe(t,e,s,n),e.child;case 11:return s=e.type,i=e.pendingProps,i=e.elementType===s?i:Mt(s,i),rm(t,e,s,i,n);case 7:return Xe(t,e,e.pendingProps,n),e.child;case 8:return Xe(t,e,e.pendingProps.children,n),e.child;case 12:return Xe(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(s=e.type._context,i=e.pendingProps,r=e.memoizedProps,o=i.value,oe(Ba,s._currentValue),s._currentValue=o,r!==null)if(Ht(r.value,o)){if(r.children===i.children&&!ct.current){e=yn(t,e,n);break e}}else for(r=e.child,r!==null&&(r.return=e);r!==null;){var a=r.dependencies;if(a!==null){o=r.child;for(var l=a.firstContext;l!==null;){if(l.context===s){if(r.tag===1){l=dn(-1,n&-n),l.tag=2;var c=r.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}r.lanes|=n,l=r.alternate,l!==null&&(l.lanes|=n),zu(r.return,n,e),a.lanes|=n;break}l=l.next}}else if(r.tag===10)o=r.type===e.type?null:r.child;else if(r.tag===18){if(o=r.return,o===null)throw Error(I(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),zu(o,n,e),o=r.sibling}else o=r.child;if(o!==null)o.return=r;else for(o=r;o!==null;){if(o===e){o=null;break}if(r=o.sibling,r!==null){r.return=o.return,o=r;break}o=o.return}r=o}Xe(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,s=e.pendingProps.children,di(e,n),i=jt(i),s=s(i),e.flags|=1,Xe(t,e,s,n),e.child;case 14:return s=e.type,i=Mt(s,e.pendingProps),i=Mt(s.type,i),om(t,e,s,i,n);case 15:return Ev(t,e,e.type,e.pendingProps,n);case 17:return s=e.type,i=e.pendingProps,i=e.elementType===s?i:Mt(s,i),ya(t,e),e.tag=1,ut(s)?(t=!0,Oa(e)):t=!1,di(e,n),_v(e,s,i),$u(e,s,i,n),Hu(null,e,s,!0,t,n);case 19:return jv(t,e,n);case 22:return bv(t,e,n)}throw Error(I(156,e.tag))};function Hv(t,e){return v0(t,e)}function nE(t,e,n,s){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function bt(t,e,n,s){return new nE(t,e,n,s)}function Lh(t){return t=t.prototype,!(!t||!t.isReactComponent)}function sE(t){if(typeof t=="function")return Lh(t)?1:0;if(t!=null){if(t=t.$$typeof,t===th)return 11;if(t===nh)return 14}return 2}function Wn(t,e){var n=t.alternate;return n===null?(n=bt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function wa(t,e,n,s,i,r){var o=2;if(s=t,typeof t=="function")Lh(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Ws:return xs(n.children,i,r,e);case eh:o=8,i|=8;break;case hu:return t=bt(12,n,e,i|2),t.elementType=hu,t.lanes=r,t;case fu:return t=bt(13,n,e,i),t.elementType=fu,t.lanes=r,t;case pu:return t=bt(19,n,e,i),t.elementType=pu,t.lanes=r,t;case t0:return Ll(n,i,r,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Zy:o=10;break e;case e0:o=9;break e;case th:o=11;break e;case nh:o=14;break e;case Pn:o=16,s=null;break e}throw Error(I(130,t==null?t:typeof t,""))}return e=bt(o,n,e,i),e.elementType=t,e.type=s,e.lanes=r,e}function xs(t,e,n,s){return t=bt(7,t,s,e),t.lanes=n,t}function Ll(t,e,n,s){return t=bt(22,t,s,e),t.elementType=t0,t.lanes=n,t.stateNode={isHidden:!1},t}function Mc(t,e,n){return t=bt(6,t,null,e),t.lanes=n,t}function Lc(t,e,n){return e=bt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function iE(t,e,n,s,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gc(0),this.expirationTimes=gc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gc(0),this.identifierPrefix=s,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Fh(t,e,n,s,i,r,o,a,l){return t=new iE(t,e,n,a,l),e===1?(e=1,r===!0&&(e|=8)):e=0,r=bt(3,null,null,e),t.current=r,r.stateNode=t,r.memoizedState={element:s,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},wh(r),t}function rE(t,e,n){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Us,key:s==null?null:""+s,children:t,containerInfo:e,implementation:n}}function Kv(t){if(!t)return qn;t=t._reactInternals;e:{if(As(t)!==t||t.tag!==1)throw Error(I(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(ut(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(I(171))}if(t.tag===1){var n=t.type;if(ut(n))return K0(t,n,e)}return e}function Gv(t,e,n,s,i,r,o,a,l){return t=Fh(n,s,!0,t,i,r,o,a,l),t.context=Kv(null),n=t.current,s=tt(),i=Un(n),r=dn(s,i),r.callback=e??null,Bn(n,r,i),t.current.lanes=i,go(t,i,s),dt(t,s),t}function Fl(t,e,n,s){var i=e.current,r=tt(),o=Un(i);return n=Kv(n),e.context===null?e.context=n:e.pendingContext=n,e=dn(r,o),e.payload={element:t},s=s===void 0?null:s,s!==null&&(e.callback=s),t=Bn(i,e,o),t!==null&&(Ut(t,i,o,r),pa(t,i,o)),o}function Xa(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function vm(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Oh(t,e){vm(t,e),(t=t.alternate)&&vm(t,e)}function oE(){return null}var Yv=typeof reportError=="function"?reportError:function(t){console.error(t)};function Vh(t){this._internalRoot=t}Ol.prototype.render=Vh.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(I(409));Fl(t,e,null,null)};Ol.prototype.unmount=Vh.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ns(function(){Fl(null,t,null,null)}),e[mn]=null}};function Ol(t){this._internalRoot=t}Ol.prototype.unstable_scheduleHydration=function(t){if(t){var e=b0();t={blockedOn:null,target:t,priority:e};for(var n=0;n<In.length&&e!==0&&e<In[n].priority;n++);In.splice(n,0,t),n===0&&k0(t)}};function zh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Vl(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function xm(){}function aE(t,e,n,s,i){if(i){if(typeof s=="function"){var r=s;s=function(){var c=Xa(o);r.call(c)}}var o=Gv(e,s,t,0,null,!1,!1,"",xm);return t._reactRootContainer=o,t[mn]=o.current,Vr(t.nodeType===8?t.parentNode:t),Ns(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof s=="function"){var a=s;s=function(){var c=Xa(l);a.call(c)}}var l=Fh(t,0,!1,null,null,!1,!1,"",xm);return t._reactRootContainer=l,t[mn]=l.current,Vr(t.nodeType===8?t.parentNode:t),Ns(function(){Fl(e,l,n,s)}),l}function zl(t,e,n,s,i){var r=n._reactRootContainer;if(r){var o=r;if(typeof i=="function"){var a=i;i=function(){var l=Xa(o);a.call(l)}}Fl(e,o,t,i)}else o=aE(n,e,t,i,s);return Xa(o)}C0=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=or(e.pendingLanes);n!==0&&(rh(e,n|1),dt(e,Se()),!(q&6)&&(Ci=Se()+500,ss()))}break;case 13:Ns(function(){var s=gn(t,1);if(s!==null){var i=tt();Ut(s,t,1,i)}}),Oh(t,1)}};oh=function(t){if(t.tag===13){var e=gn(t,134217728);if(e!==null){var n=tt();Ut(e,t,134217728,n)}Oh(t,134217728)}};E0=function(t){if(t.tag===13){var e=Un(t),n=gn(t,e);if(n!==null){var s=tt();Ut(n,t,e,s)}Oh(t,e)}};b0=function(){return ee};N0=function(t,e){var n=ee;try{return ee=t,e()}finally{ee=n}};Eu=function(t,e,n){switch(e){case"input":if(yu(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var s=n[e];if(s!==t&&s.form===t.form){var i=Pl(s);if(!i)throw Error(I(90));s0(s),yu(s,i)}}}break;case"textarea":r0(t,n);break;case"select":e=n.value,e!=null&&ai(t,!!n.multiple,e,!1)}};h0=Ah;f0=Ns;var lE={usingClientEntryPoint:!1,Events:[vo,Ys,Pl,u0,d0,Ah]},Xi={findFiberByHostInstance:hs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},cE={bundleType:Xi.bundleType,version:Xi.version,rendererPackageName:Xi.rendererPackageName,rendererConfig:Xi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:bn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=g0(t),t===null?null:t.stateNode},findFiberByHostInstance:Xi.findFiberByHostInstance||oE,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ea=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ea.isDisabled&&ea.supportsFiber)try{Nl=ea.inject(cE),Qt=ea}catch{}}yt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=lE;yt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!zh(e))throw Error(I(200));return rE(t,e,null,n)};yt.createRoot=function(t,e){if(!zh(t))throw Error(I(299));var n=!1,s="",i=Yv;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(s=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Fh(t,1,!1,null,null,n,!1,s,i),t[mn]=e.current,Vr(t.nodeType===8?t.parentNode:t),new Vh(e)};yt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(I(188)):(t=Object.keys(t).join(","),Error(I(268,t)));return t=g0(e),t=t===null?null:t.stateNode,t};yt.flushSync=function(t){return Ns(t)};yt.hydrate=function(t,e,n){if(!Vl(e))throw Error(I(200));return zl(null,t,e,!0,n)};yt.hydrateRoot=function(t,e,n){if(!zh(t))throw Error(I(405));var s=n!=null&&n.hydratedSources||null,i=!1,r="",o=Yv;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(r=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Gv(e,null,t,1,n??null,i,!1,r,o),t[mn]=e.current,Vr(t),s)for(t=0;t<s.length;t++)n=s[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Ol(e)};yt.render=function(t,e,n){if(!Vl(e))throw Error(I(200));return zl(null,t,e,!1,n)};yt.unmountComponentAtNode=function(t){if(!Vl(t))throw Error(I(40));return t._reactRootContainer?(Ns(function(){zl(null,null,t,!1,function(){t._reactRootContainer=null,t[mn]=null})}),!0):!1};yt.unstable_batchedUpdates=Ah;yt.unstable_renderSubtreeIntoContainer=function(t,e,n,s){if(!Vl(n))throw Error(I(200));if(t==null||t._reactInternals===void 0)throw Error(I(38));return zl(t,e,n,!1,s)};yt.version="18.3.1-next-f1338f8080-20240426";function Qv(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Qv)}catch(t){console.error(t)}}Qv(),Qy.exports=yt;var uE=Qy.exports,qv,wm=uE;qv=wm.createRoot,wm.hydrateRoot;/**
 * react-router v7.8.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var _m="popstate";function dE(t={}){function e(s,i){let{pathname:r,search:o,hash:a}=s.location;return sd("",{pathname:r,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(s,i){return typeof i=="string"?i:Yr(i)}return fE(e,n,null,t)}function pe(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function en(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function hE(){return Math.random().toString(36).substring(2,10)}function Sm(t,e){return{usr:t.state,key:t.key,idx:e}}function sd(t,e,n=null,s){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Di(e):e,state:n,key:e&&e.key||s||hE()}}function Yr({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Di(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let s=t.indexOf("?");s>=0&&(e.search=t.substring(s),t=t.substring(0,s)),t&&(e.pathname=t)}return e}function fE(t,e,n,s={}){let{window:i=document.defaultView,v5Compat:r=!1}=s,o=i.history,a="POP",l=null,c=d();c==null&&(c=0,o.replaceState({...o.state,idx:c},""));function d(){return(o.state||{idx:null}).idx}function f(){a="POP";let C=d(),g=C==null?null:C-c;c=C,l&&l({action:a,location:w.location,delta:g})}function h(C,g){a="PUSH";let m=sd(w.location,C,g);c=d()+1;let x=Sm(m,c),b=w.createHref(m);try{o.pushState(x,"",b)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;i.location.assign(b)}r&&l&&l({action:a,location:w.location,delta:1})}function p(C,g){a="REPLACE";let m=sd(w.location,C,g);c=d();let x=Sm(m,c),b=w.createHref(m);o.replaceState(x,"",b),r&&l&&l({action:a,location:w.location,delta:0})}function y(C){return pE(C)}let w={get action(){return a},get location(){return t(i,o)},listen(C){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(_m,f),l=C,()=>{i.removeEventListener(_m,f),l=null}},createHref(C){return e(i,C)},createURL:y,encodeLocation(C){let g=y(C);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:h,replace:p,go(C){return o.go(C)}};return w}function pE(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),pe(n,"No window.location.(origin|href) available to create URL");let s=typeof t=="string"?t:Yr(t);return s=s.replace(/ $/,"%20"),!e&&s.startsWith("//")&&(s=n+s),new URL(s,n)}function Xv(t,e,n="/"){return mE(t,e,n,!1)}function mE(t,e,n,s){let i=typeof e=="string"?Di(e):e,r=vn(i.pathname||"/",n);if(r==null)return null;let o=Jv(t);gE(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=kE(r);a=bE(o[l],c,s)}return a}function Jv(t,e=[],n=[],s="",i=!1){let r=(o,a,l=i,c)=>{let d={relativePath:c===void 0?o.path||"":c,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};if(d.relativePath.startsWith("/")){if(!d.relativePath.startsWith(s)&&l)return;pe(d.relativePath.startsWith(s),`Absolute route path "${d.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),d.relativePath=d.relativePath.slice(s.length)}let f=hn([s,d.relativePath]),h=n.concat(d);o.children&&o.children.length>0&&(pe(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${f}".`),Jv(o.children,e,h,f,l)),!(o.path==null&&!o.index)&&e.push({path:f,score:CE(f,o.index),routesMeta:h})};return t.forEach((o,a)=>{var l;if(o.path===""||!((l=o.path)!=null&&l.includes("?")))r(o,a);else for(let c of Zv(o.path))r(o,a,!0,c)}),e}function Zv(t){let e=t.split("/");if(e.length===0)return[];let[n,...s]=e,i=n.endsWith("?"),r=n.replace(/\?$/,"");if(s.length===0)return i?[r,""]:[r];let o=Zv(s.join("/")),a=[];return a.push(...o.map(l=>l===""?r:[r,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function gE(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:EE(e.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}var yE=/^:[\w-]+$/,vE=3,xE=2,wE=1,_E=10,SE=-2,Cm=t=>t==="*";function CE(t,e){let n=t.split("/"),s=n.length;return n.some(Cm)&&(s+=SE),e&&(s+=xE),n.filter(i=>!Cm(i)).reduce((i,r)=>i+(yE.test(r)?vE:r===""?wE:_E),s)}function EE(t,e){return t.length===e.length&&t.slice(0,-1).every((s,i)=>s===e[i])?t[t.length-1]-e[e.length-1]:0}function bE(t,e,n=!1){let{routesMeta:s}=t,i={},r="/",o=[];for(let a=0;a<s.length;++a){let l=s[a],c=a===s.length-1,d=r==="/"?e:e.slice(r.length)||"/",f=Ja({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},d),h=l.route;if(!f&&c&&n&&!s[s.length-1].route.index&&(f=Ja({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},d)),!f)return null;Object.assign(i,f.params),o.push({params:i,pathname:hn([r,f.pathname]),pathnameBase:RE(hn([r,f.pathnameBase])),route:h}),f.pathnameBase!=="/"&&(r=hn([r,f.pathnameBase]))}return o}function Ja(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,s]=NE(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let r=i[0],o=r.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:s.reduce((c,{paramName:d,isOptional:f},h)=>{if(d==="*"){let y=a[h]||"";o=r.slice(0,r.length-y.length).replace(/(.)\/+$/,"$1")}const p=a[h];return f&&!p?c[d]=void 0:c[d]=(p||"").replace(/%2F/g,"/"),c},{}),pathname:r,pathnameBase:o,pattern:t}}function NE(t,e=!1,n=!0){en(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let s=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(s.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(s.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),s]}function kE(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return en(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function vn(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,s=t.charAt(n);return s&&s!=="/"?null:t.slice(n)||"/"}function TE(t,e="/"){let{pathname:n,search:s="",hash:i=""}=typeof t=="string"?Di(t):t;return{pathname:n?n.startsWith("/")?n:jE(n,e):e,search:IE(s),hash:AE(i)}}function jE(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Fc(t,e,n,s){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function PE(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function ex(t){let e=PE(t);return e.map((n,s)=>s===e.length-1?n.pathname:n.pathnameBase)}function tx(t,e,n,s=!1){let i;typeof t=="string"?i=Di(t):(i={...t},pe(!i.pathname||!i.pathname.includes("?"),Fc("?","pathname","search",i)),pe(!i.pathname||!i.pathname.includes("#"),Fc("#","pathname","hash",i)),pe(!i.search||!i.search.includes("#"),Fc("#","search","hash",i)));let r=t===""||i.pathname==="",o=r?"/":i.pathname,a;if(o==null)a=n;else{let f=e.length-1;if(!s&&o.startsWith("..")){let h=o.split("/");for(;h[0]==="..";)h.shift(),f-=1;i.pathname=h.join("/")}a=f>=0?e[f]:"/"}let l=TE(i,a),c=o&&o!=="/"&&o.endsWith("/"),d=(r||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||d)&&(l.pathname+="/"),l}var hn=t=>t.join("/").replace(/\/\/+/g,"/"),RE=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),IE=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,AE=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function DE(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var nx=["POST","PUT","PATCH","DELETE"];new Set(nx);var ME=["GET",...nx];new Set(ME);var Mi=v.createContext(null);Mi.displayName="DataRouter";var Bl=v.createContext(null);Bl.displayName="DataRouterState";v.createContext(!1);var sx=v.createContext({isTransitioning:!1});sx.displayName="ViewTransition";var LE=v.createContext(new Map);LE.displayName="Fetchers";var FE=v.createContext(null);FE.displayName="Await";var tn=v.createContext(null);tn.displayName="Navigation";var wo=v.createContext(null);wo.displayName="Location";var nn=v.createContext({outlet:null,matches:[],isDataRoute:!1});nn.displayName="Route";var Bh=v.createContext(null);Bh.displayName="RouteError";function OE(t,{relative:e}={}){pe(_o(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:s}=v.useContext(tn),{hash:i,pathname:r,search:o}=So(t,{relative:e}),a=r;return n!=="/"&&(a=r==="/"?n:hn([n,r])),s.createHref({pathname:a,search:o,hash:i})}function _o(){return v.useContext(wo)!=null}function xt(){return pe(_o(),"useLocation() may be used only in the context of a <Router> component."),v.useContext(wo).location}var ix="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function rx(t){v.useContext(tn).static||v.useLayoutEffect(t)}function be(){let{isDataRoute:t}=v.useContext(nn);return t?JE():VE()}function VE(){pe(_o(),"useNavigate() may be used only in the context of a <Router> component.");let t=v.useContext(Mi),{basename:e,navigator:n}=v.useContext(tn),{matches:s}=v.useContext(nn),{pathname:i}=xt(),r=JSON.stringify(ex(s)),o=v.useRef(!1);return rx(()=>{o.current=!0}),v.useCallback((l,c={})=>{if(en(o.current,ix),!o.current)return;if(typeof l=="number"){n.go(l);return}let d=tx(l,JSON.parse(r),i,c.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:hn([e,d.pathname])),(c.replace?n.replace:n.push)(d,c.state,c)},[e,n,r,i,t])}v.createContext(null);function zE(){let{matches:t}=v.useContext(nn),e=t[t.length-1];return e?e.params:{}}function So(t,{relative:e}={}){let{matches:n}=v.useContext(nn),{pathname:s}=xt(),i=JSON.stringify(ex(n));return v.useMemo(()=>tx(t,JSON.parse(i),s,e==="path"),[t,i,s,e])}function BE(t,e){return ox(t,e)}function ox(t,e,n,s,i){var m;pe(_o(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:r}=v.useContext(tn),{matches:o}=v.useContext(nn),a=o[o.length-1],l=a?a.params:{},c=a?a.pathname:"/",d=a?a.pathnameBase:"/",f=a&&a.route;{let x=f&&f.path||"";ax(c,!f||x.endsWith("*")||x.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${x}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${x}"> to <Route path="${x==="/"?"*":`${x}/*`}">.`)}let h=xt(),p;if(e){let x=typeof e=="string"?Di(e):e;pe(d==="/"||((m=x.pathname)==null?void 0:m.startsWith(d)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${d}" but pathname "${x.pathname}" was given in the \`location\` prop.`),p=x}else p=h;let y=p.pathname||"/",w=y;if(d!=="/"){let x=d.replace(/^\//,"").split("/");w="/"+y.replace(/^\//,"").split("/").slice(x.length).join("/")}let C=Xv(t,{pathname:w});en(f||C!=null,`No routes matched location "${p.pathname}${p.search}${p.hash}" `),en(C==null||C[C.length-1].route.element!==void 0||C[C.length-1].route.Component!==void 0||C[C.length-1].route.lazy!==void 0,`Matched leaf route at location "${p.pathname}${p.search}${p.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let g=KE(C&&C.map(x=>Object.assign({},x,{params:Object.assign({},l,x.params),pathname:hn([d,r.encodeLocation?r.encodeLocation(x.pathname).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?d:hn([d,r.encodeLocation?r.encodeLocation(x.pathnameBase).pathname:x.pathnameBase])})),o,n,s,i);return e&&g?v.createElement(wo.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...p},navigationType:"POP"}},g):g}function $E(){let t=XE(),e=DE(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:s},r={padding:"2px 4px",backgroundColor:s},o=null;return console.error("Error handled by React Router default ErrorBoundary:",t),o=v.createElement(v.Fragment,null,v.createElement("p",null," Hey developer "),v.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",v.createElement("code",{style:r},"ErrorBoundary")," or"," ",v.createElement("code",{style:r},"errorElement")," prop on your route.")),v.createElement(v.Fragment,null,v.createElement("h2",null,"Unexpected Application Error!"),v.createElement("h3",{style:{fontStyle:"italic"}},e),n?v.createElement("pre",{style:i},n):null,o)}var UE=v.createElement($E,null),WE=class extends v.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.unstable_onError?this.props.unstable_onError(t,e):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?v.createElement(nn.Provider,{value:this.props.routeContext},v.createElement(Bh.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function HE({routeContext:t,match:e,children:n}){let s=v.useContext(Mi);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),v.createElement(nn.Provider,{value:t},n)}function KE(t,e=[],n=null,s=null,i=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let r=t,o=n==null?void 0:n.errors;if(o!=null){let c=r.findIndex(d=>d.route.id&&(o==null?void 0:o[d.route.id])!==void 0);pe(c>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),r=r.slice(0,Math.min(r.length,c+1))}let a=!1,l=-1;if(n)for(let c=0;c<r.length;c++){let d=r[c];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(l=c),d.route.id){let{loaderData:f,errors:h}=n,p=d.route.loader&&!f.hasOwnProperty(d.route.id)&&(!h||h[d.route.id]===void 0);if(d.route.lazy||p){a=!0,l>=0?r=r.slice(0,l+1):r=[r[0]];break}}}return r.reduceRight((c,d,f)=>{let h,p=!1,y=null,w=null;n&&(h=o&&d.route.id?o[d.route.id]:void 0,y=d.route.errorElement||UE,a&&(l<0&&f===0?(ax("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),p=!0,w=null):l===f&&(p=!0,w=d.route.hydrateFallbackElement||null)));let C=e.concat(r.slice(0,f+1)),g=()=>{let m;return h?m=y:p?m=w:d.route.Component?m=v.createElement(d.route.Component,null):d.route.element?m=d.route.element:m=c,v.createElement(HE,{match:d,routeContext:{outlet:c,matches:C,isDataRoute:n!=null},children:m})};return n&&(d.route.ErrorBoundary||d.route.errorElement||f===0)?v.createElement(WE,{location:n.location,revalidation:n.revalidation,component:y,error:h,children:g(),routeContext:{outlet:null,matches:C,isDataRoute:!0},unstable_onError:s}):g()},null)}function $h(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function GE(t){let e=v.useContext(Mi);return pe(e,$h(t)),e}function YE(t){let e=v.useContext(Bl);return pe(e,$h(t)),e}function QE(t){let e=v.useContext(nn);return pe(e,$h(t)),e}function Uh(t){let e=QE(t),n=e.matches[e.matches.length-1];return pe(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function qE(){return Uh("useRouteId")}function XE(){var s;let t=v.useContext(Bh),e=YE("useRouteError"),n=Uh("useRouteError");return t!==void 0?t:(s=e.errors)==null?void 0:s[n]}function JE(){let{router:t}=GE("useNavigate"),e=Uh("useNavigate"),n=v.useRef(!1);return rx(()=>{n.current=!0}),v.useCallback(async(i,r={})=>{en(n.current,ix),n.current&&(typeof i=="number"?t.navigate(i):await t.navigate(i,{fromRouteId:e,...r}))},[t,e])}var Em={};function ax(t,e,n){!e&&!Em[t]&&(Em[t]=!0,en(!1,n))}v.memo(ZE);function ZE({routes:t,future:e,state:n,unstable_onError:s}){return ox(t,void 0,n,s,e)}function Ie(t){pe(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function eb({basename:t="/",children:e=null,location:n,navigationType:s="POP",navigator:i,static:r=!1}){pe(!_o(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=t.replace(/^\/*/,"/"),a=v.useMemo(()=>({basename:o,navigator:i,static:r,future:{}}),[o,i,r]);typeof n=="string"&&(n=Di(n));let{pathname:l="/",search:c="",hash:d="",state:f=null,key:h="default"}=n,p=v.useMemo(()=>{let y=vn(l,o);return y==null?null:{location:{pathname:y,search:c,hash:d,state:f,key:h},navigationType:s}},[o,l,c,d,f,h,s]);return en(p!=null,`<Router basename="${o}"> is not able to match the URL "${l}${c}${d}" because it does not start with the basename, so the <Router> won't render anything.`),p==null?null:v.createElement(tn.Provider,{value:a},v.createElement(wo.Provider,{children:e,value:p}))}function tb({children:t,location:e}){return BE(id(t),e)}function id(t,e=[]){let n=[];return v.Children.forEach(t,(s,i)=>{if(!v.isValidElement(s))return;let r=[...e,i];if(s.type===v.Fragment){n.push.apply(n,id(s.props.children,r));return}pe(s.type===Ie,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),pe(!s.props.index||!s.props.children,"An index route cannot have child routes.");let o={id:s.props.id||r.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(o.children=id(s.props.children,r)),n.push(o)}),n}var _a="get",Sa="application/x-www-form-urlencoded";function $l(t){return t!=null&&typeof t.tagName=="string"}function nb(t){return $l(t)&&t.tagName.toLowerCase()==="button"}function sb(t){return $l(t)&&t.tagName.toLowerCase()==="form"}function ib(t){return $l(t)&&t.tagName.toLowerCase()==="input"}function rb(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function ob(t,e){return t.button===0&&(!e||e==="_self")&&!rb(t)}var ta=null;function ab(){if(ta===null)try{new FormData(document.createElement("form"),0),ta=!1}catch{ta=!0}return ta}var lb=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Oc(t){return t!=null&&!lb.has(t)?(en(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Sa}"`),null):t}function cb(t,e){let n,s,i,r,o;if(sb(t)){let a=t.getAttribute("action");s=a?vn(a,e):null,n=t.getAttribute("method")||_a,i=Oc(t.getAttribute("enctype"))||Sa,r=new FormData(t)}else if(nb(t)||ib(t)&&(t.type==="submit"||t.type==="image")){let a=t.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=t.getAttribute("formaction")||a.getAttribute("action");if(s=l?vn(l,e):null,n=t.getAttribute("formmethod")||a.getAttribute("method")||_a,i=Oc(t.getAttribute("formenctype"))||Oc(a.getAttribute("enctype"))||Sa,r=new FormData(a,t),!ab()){let{name:c,type:d,value:f}=t;if(d==="image"){let h=c?`${c}.`:"";r.append(`${h}x`,"0"),r.append(`${h}y`,"0")}else c&&r.append(c,f)}}else{if($l(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=_a,s=null,i=Sa,o=t}return r&&i==="text/plain"&&(o=r,r=void 0),{action:s,method:n.toLowerCase(),encType:i,formData:r,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Wh(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function ub(t,e,n){let s=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return s.pathname==="/"?s.pathname=`_root.${n}`:e&&vn(s.pathname,e)==="/"?s.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${n}`,s}async function db(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function hb(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function fb(t,e,n){let s=await Promise.all(t.map(async i=>{let r=e.routes[i.route.id];if(r){let o=await db(r,n);return o.links?o.links():[]}return[]}));return yb(s.flat(1).filter(hb).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function bm(t,e,n,s,i,r){let o=(l,c)=>n[c]?l.route.id!==n[c].route.id:!0,a=(l,c)=>{var d;return n[c].pathname!==l.pathname||((d=n[c].route.path)==null?void 0:d.endsWith("*"))&&n[c].params["*"]!==l.params["*"]};return r==="assets"?e.filter((l,c)=>o(l,c)||a(l,c)):r==="data"?e.filter((l,c)=>{var f;let d=s.routes[l.route.id];if(!d||!d.hasLoader)return!1;if(o(l,c)||a(l,c))return!0;if(l.route.shouldRevalidate){let h=l.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((f=n[0])==null?void 0:f.params)||{},nextUrl:new URL(t,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof h=="boolean")return h}return!0}):[]}function pb(t,e,{includeHydrateFallback:n}={}){return mb(t.map(s=>{let i=e.routes[s.route.id];if(!i)return[];let r=[i.module];return i.clientActionModule&&(r=r.concat(i.clientActionModule)),i.clientLoaderModule&&(r=r.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(r=r.concat(i.hydrateFallbackModule)),i.imports&&(r=r.concat(i.imports)),r}).flat(1))}function mb(t){return[...new Set(t)]}function gb(t){let e={},n=Object.keys(t).sort();for(let s of n)e[s]=t[s];return e}function yb(t,e){let n=new Set;return new Set(e),t.reduce((s,i)=>{let r=JSON.stringify(gb(i));return n.has(r)||(n.add(r),s.push({key:r,link:i})),s},[])}function lx(){let t=v.useContext(Mi);return Wh(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function vb(){let t=v.useContext(Bl);return Wh(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var Hh=v.createContext(void 0);Hh.displayName="FrameworkContext";function cx(){let t=v.useContext(Hh);return Wh(t,"You must render this element inside a <HydratedRouter> element"),t}function xb(t,e){let n=v.useContext(Hh),[s,i]=v.useState(!1),[r,o]=v.useState(!1),{onFocus:a,onBlur:l,onMouseEnter:c,onMouseLeave:d,onTouchStart:f}=e,h=v.useRef(null);v.useEffect(()=>{if(t==="render"&&o(!0),t==="viewport"){let w=g=>{g.forEach(m=>{o(m.isIntersecting)})},C=new IntersectionObserver(w,{threshold:.5});return h.current&&C.observe(h.current),()=>{C.disconnect()}}},[t]),v.useEffect(()=>{if(s){let w=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(w)}}},[s]);let p=()=>{i(!0)},y=()=>{i(!1),o(!1)};return n?t!=="intent"?[r,h,{}]:[r,h,{onFocus:Ji(a,p),onBlur:Ji(l,y),onMouseEnter:Ji(c,p),onMouseLeave:Ji(d,y),onTouchStart:Ji(f,p)}]:[!1,h,{}]}function Ji(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function wb({page:t,...e}){let{router:n}=lx(),s=v.useMemo(()=>Xv(n.routes,t,n.basename),[n.routes,t,n.basename]);return s?v.createElement(Sb,{page:t,matches:s,...e}):null}function _b(t){let{manifest:e,routeModules:n}=cx(),[s,i]=v.useState([]);return v.useEffect(()=>{let r=!1;return fb(t,e,n).then(o=>{r||i(o)}),()=>{r=!0}},[t,e,n]),s}function Sb({page:t,matches:e,...n}){let s=xt(),{manifest:i,routeModules:r}=cx(),{basename:o}=lx(),{loaderData:a,matches:l}=vb(),c=v.useMemo(()=>bm(t,e,l,i,s,"data"),[t,e,l,i,s]),d=v.useMemo(()=>bm(t,e,l,i,s,"assets"),[t,e,l,i,s]),f=v.useMemo(()=>{if(t===s.pathname+s.search+s.hash)return[];let y=new Set,w=!1;if(e.forEach(g=>{var x;let m=i.routes[g.route.id];!m||!m.hasLoader||(!c.some(b=>b.route.id===g.route.id)&&g.route.id in a&&((x=r[g.route.id])!=null&&x.shouldRevalidate)||m.hasClientLoader?w=!0:y.add(g.route.id))}),y.size===0)return[];let C=ub(t,o,"data");return w&&y.size>0&&C.searchParams.set("_routes",e.filter(g=>y.has(g.route.id)).map(g=>g.route.id).join(",")),[C.pathname+C.search]},[o,a,s,i,c,e,t,r]),h=v.useMemo(()=>pb(d,i),[d,i]),p=_b(d);return v.createElement(v.Fragment,null,f.map(y=>v.createElement("link",{key:y,rel:"prefetch",as:"fetch",href:y,...n})),h.map(y=>v.createElement("link",{key:y,rel:"modulepreload",href:y,...n})),p.map(({key:y,link:w})=>v.createElement("link",{key:y,nonce:n.nonce,...w})))}function Cb(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var ux=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{ux&&(window.__reactRouterVersion="7.8.2")}catch{}function Eb({basename:t,children:e,window:n}){let s=v.useRef();s.current==null&&(s.current=dE({window:n,v5Compat:!0}));let i=s.current,[r,o]=v.useState({action:i.action,location:i.location}),a=v.useCallback(l=>{v.startTransition(()=>o(l))},[o]);return v.useLayoutEffect(()=>i.listen(a),[i,a]),v.createElement(eb,{basename:t,children:e,location:r.location,navigationType:r.action,navigator:i})}var dx=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,hx=v.forwardRef(function({onClick:e,discover:n="render",prefetch:s="none",relative:i,reloadDocument:r,replace:o,state:a,target:l,to:c,preventScrollReset:d,viewTransition:f,...h},p){let{basename:y}=v.useContext(tn),w=typeof c=="string"&&dx.test(c),C,g=!1;if(typeof c=="string"&&w&&(C=c,ux))try{let k=new URL(window.location.href),N=c.startsWith("//")?new URL(k.protocol+c):new URL(c),P=vn(N.pathname,y);N.origin===k.origin&&P!=null?c=P+N.search+N.hash:g=!0}catch{en(!1,`<Link to="${c}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let m=OE(c,{relative:i}),[x,b,S]=xb(s,h),T=Tb(c,{replace:o,state:a,target:l,preventScrollReset:d,relative:i,viewTransition:f});function E(k){e&&e(k),k.defaultPrevented||T(k)}let _=v.createElement("a",{...h,...S,href:C||m,onClick:g||r?e:E,ref:Cb(p,b),target:l,"data-discover":!w&&n==="render"?"true":void 0});return x&&!w?v.createElement(v.Fragment,null,_,v.createElement(wb,{page:m})):_});hx.displayName="Link";var bb=v.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:s="",end:i=!1,style:r,to:o,viewTransition:a,children:l,...c},d){let f=So(o,{relative:c.relative}),h=xt(),p=v.useContext(Bl),{navigator:y,basename:w}=v.useContext(tn),C=p!=null&&Ab(f)&&a===!0,g=y.encodeLocation?y.encodeLocation(f).pathname:f.pathname,m=h.pathname,x=p&&p.navigation&&p.navigation.location?p.navigation.location.pathname:null;n||(m=m.toLowerCase(),x=x?x.toLowerCase():null,g=g.toLowerCase()),x&&w&&(x=vn(x,w)||x);const b=g!=="/"&&g.endsWith("/")?g.length-1:g.length;let S=m===g||!i&&m.startsWith(g)&&m.charAt(b)==="/",T=x!=null&&(x===g||!i&&x.startsWith(g)&&x.charAt(g.length)==="/"),E={isActive:S,isPending:T,isTransitioning:C},_=S?e:void 0,k;typeof s=="function"?k=s(E):k=[s,S?"active":null,T?"pending":null,C?"transitioning":null].filter(Boolean).join(" ");let N=typeof r=="function"?r(E):r;return v.createElement(hx,{...c,"aria-current":_,className:k,ref:d,style:N,to:o,viewTransition:a},typeof l=="function"?l(E):l)});bb.displayName="NavLink";var Nb=v.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:s,replace:i,state:r,method:o=_a,action:a,onSubmit:l,relative:c,preventScrollReset:d,viewTransition:f,...h},p)=>{let y=Rb(),w=Ib(a,{relative:c}),C=o.toLowerCase()==="get"?"get":"post",g=typeof a=="string"&&dx.test(a),m=x=>{if(l&&l(x),x.defaultPrevented)return;x.preventDefault();let b=x.nativeEvent.submitter,S=(b==null?void 0:b.getAttribute("formmethod"))||o;y(b||x.currentTarget,{fetcherKey:e,method:S,navigate:n,replace:i,state:r,relative:c,preventScrollReset:d,viewTransition:f})};return v.createElement("form",{ref:p,method:C,action:w,onSubmit:s?l:m,...h,"data-discover":!g&&t==="render"?"true":void 0})});Nb.displayName="Form";function kb(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function fx(t){let e=v.useContext(Mi);return pe(e,kb(t)),e}function Tb(t,{target:e,replace:n,state:s,preventScrollReset:i,relative:r,viewTransition:o}={}){let a=be(),l=xt(),c=So(t,{relative:r});return v.useCallback(d=>{if(ob(d,e)){d.preventDefault();let f=n!==void 0?n:Yr(l)===Yr(c);a(t,{replace:f,state:s,preventScrollReset:i,relative:r,viewTransition:o})}},[l,a,c,n,s,e,t,i,r,o])}var jb=0,Pb=()=>`__${String(++jb)}__`;function Rb(){let{router:t}=fx("useSubmit"),{basename:e}=v.useContext(tn),n=qE();return v.useCallback(async(s,i={})=>{let{action:r,method:o,encType:a,formData:l,body:c}=cb(s,e);if(i.navigate===!1){let d=i.fetcherKey||Pb();await t.fetch(d,n,i.action||r,{preventScrollReset:i.preventScrollReset,formData:l,body:c,formMethod:i.method||o,formEncType:i.encType||a,flushSync:i.flushSync})}else await t.navigate(i.action||r,{preventScrollReset:i.preventScrollReset,formData:l,body:c,formMethod:i.method||o,formEncType:i.encType||a,replace:i.replace,state:i.state,fromRouteId:n,flushSync:i.flushSync,viewTransition:i.viewTransition})},[t,e,n])}function Ib(t,{relative:e}={}){let{basename:n}=v.useContext(tn),s=v.useContext(nn);pe(s,"useFormAction must be used inside a RouteContext");let[i]=s.matches.slice(-1),r={...So(t||".",{relative:e})},o=xt();if(t==null){r.search=o.search;let a=new URLSearchParams(r.search),l=a.getAll("index");if(l.some(d=>d==="")){a.delete("index"),l.filter(f=>f).forEach(f=>a.append("index",f));let d=a.toString();r.search=d?`?${d}`:""}}return(!t||t===".")&&i.route.index&&(r.search=r.search?r.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(r.pathname=r.pathname==="/"?n:hn([n,r.pathname])),Yr(r)}function Ab(t,{relative:e}={}){let n=v.useContext(sx);pe(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=fx("useViewTransitionState"),i=So(t,{relative:e});if(!n.isTransitioning)return!1;let r=vn(n.currentLocation.pathname,s)||n.currentLocation.pathname,o=vn(n.nextLocation.pathname,s)||n.nextLocation.pathname;return Ja(i.pathname,o)!=null||Ja(i.pathname,r)!=null}const Kh=v.createContext({});function Co(t){const e=v.useRef(null);return e.current===null&&(e.current=t()),e.current}const Gh=typeof window<"u",Yh=Gh?v.useLayoutEffect:v.useEffect,Ul=v.createContext(null);function Qh(t,e){t.indexOf(e)===-1&&t.push(e)}function qh(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const xn=(t,e,n)=>n>e?e:n<t?t:n;let Za=()=>{};const wn={},px=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function mx(t){return typeof t=="object"&&t!==null}const gx=t=>/^0[^.\s]+$/u.test(t);function Xh(t){let e;return()=>(e===void 0&&(e=t()),e)}const Tt=t=>t,Db=(t,e)=>n=>e(t(n)),Eo=(...t)=>t.reduce(Db),Qr=(t,e,n)=>{const s=e-t;return s===0?1:(n-t)/s};class Jh{constructor(){this.subscriptions=[]}add(e){return Qh(this.subscriptions,e),()=>qh(this.subscriptions,e)}notify(e,n,s){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,s);else for(let r=0;r<i;r++){const o=this.subscriptions[r];o&&o(e,n,s)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Xt=t=>t*1e3,Jt=t=>t/1e3;function yx(t,e){return e?t*(1e3/e):0}const vx=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,Mb=1e-7,Lb=12;function Fb(t,e,n,s,i){let r,o,a=0;do o=e+(n-e)/2,r=vx(o,s,i)-t,r>0?n=o:e=o;while(Math.abs(r)>Mb&&++a<Lb);return o}function bo(t,e,n,s){if(t===e&&n===s)return Tt;const i=r=>Fb(r,0,1,t,n);return r=>r===0||r===1?r:vx(i(r),e,s)}const xx=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,wx=t=>e=>1-t(1-e),_x=bo(.33,1.53,.69,.99),Zh=wx(_x),Sx=xx(Zh),Cx=t=>(t*=2)<1?.5*Zh(t):.5*(2-Math.pow(2,-10*(t-1))),ef=t=>1-Math.sin(Math.acos(t)),Ex=wx(ef),bx=xx(ef),Ob=bo(.42,0,1,1),Vb=bo(0,0,.58,1),Nx=bo(.42,0,.58,1),zb=t=>Array.isArray(t)&&typeof t[0]!="number",kx=t=>Array.isArray(t)&&typeof t[0]=="number",Nm={linear:Tt,easeIn:Ob,easeInOut:Nx,easeOut:Vb,circIn:ef,circInOut:bx,circOut:Ex,backIn:Zh,backInOut:Sx,backOut:_x,anticipate:Cx},Bb=t=>typeof t=="string",km=t=>{if(kx(t)){Za(t.length===4);const[e,n,s,i]=t;return bo(e,n,s,i)}else if(Bb(t))return Za(Nm[t]!==void 0),Nm[t];return t},na=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],Tm={value:null,addProjectionMetrics:null};function $b(t,e){let n=new Set,s=new Set,i=!1,r=!1;const o=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1},l=0;function c(f){o.has(f)&&(d.schedule(f),t()),l++,f(a)}const d={schedule:(f,h=!1,p=!1)=>{const w=p&&i?n:s;return h&&o.add(f),w.has(f)||w.add(f),f},cancel:f=>{s.delete(f),o.delete(f)},process:f=>{if(a=f,i){r=!0;return}i=!0,[n,s]=[s,n],n.forEach(c),e&&Tm.value&&Tm.value.frameloop[e].push(l),l=0,n.clear(),i=!1,r&&(r=!1,d.process(f))}};return d}const Ub=40;function Tx(t,e){let n=!1,s=!0;const i={delta:0,timestamp:0,isProcessing:!1},r=()=>n=!0,o=na.reduce((x,b)=>(x[b]=$b(r,e?b:void 0),x),{}),{setup:a,read:l,resolveKeyframes:c,preUpdate:d,update:f,preRender:h,render:p,postRender:y}=o,w=()=>{const x=wn.useManualTiming?i.timestamp:performance.now();n=!1,wn.useManualTiming||(i.delta=s?1e3/60:Math.max(Math.min(x-i.timestamp,Ub),1)),i.timestamp=x,i.isProcessing=!0,a.process(i),l.process(i),c.process(i),d.process(i),f.process(i),h.process(i),p.process(i),y.process(i),i.isProcessing=!1,n&&e&&(s=!1,t(w))},C=()=>{n=!0,s=!0,i.isProcessing||t(w)};return{schedule:na.reduce((x,b)=>{const S=o[b];return x[b]=(T,E=!1,_=!1)=>(n||C(),S.schedule(T,E,_)),x},{}),cancel:x=>{for(let b=0;b<na.length;b++)o[na[b]].cancel(x)},state:i,steps:o}}const{schedule:ce,cancel:_n,state:Ve,steps:Vc}=Tx(typeof requestAnimationFrame<"u"?requestAnimationFrame:Tt,!0);let Ca;function Wb(){Ca=void 0}const at={now:()=>(Ca===void 0&&at.set(Ve.isProcessing||wn.useManualTiming?Ve.timestamp:performance.now()),Ca),set:t=>{Ca=t,queueMicrotask(Wb)}},jx=t=>e=>typeof e=="string"&&e.startsWith(t),tf=jx("--"),Hb=jx("var(--"),nf=t=>Hb(t)?Kb.test(t.split("/*")[0].trim()):!1,Kb=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Li={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},qr={...Li,transform:t=>xn(0,1,t)},sa={...Li,default:1},xr=t=>Math.round(t*1e5)/1e5,sf=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function Gb(t){return t==null}const Yb=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,rf=(t,e)=>n=>!!(typeof n=="string"&&Yb.test(n)&&n.startsWith(t)||e&&!Gb(n)&&Object.prototype.hasOwnProperty.call(n,e)),Px=(t,e,n)=>s=>{if(typeof s!="string")return s;const[i,r,o,a]=s.match(sf);return{[t]:parseFloat(i),[e]:parseFloat(r),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},Qb=t=>xn(0,255,t),zc={...Li,transform:t=>Math.round(Qb(t))},ms={test:rf("rgb","red"),parse:Px("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:s=1})=>"rgba("+zc.transform(t)+", "+zc.transform(e)+", "+zc.transform(n)+", "+xr(qr.transform(s))+")"};function qb(t){let e="",n="",s="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),s=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),s=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,s+=s,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(s,16),alpha:i?parseInt(i,16)/255:1}}const rd={test:rf("#"),parse:qb,transform:ms.transform},No=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Tn=No("deg"),Zt=No("%"),V=No("px"),Xb=No("vh"),Jb=No("vw"),jm={...Zt,parse:t=>Zt.parse(t)/100,transform:t=>Zt.transform(t*100)},ti={test:rf("hsl","hue"),parse:Px("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:s=1})=>"hsla("+Math.round(t)+", "+Zt.transform(xr(e))+", "+Zt.transform(xr(n))+", "+xr(qr.transform(s))+")"},Ne={test:t=>ms.test(t)||rd.test(t)||ti.test(t),parse:t=>ms.test(t)?ms.parse(t):ti.test(t)?ti.parse(t):rd.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?ms.transform(t):ti.transform(t),getAnimatableNone:t=>{const e=Ne.parse(t);return e.alpha=0,Ne.transform(e)}},Zb=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function eN(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(sf))==null?void 0:e.length)||0)+(((n=t.match(Zb))==null?void 0:n.length)||0)>0}const Rx="number",Ix="color",tN="var",nN="var(",Pm="${}",sN=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Xr(t){const e=t.toString(),n=[],s={color:[],number:[],var:[]},i=[];let r=0;const a=e.replace(sN,l=>(Ne.test(l)?(s.color.push(r),i.push(Ix),n.push(Ne.parse(l))):l.startsWith(nN)?(s.var.push(r),i.push(tN),n.push(l)):(s.number.push(r),i.push(Rx),n.push(parseFloat(l))),++r,Pm)).split(Pm);return{values:n,split:a,indexes:s,types:i}}function Ax(t){return Xr(t).values}function Dx(t){const{split:e,types:n}=Xr(t),s=e.length;return i=>{let r="";for(let o=0;o<s;o++)if(r+=e[o],i[o]!==void 0){const a=n[o];a===Rx?r+=xr(i[o]):a===Ix?r+=Ne.transform(i[o]):r+=i[o]}return r}}const iN=t=>typeof t=="number"?0:Ne.test(t)?Ne.getAnimatableNone(t):t;function rN(t){const e=Ax(t);return Dx(t)(e.map(iN))}const Xn={test:eN,parse:Ax,createTransformer:Dx,getAnimatableNone:rN};function Bc(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function oN({hue:t,saturation:e,lightness:n,alpha:s}){t/=360,e/=100,n/=100;let i=0,r=0,o=0;if(!e)i=r=o=n;else{const a=n<.5?n*(1+e):n+e-n*e,l=2*n-a;i=Bc(l,a,t+1/3),r=Bc(l,a,t),o=Bc(l,a,t-1/3)}return{red:Math.round(i*255),green:Math.round(r*255),blue:Math.round(o*255),alpha:s}}function el(t,e){return n=>n>0?e:t}const he=(t,e,n)=>t+(e-t)*n,$c=(t,e,n)=>{const s=t*t,i=n*(e*e-s)+s;return i<0?0:Math.sqrt(i)},aN=[rd,ms,ti],lN=t=>aN.find(e=>e.test(t));function Rm(t){const e=lN(t);if(!e)return!1;let n=e.parse(t);return e===ti&&(n=oN(n)),n}const Im=(t,e)=>{const n=Rm(t),s=Rm(e);if(!n||!s)return el(t,e);const i={...n};return r=>(i.red=$c(n.red,s.red,r),i.green=$c(n.green,s.green,r),i.blue=$c(n.blue,s.blue,r),i.alpha=he(n.alpha,s.alpha,r),ms.transform(i))},od=new Set(["none","hidden"]);function cN(t,e){return od.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function uN(t,e){return n=>he(t,e,n)}function of(t){return typeof t=="number"?uN:typeof t=="string"?nf(t)?el:Ne.test(t)?Im:fN:Array.isArray(t)?Mx:typeof t=="object"?Ne.test(t)?Im:dN:el}function Mx(t,e){const n=[...t],s=n.length,i=t.map((r,o)=>of(r)(r,e[o]));return r=>{for(let o=0;o<s;o++)n[o]=i[o](r);return n}}function dN(t,e){const n={...t,...e},s={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(s[i]=of(t[i])(t[i],e[i]));return i=>{for(const r in s)n[r]=s[r](i);return n}}function hN(t,e){const n=[],s={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const r=e.types[i],o=t.indexes[r][s[r]],a=t.values[o]??0;n[i]=a,s[r]++}return n}const fN=(t,e)=>{const n=Xn.createTransformer(e),s=Xr(t),i=Xr(e);return s.indexes.var.length===i.indexes.var.length&&s.indexes.color.length===i.indexes.color.length&&s.indexes.number.length>=i.indexes.number.length?od.has(t)&&!i.values.length||od.has(e)&&!s.values.length?cN(t,e):Eo(Mx(hN(s,i),i.values),n):el(t,e)};function Lx(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?he(t,e,n):of(t)(t,e)}const pN=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>ce.update(e,n),stop:()=>_n(e),now:()=>Ve.isProcessing?Ve.timestamp:at.now()}},Fx=(t,e,n=10)=>{let s="";const i=Math.max(Math.round(e/n),2);for(let r=0;r<i;r++)s+=Math.round(t(r/(i-1))*1e4)/1e4+", ";return`linear(${s.substring(0,s.length-2)})`},tl=2e4;function af(t){let e=0;const n=50;let s=t.next(e);for(;!s.done&&e<tl;)e+=n,s=t.next(e);return e>=tl?1/0:e}function mN(t,e=100,n){const s=n({...t,keyframes:[0,e]}),i=Math.min(af(s),tl);return{type:"keyframes",ease:r=>s.next(i*r).value/e,duration:Jt(i)}}const gN=5;function Ox(t,e,n){const s=Math.max(e-gN,0);return yx(n-t(s),e-s)}const ye={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Uc=.001;function yN({duration:t=ye.duration,bounce:e=ye.bounce,velocity:n=ye.velocity,mass:s=ye.mass}){let i,r,o=1-e;o=xn(ye.minDamping,ye.maxDamping,o),t=xn(ye.minDuration,ye.maxDuration,Jt(t)),o<1?(i=c=>{const d=c*o,f=d*t,h=d-n,p=ad(c,o),y=Math.exp(-f);return Uc-h/p*y},r=c=>{const f=c*o*t,h=f*n+n,p=Math.pow(o,2)*Math.pow(c,2)*t,y=Math.exp(-f),w=ad(Math.pow(c,2),o);return(-i(c)+Uc>0?-1:1)*((h-p)*y)/w}):(i=c=>{const d=Math.exp(-c*t),f=(c-n)*t+1;return-Uc+d*f},r=c=>{const d=Math.exp(-c*t),f=(n-c)*(t*t);return d*f});const a=5/t,l=xN(i,r,a);if(t=Xt(t),isNaN(l))return{stiffness:ye.stiffness,damping:ye.damping,duration:t};{const c=Math.pow(l,2)*s;return{stiffness:c,damping:o*2*Math.sqrt(s*c),duration:t}}}const vN=12;function xN(t,e,n){let s=n;for(let i=1;i<vN;i++)s=s-t(s)/e(s);return s}function ad(t,e){return t*Math.sqrt(1-e*e)}const wN=["duration","bounce"],_N=["stiffness","damping","mass"];function Am(t,e){return e.some(n=>t[n]!==void 0)}function SN(t){let e={velocity:ye.velocity,stiffness:ye.stiffness,damping:ye.damping,mass:ye.mass,isResolvedFromDuration:!1,...t};if(!Am(t,_N)&&Am(t,wN))if(t.visualDuration){const n=t.visualDuration,s=2*Math.PI/(n*1.2),i=s*s,r=2*xn(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:ye.mass,stiffness:i,damping:r}}else{const n=yN(t);e={...e,...n,mass:ye.mass},e.isResolvedFromDuration=!0}return e}function nl(t=ye.visualDuration,e=ye.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:s,restDelta:i}=n;const r=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],a={done:!1,value:r},{stiffness:l,damping:c,mass:d,duration:f,velocity:h,isResolvedFromDuration:p}=SN({...n,velocity:-Jt(n.velocity||0)}),y=h||0,w=c/(2*Math.sqrt(l*d)),C=o-r,g=Jt(Math.sqrt(l/d)),m=Math.abs(C)<5;s||(s=m?ye.restSpeed.granular:ye.restSpeed.default),i||(i=m?ye.restDelta.granular:ye.restDelta.default);let x;if(w<1){const S=ad(g,w);x=T=>{const E=Math.exp(-w*g*T);return o-E*((y+w*g*C)/S*Math.sin(S*T)+C*Math.cos(S*T))}}else if(w===1)x=S=>o-Math.exp(-g*S)*(C+(y+g*C)*S);else{const S=g*Math.sqrt(w*w-1);x=T=>{const E=Math.exp(-w*g*T),_=Math.min(S*T,300);return o-E*((y+w*g*C)*Math.sinh(_)+S*C*Math.cosh(_))/S}}const b={calculatedDuration:p&&f||null,next:S=>{const T=x(S);if(p)a.done=S>=f;else{let E=S===0?y:0;w<1&&(E=S===0?Xt(y):Ox(x,S,T));const _=Math.abs(E)<=s,k=Math.abs(o-T)<=i;a.done=_&&k}return a.value=a.done?o:T,a},toString:()=>{const S=Math.min(af(b),tl),T=Fx(E=>b.next(S*E).value,S,30);return S+"ms "+T},toTransition:()=>{}};return b}nl.applyToOptions=t=>{const e=mN(t,100,nl);return t.ease=e.ease,t.duration=Xt(e.duration),t.type="keyframes",t};function ld({keyframes:t,velocity:e=0,power:n=.8,timeConstant:s=325,bounceDamping:i=10,bounceStiffness:r=500,modifyTarget:o,min:a,max:l,restDelta:c=.5,restSpeed:d}){const f=t[0],h={done:!1,value:f},p=_=>a!==void 0&&_<a||l!==void 0&&_>l,y=_=>a===void 0?l:l===void 0||Math.abs(a-_)<Math.abs(l-_)?a:l;let w=n*e;const C=f+w,g=o===void 0?C:o(C);g!==C&&(w=g-f);const m=_=>-w*Math.exp(-_/s),x=_=>g+m(_),b=_=>{const k=m(_),N=x(_);h.done=Math.abs(k)<=c,h.value=h.done?g:N};let S,T;const E=_=>{p(h.value)&&(S=_,T=nl({keyframes:[h.value,y(h.value)],velocity:Ox(x,_,h.value),damping:i,stiffness:r,restDelta:c,restSpeed:d}))};return E(0),{calculatedDuration:null,next:_=>{let k=!1;return!T&&S===void 0&&(k=!0,b(_),E(_)),S!==void 0&&_>=S?T.next(_-S):(!k&&b(_),h)}}}function CN(t,e,n){const s=[],i=n||wn.mix||Lx,r=t.length-1;for(let o=0;o<r;o++){let a=i(t[o],t[o+1]);if(e){const l=Array.isArray(e)?e[o]||Tt:e;a=Eo(l,a)}s.push(a)}return s}function Vx(t,e,{clamp:n=!0,ease:s,mixer:i}={}){const r=t.length;if(Za(r===e.length),r===1)return()=>e[0];if(r===2&&e[0]===e[1])return()=>e[1];const o=t[0]===t[1];t[0]>t[r-1]&&(t=[...t].reverse(),e=[...e].reverse());const a=CN(e,s,i),l=a.length,c=d=>{if(o&&d<t[0])return e[0];let f=0;if(l>1)for(;f<t.length-2&&!(d<t[f+1]);f++);const h=Qr(t[f],t[f+1],d);return a[f](h)};return n?d=>c(xn(t[0],t[r-1],d)):c}function EN(t,e){const n=t[t.length-1];for(let s=1;s<=e;s++){const i=Qr(0,e,s);t.push(he(n,1,i))}}function bN(t){const e=[0];return EN(e,t.length-1),e}function NN(t,e){return t.map(n=>n*e)}function kN(t,e){return t.map(()=>e||Nx).splice(0,t.length-1)}function wr({duration:t=300,keyframes:e,times:n,ease:s="easeInOut"}){const i=zb(s)?s.map(km):km(s),r={done:!1,value:e[0]},o=NN(n&&n.length===e.length?n:bN(e),t),a=Vx(o,e,{ease:Array.isArray(i)?i:kN(e,i)});return{calculatedDuration:t,next:l=>(r.value=a(l),r.done=l>=t,r)}}const TN=t=>t!==null;function lf(t,{repeat:e,repeatType:n="loop"},s,i=1){const r=t.filter(TN),a=i<0||e&&n!=="loop"&&e%2===1?0:r.length-1;return!a||s===void 0?r[a]:s}const jN={decay:ld,inertia:ld,tween:wr,keyframes:wr,spring:nl};function zx(t){typeof t.type=="string"&&(t.type=jN[t.type])}class cf{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const PN=t=>t/100;class uf extends cf{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var s,i;const{motionValue:n}=this.options;n&&n.updatedAt!==at.now()&&this.tick(at.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(i=(s=this.options).onStop)==null||i.call(s))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;zx(e);const{type:n=wr,repeat:s=0,repeatDelay:i=0,repeatType:r,velocity:o=0}=e;let{keyframes:a}=e;const l=n||wr;l!==wr&&typeof a[0]!="number"&&(this.mixKeyframes=Eo(PN,Lx(a[0],a[1])),a=[0,100]);const c=l({...e,keyframes:a});r==="mirror"&&(this.mirroredGenerator=l({...e,keyframes:[...a].reverse(),velocity:-o})),c.calculatedDuration===null&&(c.calculatedDuration=af(c));const{calculatedDuration:d}=c;this.calculatedDuration=d,this.resolvedDuration=d+i,this.totalDuration=this.resolvedDuration*(s+1)-i,this.generator=c}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:s,totalDuration:i,mixKeyframes:r,mirroredGenerator:o,resolvedDuration:a,calculatedDuration:l}=this;if(this.startTime===null)return s.next(0);const{delay:c=0,keyframes:d,repeat:f,repeatType:h,repeatDelay:p,type:y,onUpdate:w,finalKeyframe:C}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-i/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const g=this.currentTime-c*(this.playbackSpeed>=0?1:-1),m=this.playbackSpeed>=0?g<0:g>i;this.currentTime=Math.max(g,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let x=this.currentTime,b=s;if(f){const _=Math.min(this.currentTime,i)/a;let k=Math.floor(_),N=_%1;!N&&_>=1&&(N=1),N===1&&k--,k=Math.min(k,f+1),!!(k%2)&&(h==="reverse"?(N=1-N,p&&(N-=p/a)):h==="mirror"&&(b=o)),x=xn(0,1,N)*a}const S=m?{done:!1,value:d[0]}:b.next(x);r&&(S.value=r(S.value));let{done:T}=S;!m&&l!==null&&(T=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const E=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&T);return E&&y!==ld&&(S.value=lf(d,this.options,C,this.speed)),w&&w(S.value),E&&this.finish(),S}then(e,n){return this.finished.then(e,n)}get duration(){return Jt(this.calculatedDuration)}get time(){return Jt(this.currentTime)}set time(e){var n;e=Xt(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(at.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=Jt(this.currentTime))}play(){var i,r;if(this.isStopped)return;const{driver:e=pN,startTime:n}=this.options;this.driver||(this.driver=e(o=>this.tick(o))),(r=(i=this.options).onPlay)==null||r.call(i);const s=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=s):this.holdTime!==null?this.startTime=s-this.holdTime:this.startTime||(this.startTime=n??s),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(at.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(e=this.options).onComplete)==null||n.call(e)}cancel(){var e,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(e=this.options).onCancel)==null||n.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),e.observe(this)}}function RN(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const gs=t=>t*180/Math.PI,cd=t=>{const e=gs(Math.atan2(t[1],t[0]));return ud(e)},IN={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:cd,rotateZ:cd,skewX:t=>gs(Math.atan(t[1])),skewY:t=>gs(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},ud=t=>(t=t%360,t<0&&(t+=360),t),Dm=cd,Mm=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),Lm=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),AN={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:Mm,scaleY:Lm,scale:t=>(Mm(t)+Lm(t))/2,rotateX:t=>ud(gs(Math.atan2(t[6],t[5]))),rotateY:t=>ud(gs(Math.atan2(-t[2],t[0]))),rotateZ:Dm,rotate:Dm,skewX:t=>gs(Math.atan(t[4])),skewY:t=>gs(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function dd(t){return t.includes("scale")?1:0}function hd(t,e){if(!t||t==="none")return dd(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let s,i;if(n)s=AN,i=n;else{const a=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);s=IN,i=a}if(!i)return dd(e);const r=s[e],o=i[1].split(",").map(MN);return typeof r=="function"?r(o):o[r]}const DN=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return hd(n,e)};function MN(t){return parseFloat(t.trim())}const Fi=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Oi=new Set(Fi),Fm=t=>t===Li||t===V,LN=new Set(["x","y","z"]),FN=Fi.filter(t=>!LN.has(t));function ON(t){const e=[];return FN.forEach(n=>{const s=t.getValue(n);s!==void 0&&(e.push([n,s.get()]),s.set(n.startsWith("scale")?1:0))}),e}const ws={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>hd(e,"x"),y:(t,{transform:e})=>hd(e,"y")};ws.translateX=ws.x;ws.translateY=ws.y;const _s=new Set;let fd=!1,pd=!1,md=!1;function Bx(){if(pd){const t=Array.from(_s).filter(s=>s.needsMeasurement),e=new Set(t.map(s=>s.element)),n=new Map;e.forEach(s=>{const i=ON(s);i.length&&(n.set(s,i),s.render())}),t.forEach(s=>s.measureInitialState()),e.forEach(s=>{s.render();const i=n.get(s);i&&i.forEach(([r,o])=>{var a;(a=s.getValue(r))==null||a.set(o)})}),t.forEach(s=>s.measureEndState()),t.forEach(s=>{s.suspendedScrollY!==void 0&&window.scrollTo(0,s.suspendedScrollY)})}pd=!1,fd=!1,_s.forEach(t=>t.complete(md)),_s.clear()}function $x(){_s.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(pd=!0)})}function VN(){md=!0,$x(),Bx(),md=!1}class df{constructor(e,n,s,i,r,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=s,this.motionValue=i,this.element=r,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(_s.add(this),fd||(fd=!0,ce.read($x),ce.resolveKeyframes(Bx))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:s,motionValue:i}=this;if(e[0]===null){const r=i==null?void 0:i.get(),o=e[e.length-1];if(r!==void 0)e[0]=r;else if(s&&n){const a=s.readValue(n,o);a!=null&&(e[0]=a)}e[0]===void 0&&(e[0]=o),i&&r===void 0&&i.set(e[0])}RN(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),_s.delete(this)}cancel(){this.state==="scheduled"&&(_s.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const zN=t=>t.startsWith("--");function BN(t,e,n){zN(e)?t.style.setProperty(e,n):t.style[e]=n}const $N=Xh(()=>window.ScrollTimeline!==void 0),UN={};function WN(t,e){const n=Xh(t);return()=>UN[e]??n()}const Ux=WN(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),lr=([t,e,n,s])=>`cubic-bezier(${t}, ${e}, ${n}, ${s})`,Om={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:lr([0,.65,.55,1]),circOut:lr([.55,0,1,.45]),backIn:lr([.31,.01,.66,-.59]),backOut:lr([.33,1.53,.69,.99])};function Wx(t,e){if(t)return typeof t=="function"?Ux()?Fx(t,e):"ease-out":kx(t)?lr(t):Array.isArray(t)?t.map(n=>Wx(n,e)||Om.easeOut):Om[t]}function HN(t,e,n,{delay:s=0,duration:i=300,repeat:r=0,repeatType:o="loop",ease:a="easeOut",times:l}={},c=void 0){const d={[e]:n};l&&(d.offset=l);const f=Wx(a,i);Array.isArray(f)&&(d.easing=f);const h={delay:s,duration:i,easing:Array.isArray(f)?"linear":f,fill:"both",iterations:r+1,direction:o==="reverse"?"alternate":"normal"};return c&&(h.pseudoElement=c),t.animate(d,h)}function Hx(t){return typeof t=="function"&&"applyToOptions"in t}function KN({type:t,...e}){return Hx(t)&&Ux()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class GN extends cf{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:s,keyframes:i,pseudoElement:r,allowFlatten:o=!1,finalKeyframe:a,onComplete:l}=e;this.isPseudoElement=!!r,this.allowFlatten=o,this.options=e,Za(typeof e.type!="string");const c=KN(e);this.animation=HN(n,s,i,c,r),c.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!r){const d=lf(i,this.options,a,this.speed);this.updateMotionValue?this.updateMotionValue(d):BN(n,s,d),this.animation.cancel()}l==null||l(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,n;(n=(e=this.animation).finish)==null||n.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,n;this.isPseudoElement||(n=(e=this.animation).commitStyles)==null||n.call(e)}get duration(){var n,s;const e=((s=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:s.call(n).duration)||0;return Jt(Number(e))}get time(){return Jt(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=Xt(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){var s;return this.allowFlatten&&((s=this.animation.effect)==null||s.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&$N()?(this.animation.timeline=e,Tt):n(this)}}const Kx={anticipate:Cx,backInOut:Sx,circInOut:bx};function YN(t){return t in Kx}function QN(t){typeof t.ease=="string"&&YN(t.ease)&&(t.ease=Kx[t.ease])}const Vm=10;class qN extends GN{constructor(e){QN(e),zx(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:s,onComplete:i,element:r,...o}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const a=new uf({...o,autoplay:!1}),l=Xt(this.finishedTime??this.time);n.setWithVelocity(a.sample(l-Vm).value,a.sample(l).value,Vm),a.stop()}}const zm=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Xn.test(t)||t==="0")&&!t.startsWith("url("));function XN(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function JN(t,e,n,s){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const r=t[t.length-1],o=zm(i,e),a=zm(r,e);return!o||!a?!1:XN(t)||(n==="spring"||Hx(n))&&s}function gd(t){t.duration=0,t.type}const ZN=new Set(["opacity","clipPath","filter","transform"]),ek=Xh(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function tk(t){var d;const{motionValue:e,name:n,repeatDelay:s,repeatType:i,damping:r,type:o}=t;if(!(((d=e==null?void 0:e.owner)==null?void 0:d.current)instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:c}=e.owner.getProps();return ek()&&n&&ZN.has(n)&&(n!=="transform"||!c)&&!l&&!s&&i!=="mirror"&&r!==0&&o!=="inertia"}const nk=40;class sk extends cf{constructor({autoplay:e=!0,delay:n=0,type:s="keyframes",repeat:i=0,repeatDelay:r=0,repeatType:o="loop",keyframes:a,name:l,motionValue:c,element:d,...f}){var y;super(),this.stop=()=>{var w,C;this._animation&&(this._animation.stop(),(w=this.stopTimeline)==null||w.call(this)),(C=this.keyframeResolver)==null||C.cancel()},this.createdAt=at.now();const h={autoplay:e,delay:n,type:s,repeat:i,repeatDelay:r,repeatType:o,name:l,motionValue:c,element:d,...f},p=(d==null?void 0:d.KeyframeResolver)||df;this.keyframeResolver=new p(a,(w,C,g)=>this.onKeyframesResolved(w,C,h,!g),l,c,d),(y=this.keyframeResolver)==null||y.scheduleResolve()}onKeyframesResolved(e,n,s,i){this.keyframeResolver=void 0;const{name:r,type:o,velocity:a,delay:l,isHandoff:c,onUpdate:d}=s;this.resolvedAt=at.now(),JN(e,r,o,a)||((wn.instantAnimations||!l)&&(d==null||d(lf(e,s,n))),e[0]=e[e.length-1],gd(s),s.repeat=0);const h={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>nk?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...s,keyframes:e},p=!c&&tk(h)?new qN({...h,element:h.motionValue.owner.current}):new uf(h);p.finished.then(()=>this.notifyFinished()).catch(Tt),this.pendingTimeline&&(this.stopTimeline=p.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=p}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),VN()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}const ik=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function rk(t){const e=ik.exec(t);if(!e)return[,];const[,n,s,i]=e;return[`--${n??s}`,i]}function Gx(t,e,n=1){const[s,i]=rk(t);if(!s)return;const r=window.getComputedStyle(e).getPropertyValue(s);if(r){const o=r.trim();return px(o)?parseFloat(o):o}return nf(i)?Gx(i,e,n+1):i}function hf(t,e){return(t==null?void 0:t[e])??(t==null?void 0:t.default)??t}const Yx=new Set(["width","height","top","left","right","bottom",...Fi]),ok={test:t=>t==="auto",parse:t=>t},Qx=t=>e=>e.test(t),qx=[Li,V,Zt,Tn,Jb,Xb,ok],Bm=t=>qx.find(Qx(t));function ak(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||gx(t):!0}const lk=new Set(["brightness","contrast","saturate","opacity"]);function ck(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[s]=n.match(sf)||[];if(!s)return t;const i=n.replace(s,"");let r=lk.has(e)?1:0;return s!==n&&(r*=100),e+"("+r+i+")"}const uk=/\b([a-z-]*)\(.*?\)/gu,yd={...Xn,getAnimatableNone:t=>{const e=t.match(uk);return e?e.map(ck).join(" "):t}},$m={...Li,transform:Math.round},dk={rotate:Tn,rotateX:Tn,rotateY:Tn,rotateZ:Tn,scale:sa,scaleX:sa,scaleY:sa,scaleZ:sa,skew:Tn,skewX:Tn,skewY:Tn,distance:V,translateX:V,translateY:V,translateZ:V,x:V,y:V,z:V,perspective:V,transformPerspective:V,opacity:qr,originX:jm,originY:jm,originZ:V},ff={borderWidth:V,borderTopWidth:V,borderRightWidth:V,borderBottomWidth:V,borderLeftWidth:V,borderRadius:V,radius:V,borderTopLeftRadius:V,borderTopRightRadius:V,borderBottomRightRadius:V,borderBottomLeftRadius:V,width:V,maxWidth:V,height:V,maxHeight:V,top:V,right:V,bottom:V,left:V,padding:V,paddingTop:V,paddingRight:V,paddingBottom:V,paddingLeft:V,margin:V,marginTop:V,marginRight:V,marginBottom:V,marginLeft:V,backgroundPositionX:V,backgroundPositionY:V,...dk,zIndex:$m,fillOpacity:qr,strokeOpacity:qr,numOctaves:$m},hk={...ff,color:Ne,backgroundColor:Ne,outlineColor:Ne,fill:Ne,stroke:Ne,borderColor:Ne,borderTopColor:Ne,borderRightColor:Ne,borderBottomColor:Ne,borderLeftColor:Ne,filter:yd,WebkitFilter:yd},Xx=t=>hk[t];function Jx(t,e){let n=Xx(t);return n!==yd&&(n=Xn),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const fk=new Set(["auto","none","0"]);function pk(t,e,n){let s=0,i;for(;s<t.length&&!i;){const r=t[s];typeof r=="string"&&!fk.has(r)&&Xr(r).values.length&&(i=t[s]),s++}if(i&&n)for(const r of e)t[r]=Jx(n,i)}class mk extends df{constructor(e,n,s,i,r){super(e,n,s,i,r,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:s}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let c=e[l];if(typeof c=="string"&&(c=c.trim(),nf(c))){const d=Gx(c,n.current);d!==void 0&&(e[l]=d),l===e.length-1&&(this.finalKeyframe=c)}}if(this.resolveNoneKeyframes(),!Yx.has(s)||e.length!==2)return;const[i,r]=e,o=Bm(i),a=Bm(r);if(o!==a)if(Fm(o)&&Fm(a))for(let l=0;l<e.length;l++){const c=e[l];typeof c=="string"&&(e[l]=parseFloat(c))}else ws[s]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,s=[];for(let i=0;i<e.length;i++)(e[i]===null||ak(e[i]))&&s.push(i);s.length&&pk(e,s,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:s}=this;if(!e||!e.current)return;s==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=ws[s](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(s,i).jump(i,!1)}measureEndState(){var a;const{element:e,name:n,unresolvedKeyframes:s}=this;if(!e||!e.current)return;const i=e.getValue(n);i&&i.jump(this.measuredOrigin,!1);const r=s.length-1,o=s[r];s[r]=ws[n](e.measureViewportBox(),window.getComputedStyle(e.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),(a=this.removedTransforms)!=null&&a.length&&this.removedTransforms.forEach(([l,c])=>{e.getValue(l).set(c)}),this.resolveNoneKeyframes()}}function gk(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){const i=document.querySelectorAll(t);return i?Array.from(i):[]}return Array.from(t)}const Zx=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function e1(t){return mx(t)&&"offsetHeight"in t}const Um=30,yk=t=>!isNaN(parseFloat(t)),_r={current:void 0};class vk{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=s=>{var r;const i=at.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(s),this.current!==this.prev&&((r=this.events.change)==null||r.notify(this.current),this.dependents))for(const o of this.dependents)o.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=at.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=yk(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new Jh);const s=this.events[e].add(n);return e==="change"?()=>{s(),ce.read(()=>{this.events.change.getSize()||this.stop()})}:s}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,n,s){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-s}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return _r.current&&_r.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){const e=at.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>Um)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,Um);return yx(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,n;(e=this.dependents)==null||e.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function ks(t,e){return new vk(t,e)}const{schedule:pf,cancel:f4}=Tx(queueMicrotask,!1),At={x:!1,y:!1};function t1(){return At.x||At.y}function xk(t){return t==="x"||t==="y"?At[t]?null:(At[t]=!0,()=>{At[t]=!1}):At.x||At.y?null:(At.x=At.y=!0,()=>{At.x=At.y=!1})}function n1(t,e){const n=gk(t),s=new AbortController,i={passive:!0,...e,signal:s.signal};return[n,i,()=>s.abort()]}function Wm(t){return!(t.pointerType==="touch"||t1())}function wk(t,e,n={}){const[s,i,r]=n1(t,n),o=a=>{if(!Wm(a))return;const{target:l}=a,c=e(l,a);if(typeof c!="function"||!l)return;const d=f=>{Wm(f)&&(c(f),l.removeEventListener("pointerleave",d))};l.addEventListener("pointerleave",d,i)};return s.forEach(a=>{a.addEventListener("pointerenter",o,i)}),r}const s1=(t,e)=>e?t===e?!0:s1(t,e.parentElement):!1,mf=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,_k=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function Sk(t){return _k.has(t.tagName)||t.tabIndex!==-1}const Ea=new WeakSet;function Hm(t){return e=>{e.key==="Enter"&&t(e)}}function Wc(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const Ck=(t,e)=>{const n=t.currentTarget;if(!n)return;const s=Hm(()=>{if(Ea.has(n))return;Wc(n,"down");const i=Hm(()=>{Wc(n,"up")}),r=()=>Wc(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",r,e)});n.addEventListener("keydown",s,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",s),e)};function Km(t){return mf(t)&&!t1()}function Ek(t,e,n={}){const[s,i,r]=n1(t,n),o=a=>{const l=a.currentTarget;if(!Km(a))return;Ea.add(l);const c=e(l,a),d=(p,y)=>{window.removeEventListener("pointerup",f),window.removeEventListener("pointercancel",h),Ea.has(l)&&Ea.delete(l),Km(p)&&typeof c=="function"&&c(p,{success:y})},f=p=>{d(p,l===window||l===document||n.useGlobalTarget||s1(l,p.target))},h=p=>{d(p,!1)};window.addEventListener("pointerup",f,i),window.addEventListener("pointercancel",h,i)};return s.forEach(a=>{(n.useGlobalTarget?window:a).addEventListener("pointerdown",o,i),e1(a)&&(a.addEventListener("focus",c=>Ck(c,i)),!Sk(a)&&!a.hasAttribute("tabindex")&&(a.tabIndex=0))}),r}function i1(t){return mx(t)&&"ownerSVGElement"in t}function bk(t){return i1(t)&&t.tagName==="svg"}function Nk(...t){const e=!Array.isArray(t[0]),n=e?0:-1,s=t[0+n],i=t[1+n],r=t[2+n],o=t[3+n],a=Vx(i,r,o);return e?a(s):a}const Ge=t=>!!(t&&t.getVelocity),kk=[...qx,Ne,Xn],Tk=t=>kk.find(Qx(t)),Wl=v.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class jk extends v.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const s=n.offsetParent,i=e1(s)&&s.offsetWidth||0,r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft,r.right=i-r.width-r.left}return null}componentDidUpdate(){}render(){return this.props.children}}function Pk({children:t,isPresent:e,anchorX:n,root:s}){const i=v.useId(),r=v.useRef(null),o=v.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:a}=v.useContext(Wl);return v.useInsertionEffect(()=>{const{width:l,height:c,top:d,left:f,right:h}=o.current;if(e||!r.current||!l||!c)return;const p=n==="left"?`left: ${f}`:`right: ${h}`;r.current.dataset.motionPopId=i;const y=document.createElement("style");a&&(y.nonce=a);const w=s??document.head;return w.appendChild(y),y.sheet&&y.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${l}px !important;
            height: ${c}px !important;
            ${p}px !important;
            top: ${d}px !important;
          }
        `),()=>{w.contains(y)&&w.removeChild(y)}},[e]),u.jsx(jk,{isPresent:e,childRef:r,sizeRef:o,children:v.cloneElement(t,{ref:r})})}const Rk=({children:t,initial:e,isPresent:n,onExitComplete:s,custom:i,presenceAffectsLayout:r,mode:o,anchorX:a,root:l})=>{const c=Co(Ik),d=v.useId();let f=!0,h=v.useMemo(()=>(f=!1,{id:d,initial:e,isPresent:n,custom:i,onExitComplete:p=>{c.set(p,!0);for(const y of c.values())if(!y)return;s&&s()},register:p=>(c.set(p,!1),()=>c.delete(p))}),[n,c,s]);return r&&f&&(h={...h}),v.useMemo(()=>{c.forEach((p,y)=>c.set(y,!1))},[n]),v.useEffect(()=>{!n&&!c.size&&s&&s()},[n]),o==="popLayout"&&(t=u.jsx(Pk,{isPresent:n,anchorX:a,root:l,children:t})),u.jsx(Ul.Provider,{value:h,children:t})};function Ik(){return new Map}function r1(t=!0){const e=v.useContext(Ul);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:s,register:i}=e,r=v.useId();v.useEffect(()=>{if(t)return i(r)},[t]);const o=v.useCallback(()=>t&&s&&s(r),[r,s,t]);return!n&&s?[!1,o]:[!0]}const ia=t=>t.key||"";function Gm(t){const e=[];return v.Children.forEach(t,n=>{v.isValidElement(n)&&e.push(n)}),e}const Je=({children:t,custom:e,initial:n=!0,onExitComplete:s,presenceAffectsLayout:i=!0,mode:r="sync",propagate:o=!1,anchorX:a="left",root:l})=>{const[c,d]=r1(o),f=v.useMemo(()=>Gm(t),[t]),h=o&&!c?[]:f.map(ia),p=v.useRef(!0),y=v.useRef(f),w=Co(()=>new Map),[C,g]=v.useState(f),[m,x]=v.useState(f);Yh(()=>{p.current=!1,y.current=f;for(let T=0;T<m.length;T++){const E=ia(m[T]);h.includes(E)?w.delete(E):w.get(E)!==!0&&w.set(E,!1)}},[m,h.length,h.join("-")]);const b=[];if(f!==C){let T=[...f];for(let E=0;E<m.length;E++){const _=m[E],k=ia(_);h.includes(k)||(T.splice(E,0,_),b.push(_))}return r==="wait"&&b.length&&(T=b),x(Gm(T)),g(f),null}const{forceRender:S}=v.useContext(Kh);return u.jsx(u.Fragment,{children:m.map(T=>{const E=ia(T),_=o&&!c?!1:f===m||h.includes(E),k=()=>{if(w.has(E))w.set(E,!0);else return;let N=!0;w.forEach(P=>{P||(N=!1)}),N&&(S==null||S(),x(y.current),o&&(d==null||d()),s&&s())};return u.jsx(Rk,{isPresent:_,initial:!p.current||n?void 0:!1,custom:e,presenceAffectsLayout:i,mode:r,root:l,onExitComplete:_?void 0:k,anchorX:a,children:T},E)})})},o1=v.createContext({strict:!1}),Ym={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Ei={};for(const t in Ym)Ei[t]={isEnabled:e=>Ym[t].some(n=>!!e[n])};function Ak(t){for(const e in t)Ei[e]={...Ei[e],...t[e]}}const Dk=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function sl(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||Dk.has(t)}let a1=t=>!sl(t);function Mk(t){typeof t=="function"&&(a1=e=>e.startsWith("on")?!sl(e):t(e))}try{Mk(require("@emotion/is-prop-valid").default)}catch{}function Lk(t,e,n){const s={};for(const i in t)i==="values"&&typeof t.values=="object"||(a1(i)||n===!0&&sl(i)||!e&&!sl(i)||t.draggable&&i.startsWith("onDrag"))&&(s[i]=t[i]);return s}const Hl=v.createContext({});function Kl(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function Jr(t){return typeof t=="string"||Array.isArray(t)}const gf=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],yf=["initial",...gf];function Gl(t){return Kl(t.animate)||yf.some(e=>Jr(t[e]))}function l1(t){return!!(Gl(t)||t.variants)}function Fk(t,e){if(Gl(t)){const{initial:n,animate:s}=t;return{initial:n===!1||Jr(n)?n:void 0,animate:Jr(s)?s:void 0}}return t.inherit!==!1?e:{}}function Ok(t){const{initial:e,animate:n}=Fk(t,v.useContext(Hl));return v.useMemo(()=>({initial:e,animate:n}),[Qm(e),Qm(n)])}function Qm(t){return Array.isArray(t)?t.join(" "):t}const Zr={};function Vk(t){for(const e in t)Zr[e]=t[e],tf(e)&&(Zr[e].isCSSVariable=!0)}function c1(t,{layout:e,layoutId:n}){return Oi.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Zr[t]||t==="opacity")}const zk={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Bk=Fi.length;function $k(t,e,n){let s="",i=!0;for(let r=0;r<Bk;r++){const o=Fi[r],a=t[o];if(a===void 0)continue;let l=!0;if(typeof a=="number"?l=a===(o.startsWith("scale")?1:0):l=parseFloat(a)===0,!l||n){const c=Zx(a,ff[o]);if(!l){i=!1;const d=zk[o]||o;s+=`${d}(${c}) `}n&&(e[o]=c)}}return s=s.trim(),n?s=n(e,i?"":s):i&&(s="none"),s}function vf(t,e,n){const{style:s,vars:i,transformOrigin:r}=t;let o=!1,a=!1;for(const l in e){const c=e[l];if(Oi.has(l)){o=!0;continue}else if(tf(l)){i[l]=c;continue}else{const d=Zx(c,ff[l]);l.startsWith("origin")?(a=!0,r[l]=d):s[l]=d}}if(e.transform||(o||n?s.transform=$k(e,t.transform,n):s.transform&&(s.transform="none")),a){const{originX:l="50%",originY:c="50%",originZ:d=0}=r;s.transformOrigin=`${l} ${c} ${d}`}}const xf=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function u1(t,e,n){for(const s in e)!Ge(e[s])&&!c1(s,n)&&(t[s]=e[s])}function Uk({transformTemplate:t},e){return v.useMemo(()=>{const n=xf();return vf(n,e,t),Object.assign({},n.vars,n.style)},[e])}function Wk(t,e){const n=t.style||{},s={};return u1(s,n,t),Object.assign(s,Uk(t,e)),s}function Hk(t,e){const n={},s=Wk(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=s,n}const Kk={offset:"stroke-dashoffset",array:"stroke-dasharray"},Gk={offset:"strokeDashoffset",array:"strokeDasharray"};function Yk(t,e,n=1,s=0,i=!0){t.pathLength=1;const r=i?Kk:Gk;t[r.offset]=V.transform(-s);const o=V.transform(e),a=V.transform(n);t[r.array]=`${o} ${a}`}function d1(t,{attrX:e,attrY:n,attrScale:s,pathLength:i,pathSpacing:r=1,pathOffset:o=0,...a},l,c,d){if(vf(t,a,c),l){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:f,style:h}=t;f.transform&&(h.transform=f.transform,delete f.transform),(h.transform||f.transformOrigin)&&(h.transformOrigin=f.transformOrigin??"50% 50%",delete f.transformOrigin),h.transform&&(h.transformBox=(d==null?void 0:d.transformBox)??"fill-box",delete f.transformBox),e!==void 0&&(f.x=e),n!==void 0&&(f.y=n),s!==void 0&&(f.scale=s),i!==void 0&&Yk(f,i,r,o,!1)}const h1=()=>({...xf(),attrs:{}}),f1=t=>typeof t=="string"&&t.toLowerCase()==="svg";function Qk(t,e,n,s){const i=v.useMemo(()=>{const r=h1();return d1(r,e,f1(s),t.transformTemplate,t.style),{...r.attrs,style:{...r.style}}},[e]);if(t.style){const r={};u1(r,t.style,t),i.style={...r,...i.style}}return i}const qk=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function wf(t){return typeof t!="string"||t.includes("-")?!1:!!(qk.indexOf(t)>-1||/[A-Z]/u.test(t))}function Xk(t,e,n,{latestValues:s},i,r=!1){const a=(wf(t)?Qk:Hk)(e,s,i,t),l=Lk(e,typeof t=="string",r),c=t!==v.Fragment?{...l,...a,ref:n}:{},{children:d}=e,f=v.useMemo(()=>Ge(d)?d.get():d,[d]);return v.createElement(t,{...c,children:f})}function qm(t){const e=[{},{}];return t==null||t.values.forEach((n,s)=>{e[0][s]=n.get(),e[1][s]=n.getVelocity()}),e}function _f(t,e,n,s){if(typeof e=="function"){const[i,r]=qm(s);e=e(n!==void 0?n:t.custom,i,r)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,r]=qm(s);e=e(n!==void 0?n:t.custom,i,r)}return e}function ba(t){return Ge(t)?t.get():t}function Jk({scrapeMotionValuesFromProps:t,createRenderState:e},n,s,i){return{latestValues:Zk(n,s,i,t),renderState:e()}}function Zk(t,e,n,s){const i={},r=s(t,{});for(const h in r)i[h]=ba(r[h]);let{initial:o,animate:a}=t;const l=Gl(t),c=l1(t);e&&c&&!l&&t.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let d=n?n.initial===!1:!1;d=d||o===!1;const f=d?a:o;if(f&&typeof f!="boolean"&&!Kl(f)){const h=Array.isArray(f)?f:[f];for(let p=0;p<h.length;p++){const y=_f(t,h[p]);if(y){const{transitionEnd:w,transition:C,...g}=y;for(const m in g){let x=g[m];if(Array.isArray(x)){const b=d?x.length-1:0;x=x[b]}x!==null&&(i[m]=x)}for(const m in w)i[m]=w[m]}}}return i}const p1=t=>(e,n)=>{const s=v.useContext(Hl),i=v.useContext(Ul),r=()=>Jk(t,e,s,i);return n?r():Co(r)};function Sf(t,e,n){var r;const{style:s}=t,i={};for(const o in s)(Ge(s[o])||e.style&&Ge(e.style[o])||c1(o,t)||((r=n==null?void 0:n.getValue(o))==null?void 0:r.liveStyle)!==void 0)&&(i[o]=s[o]);return i}const eT=p1({scrapeMotionValuesFromProps:Sf,createRenderState:xf});function m1(t,e,n){const s=Sf(t,e,n);for(const i in t)if(Ge(t[i])||Ge(e[i])){const r=Fi.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;s[r]=t[i]}return s}const tT=p1({scrapeMotionValuesFromProps:m1,createRenderState:h1}),nT=Symbol.for("motionComponentSymbol");function ni(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function sT(t,e,n){return v.useCallback(s=>{s&&t.onMount&&t.onMount(s),e&&(s?e.mount(s):e.unmount()),n&&(typeof n=="function"?n(s):ni(n)&&(n.current=s))},[e])}const Cf=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),iT="framerAppearId",g1="data-"+Cf(iT),y1=v.createContext({});function rT(t,e,n,s,i){var w,C;const{visualElement:r}=v.useContext(Hl),o=v.useContext(o1),a=v.useContext(Ul),l=v.useContext(Wl).reducedMotion,c=v.useRef(null);s=s||o.renderer,!c.current&&s&&(c.current=s(t,{visualState:e,parent:r,props:n,presenceContext:a,blockInitialAnimation:a?a.initial===!1:!1,reducedMotionConfig:l}));const d=c.current,f=v.useContext(y1);d&&!d.projection&&i&&(d.type==="html"||d.type==="svg")&&oT(c.current,n,i,f);const h=v.useRef(!1);v.useInsertionEffect(()=>{d&&h.current&&d.update(n,a)});const p=n[g1],y=v.useRef(!!p&&!((w=window.MotionHandoffIsComplete)!=null&&w.call(window,p))&&((C=window.MotionHasOptimisedAnimation)==null?void 0:C.call(window,p)));return Yh(()=>{d&&(h.current=!0,window.MotionIsMounted=!0,d.updateFeatures(),d.scheduleRenderMicrotask(),y.current&&d.animationState&&d.animationState.animateChanges())}),v.useEffect(()=>{d&&(!y.current&&d.animationState&&d.animationState.animateChanges(),y.current&&(queueMicrotask(()=>{var g;(g=window.MotionHandoffMarkAsComplete)==null||g.call(window,p)}),y.current=!1),d.enteringChildren=void 0)}),d}function oT(t,e,n,s){const{layoutId:i,layout:r,drag:o,dragConstraints:a,layoutScroll:l,layoutRoot:c,layoutCrossfade:d}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:v1(t.parent)),t.projection.setOptions({layoutId:i,layout:r,alwaysMeasureLayout:!!o||a&&ni(a),visualElement:t,animationType:typeof r=="string"?r:"both",initialPromotionConfig:s,crossfade:d,layoutScroll:l,layoutRoot:c})}function v1(t){if(t)return t.options.allowProjection!==!1?t.projection:v1(t.parent)}function Hc(t,{forwardMotionProps:e=!1}={},n,s){n&&Ak(n);const i=wf(t)?tT:eT;function r(a,l){let c;const d={...v.useContext(Wl),...a,layoutId:aT(a)},{isStatic:f}=d,h=Ok(a),p=i(a,f);if(!f&&Gh){lT();const y=cT(d);c=y.MeasureLayout,h.visualElement=rT(t,p,d,s,y.ProjectionNode)}return u.jsxs(Hl.Provider,{value:h,children:[c&&h.visualElement?u.jsx(c,{visualElement:h.visualElement,...d}):null,Xk(t,a,sT(p,h.visualElement,l),p,f,e)]})}r.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const o=v.forwardRef(r);return o[nT]=t,o}function aT({layoutId:t}){const e=v.useContext(Kh).id;return e&&t!==void 0?e+"-"+t:t}function lT(t,e){v.useContext(o1).strict}function cT(t){const{drag:e,layout:n}=Ei;if(!e&&!n)return{};const s={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?s.MeasureLayout:void 0,ProjectionNode:s.ProjectionNode}}function uT(t,e){if(typeof Proxy>"u")return Hc;const n=new Map,s=(r,o)=>Hc(r,o,t,e),i=(r,o)=>s(r,o);return new Proxy(i,{get:(r,o)=>o==="create"?s:(n.has(o)||n.set(o,Hc(o,void 0,t,e)),n.get(o))})}function x1({top:t,left:e,right:n,bottom:s}){return{x:{min:e,max:n},y:{min:t,max:s}}}function dT({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function hT(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),s=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:s.y,right:s.x}}function Kc(t){return t===void 0||t===1}function vd({scale:t,scaleX:e,scaleY:n}){return!Kc(t)||!Kc(e)||!Kc(n)}function cs(t){return vd(t)||w1(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function w1(t){return Xm(t.x)||Xm(t.y)}function Xm(t){return t&&t!=="0%"}function il(t,e,n){const s=t-n,i=e*s;return n+i}function Jm(t,e,n,s,i){return i!==void 0&&(t=il(t,i,s)),il(t,n,s)+e}function xd(t,e=0,n=1,s,i){t.min=Jm(t.min,e,n,s,i),t.max=Jm(t.max,e,n,s,i)}function _1(t,{x:e,y:n}){xd(t.x,e.translate,e.scale,e.originPoint),xd(t.y,n.translate,n.scale,n.originPoint)}const Zm=.999999999999,eg=1.0000000000001;function fT(t,e,n,s=!1){const i=n.length;if(!i)return;e.x=e.y=1;let r,o;for(let a=0;a<i;a++){r=n[a],o=r.projectionDelta;const{visualElement:l}=r.options;l&&l.props.style&&l.props.style.display==="contents"||(s&&r.options.layoutScroll&&r.scroll&&r!==r.root&&ii(t,{x:-r.scroll.offset.x,y:-r.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,_1(t,o)),s&&cs(r.latestValues)&&ii(t,r.latestValues))}e.x<eg&&e.x>Zm&&(e.x=1),e.y<eg&&e.y>Zm&&(e.y=1)}function si(t,e){t.min=t.min+e,t.max=t.max+e}function tg(t,e,n,s,i=.5){const r=he(t.min,t.max,i);xd(t,e,n,r,s)}function ii(t,e){tg(t.x,e.x,e.scaleX,e.scale,e.originX),tg(t.y,e.y,e.scaleY,e.scale,e.originY)}function S1(t,e){return x1(hT(t.getBoundingClientRect(),e))}function pT(t,e,n){const s=S1(t,n),{scroll:i}=e;return i&&(si(s.x,i.offset.x),si(s.y,i.offset.y)),s}const ng=()=>({translate:0,scale:1,origin:0,originPoint:0}),ri=()=>({x:ng(),y:ng()}),sg=()=>({min:0,max:0}),_e=()=>({x:sg(),y:sg()}),wd={current:null},C1={current:!1};function mT(){if(C1.current=!0,!!Gh)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>wd.current=t.matches;t.addEventListener("change",e),e()}else wd.current=!1}const gT=new WeakMap;function yT(t,e,n){for(const s in e){const i=e[s],r=n[s];if(Ge(i))t.addValue(s,i);else if(Ge(r))t.addValue(s,ks(i,{owner:t}));else if(r!==i)if(t.hasValue(s)){const o=t.getValue(s);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=t.getStaticValue(s);t.addValue(s,ks(o!==void 0?o:i,{owner:t}))}}for(const s in n)e[s]===void 0&&t.removeValue(s);return e}const ig=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class vT{scrapeMotionValuesFromProps(e,n,s){return{}}constructor({parent:e,props:n,presenceContext:s,reducedMotionConfig:i,blockInitialAnimation:r,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=df,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const h=at.now();this.renderScheduledAt<h&&(this.renderScheduledAt=h,ce.render(this.render,!1,!0))};const{latestValues:l,renderState:c}=o;this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=c,this.parent=e,this.props=n,this.presenceContext=s,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=a,this.blockInitialAnimation=!!r,this.isControllingVariants=Gl(n),this.isVariantNode=l1(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:d,...f}=this.scrapeMotionValuesFromProps(n,{},this);for(const h in f){const p=f[h];l[h]!==void 0&&Ge(p)&&p.set(l[h])}}mount(e){var n;this.current=e,gT.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((s,i)=>this.bindToMotionValue(i,s)),C1.current||mT(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:wd.current,(n=this.parent)==null||n.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var e;this.projection&&this.projection.unmount(),_n(this.notifyUpdate),_n(this.render),this.valueSubscriptions.forEach(n=>n()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(e=this.parent)==null||e.removeChild(this);for(const n in this.events)this.events[n].clear();for(const n in this.features){const s=this.features[n];s&&(s.unmount(),s.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const s=Oi.has(e);s&&this.onBindTransform&&this.onBindTransform();const i=n.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&ce.preRender(this.notifyUpdate),s&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let r;window.MotionCheckAppearSync&&(r=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),r&&r(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Ei){const n=Ei[e];if(!n)continue;const{isEnabled:s,Feature:i}=n;if(!this.features[e]&&i&&s(this.props)&&(this.features[e]=new i(this)),this.features[e]){const r=this.features[e];r.isMounted?r.update():(r.mount(),r.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):_e()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let s=0;s<ig.length;s++){const i=ig[s];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const r="on"+i,o=e[r];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=yT(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const s=this.values.get(e);n!==s&&(s&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let s=this.values.get(e);return s===void 0&&n!==void 0&&(s=ks(n===null?void 0:n,{owner:this}),this.addValue(e,s)),s}readValue(e,n){let s=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return s!=null&&(typeof s=="string"&&(px(s)||gx(s))?s=parseFloat(s):!Tk(s)&&Xn.test(n)&&(s=Jx(e,n)),this.setBaseTarget(e,Ge(s)?s.get():s)),Ge(s)?s.get():s}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var r;const{initial:n}=this.props;let s;if(typeof n=="string"||typeof n=="object"){const o=_f(this.props,n,(r=this.presenceContext)==null?void 0:r.custom);o&&(s=o[e])}if(n&&s!==void 0)return s;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!Ge(i)?i:this.initialValues[e]!==void 0&&s===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new Jh),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){pf.render(this.render)}}class E1 extends vT{constructor(){super(...arguments),this.KeyframeResolver=mk}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:s}){delete n[e],delete s[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Ge(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function b1(t,{style:e,vars:n},s,i){const r=t.style;let o;for(o in e)r[o]=e[o];i==null||i.applyProjectionStyles(r,s);for(o in n)r.setProperty(o,n[o])}function xT(t){return window.getComputedStyle(t)}class wT extends E1{constructor(){super(...arguments),this.type="html",this.renderInstance=b1}readValueFromInstance(e,n){var s;if(Oi.has(n))return(s=this.projection)!=null&&s.isProjecting?dd(n):DN(e,n);{const i=xT(e),r=(tf(n)?i.getPropertyValue(n):i[n])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(e,{transformPagePoint:n}){return S1(e,n)}build(e,n,s){vf(e,n,s.transformTemplate)}scrapeMotionValuesFromProps(e,n,s){return Sf(e,n,s)}}const N1=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function _T(t,e,n,s){b1(t,e,void 0,s);for(const i in e.attrs)t.setAttribute(N1.has(i)?i:Cf(i),e.attrs[i])}class ST extends E1{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=_e}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Oi.has(n)){const s=Xx(n);return s&&s.default||0}return n=N1.has(n)?n:Cf(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,s){return m1(e,n,s)}build(e,n,s){d1(e,n,this.isSVGTag,s.transformTemplate,s.style)}renderInstance(e,n,s,i){_T(e,n,s,i)}mount(e){this.isSVGTag=f1(e.tagName),super.mount(e)}}const CT=(t,e)=>wf(t)?new ST(e):new wT(e,{allowProjection:t!==v.Fragment});function fi(t,e,n){const s=t.getProps();return _f(s,e,n!==void 0?n:s.custom,t)}const _d=t=>Array.isArray(t);function ET(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,ks(n))}function bT(t){return _d(t)?t[t.length-1]||0:t}function NT(t,e){const n=fi(t,e);let{transitionEnd:s={},transition:i={},...r}=n||{};r={...r,...s};for(const o in r){const a=bT(r[o]);ET(t,o,a)}}function kT(t){return!!(Ge(t)&&t.add)}function Sd(t,e){const n=t.getValue("willChange");if(kT(n))return n.add(e);if(!n&&wn.WillChange){const s=new wn.WillChange("auto");t.addValue("willChange",s),s.add(e)}}function k1(t){return t.props[g1]}const TT=t=>t!==null;function jT(t,{repeat:e,repeatType:n="loop"},s){const i=t.filter(TT),r=e&&n!=="loop"&&e%2===1?0:i.length-1;return!r||s===void 0?i[r]:s}const PT={type:"spring",stiffness:500,damping:25,restSpeed:10},RT=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),IT={type:"keyframes",duration:.8},AT={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},DT=(t,{keyframes:e})=>e.length>2?IT:Oi.has(t)?t.startsWith("scale")?RT(e[1]):PT:AT;function MT({when:t,delay:e,delayChildren:n,staggerChildren:s,staggerDirection:i,repeat:r,repeatType:o,repeatDelay:a,from:l,elapsed:c,...d}){return!!Object.keys(d).length}const Ef=(t,e,n,s={},i,r)=>o=>{const a=hf(s,t)||{},l=a.delay||s.delay||0;let{elapsed:c=0}=s;c=c-Xt(l);const d={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...a,delay:-c,onUpdate:h=>{e.set(h),a.onUpdate&&a.onUpdate(h)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:t,motionValue:e,element:r?void 0:i};MT(a)||Object.assign(d,DT(t,d)),d.duration&&(d.duration=Xt(d.duration)),d.repeatDelay&&(d.repeatDelay=Xt(d.repeatDelay)),d.from!==void 0&&(d.keyframes[0]=d.from);let f=!1;if((d.type===!1||d.duration===0&&!d.repeatDelay)&&(gd(d),d.delay===0&&(f=!0)),(wn.instantAnimations||wn.skipAnimations)&&(f=!0,gd(d),d.delay=0),d.allowFlatten=!a.type&&!a.ease,f&&!r&&e.get()!==void 0){const h=jT(d.keyframes,a);if(h!==void 0){ce.update(()=>{d.onUpdate(h),d.onComplete()});return}}return a.isSync?new uf(d):new sk(d)};function LT({protectedKeys:t,needsAnimating:e},n){const s=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,s}function T1(t,e,{delay:n=0,transitionOverride:s,type:i}={}){let{transition:r=t.getDefaultTransition(),transitionEnd:o,...a}=e;s&&(r=s);const l=[],c=i&&t.animationState&&t.animationState.getState()[i];for(const d in a){const f=t.getValue(d,t.latestValues[d]??null),h=a[d];if(h===void 0||c&&LT(c,d))continue;const p={delay:n,...hf(r||{},d)},y=f.get();if(y!==void 0&&!f.isAnimating&&!Array.isArray(h)&&h===y&&!p.velocity)continue;let w=!1;if(window.MotionHandoffAnimation){const g=k1(t);if(g){const m=window.MotionHandoffAnimation(g,d,ce);m!==null&&(p.startTime=m,w=!0)}}Sd(t,d),f.start(Ef(d,f,h,t.shouldReduceMotion&&Yx.has(d)?{type:!1}:p,t,w));const C=f.animation;C&&l.push(C)}return o&&Promise.all(l).then(()=>{ce.update(()=>{o&&NT(t,o)})}),l}function j1(t,e,n,s=0,i=1){const r=Array.from(t).sort((c,d)=>c.sortNodePosition(d)).indexOf(e),o=t.size,a=(o-1)*s;return typeof n=="function"?n(r,o):i===1?r*s:a-r*s}function Cd(t,e,n={}){var l;const s=fi(t,e,n.type==="exit"?(l=t.presenceContext)==null?void 0:l.custom:void 0);let{transition:i=t.getDefaultTransition()||{}}=s||{};n.transitionOverride&&(i=n.transitionOverride);const r=s?()=>Promise.all(T1(t,s,n)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(c=0)=>{const{delayChildren:d=0,staggerChildren:f,staggerDirection:h}=i;return FT(t,e,c,d,f,h,n)}:()=>Promise.resolve(),{when:a}=i;if(a){const[c,d]=a==="beforeChildren"?[r,o]:[o,r];return c().then(()=>d())}else return Promise.all([r(),o(n.delay)])}function FT(t,e,n=0,s=0,i=0,r=1,o){const a=[];for(const l of t.variantChildren)l.notify("AnimationStart",e),a.push(Cd(l,e,{...o,delay:n+(typeof s=="function"?0:s)+j1(t.variantChildren,l,s,i,r)}).then(()=>l.notify("AnimationComplete",e)));return Promise.all(a)}function OT(t,e,n={}){t.notify("AnimationStart",e);let s;if(Array.isArray(e)){const i=e.map(r=>Cd(t,r,n));s=Promise.all(i)}else if(typeof e=="string")s=Cd(t,e,n);else{const i=typeof e=="function"?fi(t,e,n.custom):e;s=Promise.all(T1(t,i,n))}return s.then(()=>{t.notify("AnimationComplete",e)})}function P1(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let s=0;s<n;s++)if(e[s]!==t[s])return!1;return!0}const VT=yf.length;function R1(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?R1(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<VT;n++){const s=yf[n],i=t.props[s];(Jr(i)||i===!1)&&(e[s]=i)}return e}const zT=[...gf].reverse(),BT=gf.length;function $T(t){return e=>Promise.all(e.map(({animation:n,options:s})=>OT(t,n,s)))}function UT(t){let e=$T(t),n=rg(),s=!0;const i=l=>(c,d)=>{var h;const f=fi(t,d,l==="exit"?(h=t.presenceContext)==null?void 0:h.custom:void 0);if(f){const{transition:p,transitionEnd:y,...w}=f;c={...c,...w,...y}}return c};function r(l){e=l(t)}function o(l){const{props:c}=t,d=R1(t.parent)||{},f=[],h=new Set;let p={},y=1/0;for(let C=0;C<BT;C++){const g=zT[C],m=n[g],x=c[g]!==void 0?c[g]:d[g],b=Jr(x),S=g===l?m.isActive:null;S===!1&&(y=C);let T=x===d[g]&&x!==c[g]&&b;if(T&&s&&t.manuallyAnimateOnMount&&(T=!1),m.protectedKeys={...p},!m.isActive&&S===null||!x&&!m.prevProp||Kl(x)||typeof x=="boolean")continue;const E=WT(m.prevProp,x);let _=E||g===l&&m.isActive&&!T&&b||C>y&&b,k=!1;const N=Array.isArray(x)?x:[x];let P=N.reduce(i(g),{});S===!1&&(P={});const{prevResolvedValues:$={}}=m,M={...$,...P},ge=ne=>{_=!0,h.has(ne)&&(k=!0,h.delete(ne)),m.needsAnimating[ne]=!0;const D=t.getValue(ne);D&&(D.liveStyle=!1)};for(const ne in M){const D=P[ne],R=$[ne];if(p.hasOwnProperty(ne))continue;let L=!1;_d(D)&&_d(R)?L=!P1(D,R):L=D!==R,L?D!=null?ge(ne):h.add(ne):D!==void 0&&h.has(ne)?ge(ne):m.protectedKeys[ne]=!0}m.prevProp=x,m.prevResolvedValues=P,m.isActive&&(p={...p,...P}),s&&t.blockInitialAnimation&&(_=!1);const Qe=T&&E;_&&(!Qe||k)&&f.push(...N.map(ne=>{const D={type:g};if(typeof ne=="string"&&s&&!Qe&&t.manuallyAnimateOnMount&&t.parent){const{parent:R}=t,L=fi(R,ne);if(R.enteringChildren&&L){const{delayChildren:z}=L.transition||{};D.delay=j1(R.enteringChildren,t,z)}}return{animation:ne,options:D}}))}if(h.size){const C={};if(typeof c.initial!="boolean"){const g=fi(t,Array.isArray(c.initial)?c.initial[0]:c.initial);g&&g.transition&&(C.transition=g.transition)}h.forEach(g=>{const m=t.getBaseTarget(g),x=t.getValue(g);x&&(x.liveStyle=!0),C[g]=m??null}),f.push({animation:C})}let w=!!f.length;return s&&(c.initial===!1||c.initial===c.animate)&&!t.manuallyAnimateOnMount&&(w=!1),s=!1,w?e(f):Promise.resolve()}function a(l,c){var f;if(n[l].isActive===c)return Promise.resolve();(f=t.variantChildren)==null||f.forEach(h=>{var p;return(p=h.animationState)==null?void 0:p.setActive(l,c)}),n[l].isActive=c;const d=o(l);for(const h in n)n[h].protectedKeys={};return d}return{animateChanges:o,setActive:a,setAnimateFunction:r,getState:()=>n,reset:()=>{n=rg(),s=!0}}}function WT(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!P1(e,t):!1}function os(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function rg(){return{animate:os(!0),whileInView:os(),whileHover:os(),whileTap:os(),whileDrag:os(),whileFocus:os(),exit:os()}}class is{constructor(e){this.isMounted=!1,this.node=e}update(){}}class HT extends is{constructor(e){super(e),e.animationState||(e.animationState=UT(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Kl(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let KT=0;class GT extends is{constructor(){super(...arguments),this.id=KT++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===s)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const YT={animation:{Feature:HT},exit:{Feature:GT}};function eo(t,e,n,s={passive:!0}){return t.addEventListener(e,n,s),()=>t.removeEventListener(e,n)}function ko(t){return{point:{x:t.pageX,y:t.pageY}}}const QT=t=>e=>mf(e)&&t(e,ko(e));function Sr(t,e,n,s){return eo(t,e,QT(n),s)}const I1=1e-4,qT=1-I1,XT=1+I1,A1=.01,JT=0-A1,ZT=0+A1;function Ze(t){return t.max-t.min}function e2(t,e,n){return Math.abs(t-e)<=n}function og(t,e,n,s=.5){t.origin=s,t.originPoint=he(e.min,e.max,t.origin),t.scale=Ze(n)/Ze(e),t.translate=he(n.min,n.max,t.origin)-t.originPoint,(t.scale>=qT&&t.scale<=XT||isNaN(t.scale))&&(t.scale=1),(t.translate>=JT&&t.translate<=ZT||isNaN(t.translate))&&(t.translate=0)}function Cr(t,e,n,s){og(t.x,e.x,n.x,s?s.originX:void 0),og(t.y,e.y,n.y,s?s.originY:void 0)}function ag(t,e,n){t.min=n.min+e.min,t.max=t.min+Ze(e)}function t2(t,e,n){ag(t.x,e.x,n.x),ag(t.y,e.y,n.y)}function lg(t,e,n){t.min=e.min-n.min,t.max=t.min+Ze(e)}function Er(t,e,n){lg(t.x,e.x,n.x),lg(t.y,e.y,n.y)}function St(t){return[t("x"),t("y")]}const D1=({current:t})=>t?t.ownerDocument.defaultView:null,cg=(t,e)=>Math.abs(t-e);function n2(t,e){const n=cg(t.x,e.x),s=cg(t.y,e.y);return Math.sqrt(n**2+s**2)}class M1{constructor(e,n,{transformPagePoint:s,contextWindow:i=window,dragSnapToOrigin:r=!1,distanceThreshold:o=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const h=Yc(this.lastMoveEventInfo,this.history),p=this.startEvent!==null,y=n2(h.offset,{x:0,y:0})>=this.distanceThreshold;if(!p&&!y)return;const{point:w}=h,{timestamp:C}=Ve;this.history.push({...w,timestamp:C});const{onStart:g,onMove:m}=this.handlers;p||(g&&g(this.lastMoveEvent,h),this.startEvent=this.lastMoveEvent),m&&m(this.lastMoveEvent,h)},this.handlePointerMove=(h,p)=>{this.lastMoveEvent=h,this.lastMoveEventInfo=Gc(p,this.transformPagePoint),ce.update(this.updatePoint,!0)},this.handlePointerUp=(h,p)=>{this.end();const{onEnd:y,onSessionEnd:w,resumeAnimation:C}=this.handlers;if(this.dragSnapToOrigin&&C&&C(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const g=Yc(h.type==="pointercancel"?this.lastMoveEventInfo:Gc(p,this.transformPagePoint),this.history);this.startEvent&&y&&y(h,g),w&&w(h,g)},!mf(e))return;this.dragSnapToOrigin=r,this.handlers=n,this.transformPagePoint=s,this.distanceThreshold=o,this.contextWindow=i||window;const a=ko(e),l=Gc(a,this.transformPagePoint),{point:c}=l,{timestamp:d}=Ve;this.history=[{...c,timestamp:d}];const{onSessionStart:f}=n;f&&f(e,Yc(l,this.history)),this.removeListeners=Eo(Sr(this.contextWindow,"pointermove",this.handlePointerMove),Sr(this.contextWindow,"pointerup",this.handlePointerUp),Sr(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),_n(this.updatePoint)}}function Gc(t,e){return e?{point:e(t.point)}:t}function ug(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Yc({point:t},e){return{point:t,delta:ug(t,L1(e)),offset:ug(t,s2(e)),velocity:i2(e,.1)}}function s2(t){return t[0]}function L1(t){return t[t.length-1]}function i2(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,s=null;const i=L1(t);for(;n>=0&&(s=t[n],!(i.timestamp-s.timestamp>Xt(e)));)n--;if(!s)return{x:0,y:0};const r=Jt(i.timestamp-s.timestamp);if(r===0)return{x:0,y:0};const o={x:(i.x-s.x)/r,y:(i.y-s.y)/r};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function r2(t,{min:e,max:n},s){return e!==void 0&&t<e?t=s?he(e,t,s.min):Math.max(t,e):n!==void 0&&t>n&&(t=s?he(n,t,s.max):Math.min(t,n)),t}function dg(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function o2(t,{top:e,left:n,bottom:s,right:i}){return{x:dg(t.x,n,i),y:dg(t.y,e,s)}}function hg(t,e){let n=e.min-t.min,s=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,s]=[s,n]),{min:n,max:s}}function a2(t,e){return{x:hg(t.x,e.x),y:hg(t.y,e.y)}}function l2(t,e){let n=.5;const s=Ze(t),i=Ze(e);return i>s?n=Qr(e.min,e.max-s,t.min):s>i&&(n=Qr(t.min,t.max-i,e.min)),xn(0,1,n)}function c2(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const Ed=.35;function u2(t=Ed){return t===!1?t=0:t===!0&&(t=Ed),{x:fg(t,"left","right"),y:fg(t,"top","bottom")}}function fg(t,e,n){return{min:pg(t,e),max:pg(t,n)}}function pg(t,e){return typeof t=="number"?t:t[e]||0}const d2=new WeakMap;class h2{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=_e(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:s}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const r=f=>{const{dragSnapToOrigin:h}=this.getProps();h?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(ko(f).point)},o=(f,h)=>{const{drag:p,dragPropagation:y,onDragStart:w}=this.getProps();if(p&&!y&&(this.openDragLock&&this.openDragLock(),this.openDragLock=xk(p),!this.openDragLock))return;this.latestPointerEvent=f,this.latestPanInfo=h,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),St(g=>{let m=this.getAxisMotionValue(g).get()||0;if(Zt.test(m)){const{projection:x}=this.visualElement;if(x&&x.layout){const b=x.layout.layoutBox[g];b&&(m=Ze(b)*(parseFloat(m)/100))}}this.originPoint[g]=m}),w&&ce.postRender(()=>w(f,h)),Sd(this.visualElement,"transform");const{animationState:C}=this.visualElement;C&&C.setActive("whileDrag",!0)},a=(f,h)=>{this.latestPointerEvent=f,this.latestPanInfo=h;const{dragPropagation:p,dragDirectionLock:y,onDirectionLock:w,onDrag:C}=this.getProps();if(!p&&!this.openDragLock)return;const{offset:g}=h;if(y&&this.currentDirection===null){this.currentDirection=f2(g),this.currentDirection!==null&&w&&w(this.currentDirection);return}this.updateAxis("x",h.point,g),this.updateAxis("y",h.point,g),this.visualElement.render(),C&&C(f,h)},l=(f,h)=>{this.latestPointerEvent=f,this.latestPanInfo=h,this.stop(f,h),this.latestPointerEvent=null,this.latestPanInfo=null},c=()=>St(f=>{var h;return this.getAnimationState(f)==="paused"&&((h=this.getAxisMotionValue(f).animation)==null?void 0:h.play())}),{dragSnapToOrigin:d}=this.getProps();this.panSession=new M1(e,{onSessionStart:r,onStart:o,onMove:a,onSessionEnd:l,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:d,distanceThreshold:s,contextWindow:D1(this.visualElement)})}stop(e,n){const s=e||this.latestPointerEvent,i=n||this.latestPanInfo,r=this.isDragging;if(this.cancel(),!r||!i||!s)return;const{velocity:o}=i;this.startAnimation(o);const{onDragEnd:a}=this.getProps();a&&ce.postRender(()=>a(s,i))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:s}=this.getProps();!s&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,s){const{drag:i}=this.getProps();if(!s||!ra(e,i,this.currentDirection))return;const r=this.getAxisMotionValue(e);let o=this.originPoint[e]+s[e];this.constraints&&this.constraints[e]&&(o=r2(o,this.constraints[e],this.elastic[e])),r.set(o)}resolveConstraints(){var r;const{dragConstraints:e,dragElastic:n}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(r=this.visualElement.projection)==null?void 0:r.layout,i=this.constraints;e&&ni(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&s?this.constraints=o2(s.layoutBox,e):this.constraints=!1,this.elastic=u2(n),i!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&St(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=c2(s.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!ni(e))return!1;const s=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const r=pT(s,i.root,this.visualElement.getTransformPagePoint());let o=a2(i.layout.layoutBox,r);if(n){const a=n(dT(o));this.hasMutatedConstraints=!!a,a&&(o=x1(a))}return o}startAnimation(e){const{drag:n,dragMomentum:s,dragElastic:i,dragTransition:r,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},c=St(d=>{if(!ra(d,n,this.currentDirection))return;let f=l&&l[d]||{};o&&(f={min:0,max:0});const h=i?200:1e6,p=i?40:1e7,y={type:"inertia",velocity:s?e[d]:0,bounceStiffness:h,bounceDamping:p,timeConstant:750,restDelta:1,restSpeed:10,...r,...f};return this.startAxisValueAnimation(d,y)});return Promise.all(c).then(a)}startAxisValueAnimation(e,n){const s=this.getAxisMotionValue(e);return Sd(this.visualElement,e),s.start(Ef(e,s,0,n,this.visualElement,!1))}stopAnimation(){St(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){St(e=>{var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,s=this.visualElement.getProps(),i=s[n];return i||this.visualElement.getValue(e,(s.initial?s.initial[e]:void 0)||0)}snapToCursor(e){St(n=>{const{drag:s}=this.getProps();if(!ra(n,s,this.currentDirection))return;const{projection:i}=this.visualElement,r=this.getAxisMotionValue(n);if(i&&i.layout){const{min:o,max:a}=i.layout.layoutBox[n];r.set(e[n]-he(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:s}=this.visualElement;if(!ni(n)||!s||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};St(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const l=a.get();i[o]=l2({min:l,max:l},this.constraints[o])}});const{transformTemplate:r}=this.visualElement.getProps();this.visualElement.current.style.transform=r?r({},""):"none",s.root&&s.root.updateScroll(),s.updateLayout(),this.resolveConstraints(),St(o=>{if(!ra(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:c}=this.constraints[o];a.set(he(l,c,i[o]))})}addListeners(){if(!this.visualElement.current)return;d2.set(this.visualElement,this);const e=this.visualElement.current,n=Sr(e,"pointerdown",l=>{const{drag:c,dragListener:d=!0}=this.getProps();c&&d&&this.start(l)}),s=()=>{const{dragConstraints:l}=this.getProps();ni(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,r=i.addEventListener("measure",s);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),ce.read(s);const o=eo(window,"resize",()=>this.scalePositionWithinConstraints()),a=i.addEventListener("didUpdate",({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(St(d=>{const f=this.getAxisMotionValue(d);f&&(this.originPoint[d]+=l[d].translate,f.set(f.get()+l[d].translate))}),this.visualElement.render())});return()=>{o(),n(),r(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:s=!1,dragPropagation:i=!1,dragConstraints:r=!1,dragElastic:o=Ed,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:s,dragPropagation:i,dragConstraints:r,dragElastic:o,dragMomentum:a}}}function ra(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function f2(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class p2 extends is{constructor(e){super(e),this.removeGroupControls=Tt,this.removeListeners=Tt,this.controls=new h2(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Tt}unmount(){this.removeGroupControls(),this.removeListeners()}}const mg=t=>(e,n)=>{t&&ce.postRender(()=>t(e,n))};class m2 extends is{constructor(){super(...arguments),this.removePointerDownListener=Tt}onPointerDown(e){this.session=new M1(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:D1(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:s,onPanEnd:i}=this.node.getProps();return{onSessionStart:mg(e),onStart:mg(n),onMove:s,onEnd:(r,o)=>{delete this.session,i&&ce.postRender(()=>i(r,o))}}}mount(){this.removePointerDownListener=Sr(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Na={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function gg(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Zi={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(V.test(t))t=parseFloat(t);else return t;const n=gg(t,e.target.x),s=gg(t,e.target.y);return`${n}% ${s}%`}},g2={correct:(t,{treeScale:e,projectionDelta:n})=>{const s=t,i=Xn.parse(t);if(i.length>5)return s;const r=Xn.createTransformer(t),o=typeof i[0]!="number"?1:0,a=n.x.scale*e.x,l=n.y.scale*e.y;i[0+o]/=a,i[1+o]/=l;const c=he(a,l,.5);return typeof i[2+o]=="number"&&(i[2+o]/=c),typeof i[3+o]=="number"&&(i[3+o]/=c),r(i)}};let Qc=!1;class y2 extends v.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:s,layoutId:i}=this.props,{projection:r}=e;Vk(v2),r&&(n.group&&n.group.add(r),s&&s.register&&i&&s.register(r),Qc&&r.root.didUpdate(),r.addEventListener("animationComplete",()=>{this.safeToRemove()}),r.setOptions({...r.options,onExitComplete:()=>this.safeToRemove()})),Na.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:s,drag:i,isPresent:r}=this.props,{projection:o}=s;return o&&(o.isPresent=r,Qc=!0,i||e.layoutDependency!==n||n===void 0||e.isPresent!==r?o.willUpdate():this.safeToRemove(),e.isPresent!==r&&(r?o.promote():o.relegate()||ce.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),pf.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:s}=this.props,{projection:i}=e;Qc=!0,i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),s&&s.deregister&&s.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function F1(t){const[e,n]=r1(),s=v.useContext(Kh);return u.jsx(y2,{...t,layoutGroup:s,switchLayoutGroup:v.useContext(y1),isPresent:e,safeToRemove:n})}const v2={borderRadius:{...Zi,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Zi,borderTopRightRadius:Zi,borderBottomLeftRadius:Zi,borderBottomRightRadius:Zi,boxShadow:g2};function x2(t,e,n){const s=Ge(t)?t:ks(t);return s.start(Ef("",s,e,n)),s.animation}const w2=(t,e)=>t.depth-e.depth;class _2{constructor(){this.children=[],this.isDirty=!1}add(e){Qh(this.children,e),this.isDirty=!0}remove(e){qh(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(w2),this.isDirty=!1,this.children.forEach(e)}}function S2(t,e){const n=at.now(),s=({timestamp:i})=>{const r=i-n;r>=e&&(_n(s),t(r-e))};return ce.setup(s,!0),()=>_n(s)}const O1=["TopLeft","TopRight","BottomLeft","BottomRight"],C2=O1.length,yg=t=>typeof t=="string"?parseFloat(t):t,vg=t=>typeof t=="number"||V.test(t);function E2(t,e,n,s,i,r){i?(t.opacity=he(0,n.opacity??1,b2(s)),t.opacityExit=he(e.opacity??1,0,N2(s))):r&&(t.opacity=he(e.opacity??1,n.opacity??1,s));for(let o=0;o<C2;o++){const a=`border${O1[o]}Radius`;let l=xg(e,a),c=xg(n,a);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||vg(l)===vg(c)?(t[a]=Math.max(he(yg(l),yg(c),s),0),(Zt.test(c)||Zt.test(l))&&(t[a]+="%")):t[a]=c}(e.rotate||n.rotate)&&(t.rotate=he(e.rotate||0,n.rotate||0,s))}function xg(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const b2=V1(0,.5,Ex),N2=V1(.5,.95,Tt);function V1(t,e,n){return s=>s<t?0:s>e?1:n(Qr(t,e,s))}function wg(t,e){t.min=e.min,t.max=e.max}function _t(t,e){wg(t.x,e.x),wg(t.y,e.y)}function _g(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function Sg(t,e,n,s,i){return t-=e,t=il(t,1/n,s),i!==void 0&&(t=il(t,1/i,s)),t}function k2(t,e=0,n=1,s=.5,i,r=t,o=t){if(Zt.test(e)&&(e=parseFloat(e),e=he(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=he(r.min,r.max,s);t===r&&(a-=e),t.min=Sg(t.min,e,n,a,i),t.max=Sg(t.max,e,n,a,i)}function Cg(t,e,[n,s,i],r,o){k2(t,e[n],e[s],e[i],e.scale,r,o)}const T2=["x","scaleX","originX"],j2=["y","scaleY","originY"];function Eg(t,e,n,s){Cg(t.x,e,T2,n?n.x:void 0,s?s.x:void 0),Cg(t.y,e,j2,n?n.y:void 0,s?s.y:void 0)}function bg(t){return t.translate===0&&t.scale===1}function z1(t){return bg(t.x)&&bg(t.y)}function Ng(t,e){return t.min===e.min&&t.max===e.max}function P2(t,e){return Ng(t.x,e.x)&&Ng(t.y,e.y)}function kg(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function B1(t,e){return kg(t.x,e.x)&&kg(t.y,e.y)}function Tg(t){return Ze(t.x)/Ze(t.y)}function jg(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class R2{constructor(){this.members=[]}add(e){Qh(this.members,e),e.scheduleRender()}remove(e){if(qh(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let s;for(let i=n;i>=0;i--){const r=this.members[i];if(r.isPresent!==!1){s=r;break}}return s?(this.promote(s),!0):!1}promote(e,n){const s=this.lead;if(e!==s&&(this.prevLead=s,this.lead=e,e.show(),s)){s.instance&&s.scheduleRender(),e.scheduleRender(),e.resumeFrom=s,n&&(e.resumeFrom.preserveOpacity=!0),s.snapshot&&(e.snapshot=s.snapshot,e.snapshot.latestValues=s.animationValues||s.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&s.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:s}=e;n.onExitComplete&&n.onExitComplete(),s&&s.options.onExitComplete&&s.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function I2(t,e,n){let s="";const i=t.x.translate/e.x,r=t.y.translate/e.y,o=(n==null?void 0:n.z)||0;if((i||r||o)&&(s=`translate3d(${i}px, ${r}px, ${o}px) `),(e.x!==1||e.y!==1)&&(s+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:c,rotate:d,rotateX:f,rotateY:h,skewX:p,skewY:y}=n;c&&(s=`perspective(${c}px) ${s}`),d&&(s+=`rotate(${d}deg) `),f&&(s+=`rotateX(${f}deg) `),h&&(s+=`rotateY(${h}deg) `),p&&(s+=`skewX(${p}deg) `),y&&(s+=`skewY(${y}deg) `)}const a=t.x.scale*e.x,l=t.y.scale*e.y;return(a!==1||l!==1)&&(s+=`scale(${a}, ${l})`),s||"none"}const qc=["","X","Y","Z"],A2=1e3;let D2=0;function Xc(t,e,n,s){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),s&&(s[t]=0))}function $1(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=k1(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:r}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",ce,!(i||r))}const{parent:s}=t;s&&!s.hasCheckedOptimisedAppear&&$1(s)}function U1({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:s,resetTransform:i}){return class{constructor(o={},a=e==null?void 0:e()){this.id=D2++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(F2),this.nodes.forEach(B2),this.nodes.forEach($2),this.nodes.forEach(O2)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new _2)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new Jh),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=i1(o)&&!bk(o),this.instance=o;const{layoutId:a,layout:l,visualElement:c}=this.options;if(c&&!c.current&&c.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(l||a)&&(this.isLayoutDirty=!0),t){let d,f=0;const h=()=>this.root.updateBlockedByResize=!1;ce.read(()=>{f=window.innerWidth}),t(o,()=>{const p=window.innerWidth;p!==f&&(f=p,this.root.updateBlockedByResize=!0,d&&d(),d=S2(h,250),Na.hasAnimatedSinceResize&&(Na.hasAnimatedSinceResize=!1,this.nodes.forEach(Ig)))})}a&&this.root.registerSharedNode(a,this),this.options.animate!==!1&&c&&(a||l)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:f,hasRelativeLayoutChanged:h,layout:p})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const y=this.options.transition||c.getDefaultTransition()||G2,{onLayoutAnimationStart:w,onLayoutAnimationComplete:C}=c.getProps(),g=!this.targetLayout||!B1(this.targetLayout,p),m=!f&&h;if(this.options.layoutRoot||this.resumeFrom||m||f&&(g||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const x={...hf(y,"layout"),onPlay:w,onComplete:C};(c.shouldReduceMotion||this.options.layoutRoot)&&(x.delay=0,x.type=!1),this.startAnimation(x),this.setAnimationOrigin(d,m)}else f||Ig(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=p})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),_n(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(U2),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&$1(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const f=this.path[d];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Pg);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(Rg);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(z2),this.nodes.forEach(M2),this.nodes.forEach(L2)):this.nodes.forEach(Rg),this.clearAllSnapshots();const a=at.now();Ve.delta=xn(0,1e3/60,a-Ve.timestamp),Ve.timestamp=a,Ve.isProcessing=!0,Vc.update.process(Ve),Vc.preRender.process(Ve),Vc.render.process(Ve),Ve.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,pf.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(V2),this.sharedNodes.forEach(W2)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ce.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ce.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Ze(this.snapshot.measuredBox.x)&&!Ze(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=_e(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&this.instance){const l=s(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!z1(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,d=c!==this.prevTransformTemplateValue;o&&this.instance&&(a||cs(this.latestValues)||d)&&(i(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),Y2(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var c;const{visualElement:o}=this.options;if(!o)return _e();const a=o.measureViewportBox();if(!(((c=this.scroll)==null?void 0:c.wasRoot)||this.path.some(Q2))){const{scroll:d}=this.root;d&&(si(a.x,d.offset.x),si(a.y,d.offset.y))}return a}removeElementScroll(o){var l;const a=_e();if(_t(a,o),(l=this.scroll)!=null&&l.wasRoot)return a;for(let c=0;c<this.path.length;c++){const d=this.path[c],{scroll:f,options:h}=d;d!==this.root&&f&&h.layoutScroll&&(f.wasRoot&&_t(a,o),si(a.x,f.offset.x),si(a.y,f.offset.y))}return a}applyTransform(o,a=!1){const l=_e();_t(l,o);for(let c=0;c<this.path.length;c++){const d=this.path[c];!a&&d.options.layoutScroll&&d.scroll&&d!==d.root&&ii(l,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),cs(d.latestValues)&&ii(l,d.latestValues)}return cs(this.latestValues)&&ii(l,this.latestValues),l}removeTransform(o){const a=_e();_t(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!cs(c.latestValues))continue;vd(c.latestValues)&&c.updateSnapshot();const d=_e(),f=c.measurePageBox();_t(d,f),Eg(a,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,d)}return cs(this.latestValues)&&Eg(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Ve.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var h;const a=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=a.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=a.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=a.isSharedProjectionDirty);const l=!!this.resumingFrom||this!==a;if(!(o||l&&this.isSharedProjectionDirty||this.isProjectionDirty||(h=this.parent)!=null&&h.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:f}=this.options;if(!(!this.layout||!(d||f))){if(this.resolvedRelativeTargetAt=Ve.timestamp,!this.targetDelta&&!this.relativeTarget){const p=this.getClosestProjectingParent();p&&p.layout&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=_e(),this.relativeTargetOrigin=_e(),Er(this.relativeTargetOrigin,this.layout.layoutBox,p.layout.layoutBox),_t(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=_e(),this.targetWithTransforms=_e()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),t2(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):_t(this.target,this.layout.layoutBox),_1(this.target,this.targetDelta)):_t(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const p=this.getClosestProjectingParent();p&&!!p.resumingFrom==!!this.resumingFrom&&!p.options.layoutScroll&&p.target&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=_e(),this.relativeTargetOrigin=_e(),Er(this.relativeTargetOrigin,this.target,p.target),_t(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||vd(this.parent.latestValues)||w1(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var y;const o=this.getLead(),a=!!this.resumingFrom||this!==o;let l=!0;if((this.isProjectionDirty||(y=this.parent)!=null&&y.isProjectionDirty)&&(l=!1),a&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(l=!1),this.resolvedRelativeTargetAt===Ve.timestamp&&(l=!1),l)return;const{layout:c,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(c||d))return;_t(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,h=this.treeScale.y;fT(this.layoutCorrected,this.treeScale,this.path,a),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=_e());const{target:p}=o;if(!p){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(_g(this.prevProjectionDelta.x,this.projectionDelta.x),_g(this.prevProjectionDelta.y,this.projectionDelta.y)),Cr(this.projectionDelta,this.layoutCorrected,p,this.latestValues),(this.treeScale.x!==f||this.treeScale.y!==h||!jg(this.projectionDelta.x,this.prevProjectionDelta.x)||!jg(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",p))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var a;if((a=this.options.visualElement)==null||a.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=ri(),this.projectionDelta=ri(),this.projectionDeltaWithTransform=ri()}setAnimationOrigin(o,a=!1){const l=this.snapshot,c=l?l.latestValues:{},d={...this.latestValues},f=ri();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const h=_e(),p=l?l.source:void 0,y=this.layout?this.layout.source:void 0,w=p!==y,C=this.getStack(),g=!C||C.members.length<=1,m=!!(w&&!g&&this.options.crossfade===!0&&!this.path.some(K2));this.animationProgress=0;let x;this.mixTargetDelta=b=>{const S=b/1e3;Ag(f.x,o.x,S),Ag(f.y,o.y,S),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Er(h,this.layout.layoutBox,this.relativeParent.layout.layoutBox),H2(this.relativeTarget,this.relativeTargetOrigin,h,S),x&&P2(this.relativeTarget,x)&&(this.isProjectionDirty=!1),x||(x=_e()),_t(x,this.relativeTarget)),w&&(this.animationValues=d,E2(d,c,this.latestValues,S,m,g)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=S},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){var a,l,c;this.notifyListeners("animationStart"),(a=this.currentAnimation)==null||a.stop(),(c=(l=this.resumingFrom)==null?void 0:l.currentAnimation)==null||c.stop(),this.pendingAnimation&&(_n(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ce.update(()=>{Na.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=ks(0)),this.currentAnimation=x2(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:d=>{this.mixTargetDelta(d),o.onUpdate&&o.onUpdate(d)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(A2),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:c,latestValues:d}=o;if(!(!a||!l||!c)){if(this!==o&&this.layout&&c&&W1(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||_e();const f=Ze(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+f;const h=Ze(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+h}_t(a,l),ii(a,d),Cr(this.projectionDeltaWithTransform,this.layoutCorrected,a,d)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new R2),this.sharedNodes.get(o).add(a);const c=a.options.initialPromotionConfig;a.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var a;const{layoutId:o}=this.options;return o?((a=this.getStack())==null?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:o}=this.options;return o?(a=this.getStack())==null?void 0:a.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const c={};l.z&&Xc("z",o,c,this.animationValues);for(let d=0;d<qc.length;d++)Xc(`rotate${qc[d]}`,o,c,this.animationValues),Xc(`skew${qc[d]}`,o,c,this.animationValues);o.render();for(const d in c)o.setStaticValue(d,c[d]),this.animationValues&&(this.animationValues[d]=c[d]);o.scheduleRender()}applyProjectionStyles(o,a){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const l=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=ba(a==null?void 0:a.pointerEvents)||"",o.transform=l?l(this.latestValues,""):"none";return}const c=this.getLead();if(!this.projectionDelta||!this.layout||!c.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=ba(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!cs(this.latestValues)&&(o.transform=l?l({},""):"none",this.hasProjected=!1);return}o.visibility="";const d=c.animationValues||c.latestValues;this.applyTransformsToTarget();let f=I2(this.projectionDeltaWithTransform,this.treeScale,d);l&&(f=l(d,f)),o.transform=f;const{x:h,y:p}=this.projectionDelta;o.transformOrigin=`${h.origin*100}% ${p.origin*100}% 0`,c.animationValues?o.opacity=c===this?d.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:d.opacityExit:o.opacity=c===this?d.opacity!==void 0?d.opacity:"":d.opacityExit!==void 0?d.opacityExit:0;for(const y in Zr){if(d[y]===void 0)continue;const{correct:w,applyTo:C,isCSSVariable:g}=Zr[y],m=f==="none"?d[y]:w(d[y],c);if(C){const x=C.length;for(let b=0;b<x;b++)o[C[b]]=m}else g?this.options.visualElement.renderState.vars[y]=m:o[y]=m}this.options.layoutId&&(o.pointerEvents=c===this?ba(a==null?void 0:a.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)==null?void 0:a.stop()}),this.root.nodes.forEach(Pg),this.root.sharedNodes.clear()}}}function M2(t){t.updateLayout()}function L2(t){var n;const e=((n=t.resumeFrom)==null?void 0:n.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:s,measuredBox:i}=t.layout,{animationType:r}=t.options,o=e.source!==t.layout.source;r==="size"?St(f=>{const h=o?e.measuredBox[f]:e.layoutBox[f],p=Ze(h);h.min=s[f].min,h.max=h.min+p}):W1(r,e.layoutBox,s)&&St(f=>{const h=o?e.measuredBox[f]:e.layoutBox[f],p=Ze(s[f]);h.max=h.min+p,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[f].max=t.relativeTarget[f].min+p)});const a=ri();Cr(a,s,e.layoutBox);const l=ri();o?Cr(l,t.applyTransform(i,!0),e.measuredBox):Cr(l,s,e.layoutBox);const c=!z1(a);let d=!1;if(!t.resumeFrom){const f=t.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:h,layout:p}=f;if(h&&p){const y=_e();Er(y,e.layoutBox,h.layoutBox);const w=_e();Er(w,s,p.layoutBox),B1(y,w)||(d=!0),f.options.layoutRoot&&(t.relativeTarget=w,t.relativeTargetOrigin=y,t.relativeParent=f)}}}t.notifyListeners("didUpdate",{layout:s,snapshot:e,delta:l,layoutDelta:a,hasLayoutChanged:c,hasRelativeLayoutChanged:d})}else if(t.isLead()){const{onExitComplete:s}=t.options;s&&s()}t.options.transition=void 0}function F2(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function O2(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function V2(t){t.clearSnapshot()}function Pg(t){t.clearMeasurements()}function Rg(t){t.isLayoutDirty=!1}function z2(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function Ig(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function B2(t){t.resolveTargetDelta()}function $2(t){t.calcProjection()}function U2(t){t.resetSkewAndRotation()}function W2(t){t.removeLeadSnapshot()}function Ag(t,e,n){t.translate=he(e.translate,0,n),t.scale=he(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function Dg(t,e,n,s){t.min=he(e.min,n.min,s),t.max=he(e.max,n.max,s)}function H2(t,e,n,s){Dg(t.x,e.x,n.x,s),Dg(t.y,e.y,n.y,s)}function K2(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const G2={duration:.45,ease:[.4,0,.1,1]},Mg=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),Lg=Mg("applewebkit/")&&!Mg("chrome/")?Math.round:Tt;function Fg(t){t.min=Lg(t.min),t.max=Lg(t.max)}function Y2(t){Fg(t.x),Fg(t.y)}function W1(t,e,n){return t==="position"||t==="preserve-aspect"&&!e2(Tg(e),Tg(n),.2)}function Q2(t){var e;return t!==t.root&&((e=t.scroll)==null?void 0:e.wasRoot)}const q2=U1({attachResizeListener:(t,e)=>eo(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Jc={current:void 0},H1=U1({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Jc.current){const t=new q2({});t.mount(window),t.setOptions({layoutScroll:!0}),Jc.current=t}return Jc.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),X2={pan:{Feature:m2},drag:{Feature:p2,ProjectionNode:H1,MeasureLayout:F1}};function Og(t,e,n){const{props:s}=t;t.animationState&&s.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,r=s[i];r&&ce.postRender(()=>r(e,ko(e)))}class J2 extends is{mount(){const{current:e}=this.node;e&&(this.unmount=wk(e,(n,s)=>(Og(this.node,s,"Start"),i=>Og(this.node,i,"End"))))}unmount(){}}class Z2 extends is{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Eo(eo(this.node.current,"focus",()=>this.onFocus()),eo(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Vg(t,e,n){const{props:s}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&s.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),r=s[i];r&&ce.postRender(()=>r(e,ko(e)))}class ej extends is{mount(){const{current:e}=this.node;e&&(this.unmount=Ek(e,(n,s)=>(Vg(this.node,s,"Start"),(i,{success:r})=>Vg(this.node,i,r?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const bd=new WeakMap,Zc=new WeakMap,tj=t=>{const e=bd.get(t.target);e&&e(t)},nj=t=>{t.forEach(tj)};function sj({root:t,...e}){const n=t||document;Zc.has(n)||Zc.set(n,{});const s=Zc.get(n),i=JSON.stringify(e);return s[i]||(s[i]=new IntersectionObserver(nj,{root:t,...e})),s[i]}function ij(t,e,n){const s=sj(e);return bd.set(t,n),s.observe(t),()=>{bd.delete(t),s.unobserve(t)}}const rj={some:0,all:1};class oj extends is{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:s,amount:i="some",once:r}=e,o={root:n?n.current:void 0,rootMargin:s,threshold:typeof i=="number"?i:rj[i]},a=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,r&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:d,onViewportLeave:f}=this.node.getProps(),h=c?d:f;h&&h(l)};return ij(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(aj(e,n))&&this.startObserver()}unmount(){}}function aj({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const lj={inView:{Feature:oj},tap:{Feature:ej},focus:{Feature:Z2},hover:{Feature:J2}},cj={layout:{ProjectionNode:H1,MeasureLayout:F1}},uj={...YT,...lj,...X2,...cj},j=uT(uj,CT);function K1(t){const e=Co(()=>ks(t)),{isStatic:n}=v.useContext(Wl);if(n){const[,s]=v.useState(t);v.useEffect(()=>e.on("change",s),[])}return e}function G1(t,e){const n=K1(e()),s=()=>n.set(e());return s(),Yh(()=>{const i=()=>ce.preRender(s,!1,!0),r=t.map(o=>o.on("change",i));return()=>{r.forEach(o=>o()),_n(s)}}),n}function dj(t){_r.current=[],t();const e=G1(_r.current,t);return _r.current=void 0,e}function hj(t,e,n,s){if(typeof t=="function")return dj(t);const i=typeof e=="function"?e:Nk(e,n,s);return Array.isArray(t)?zg(t,i):zg([t],([r])=>i(r))}function zg(t,e){const n=Co(()=>[]);return G1(t,()=>{n.length=0;const s=t.length;for(let i=0;i<s;i++)n[i]=t[i].get();return e(n)})}/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var fj={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pj=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),G=(t,e)=>{const n=v.forwardRef(({color:s="currentColor",size:i=24,strokeWidth:r=2,absoluteStrokeWidth:o,className:a="",children:l,...c},d)=>v.createElement("svg",{ref:d,...fj,width:i,height:i,stroke:s,strokeWidth:o?Number(r)*24/Number(i):r,className:["lucide",`lucide-${pj(t)}`,a].join(" "),...c},[...e.map(([f,h])=>v.createElement(f,h)),...Array.isArray(l)?l:[l]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ds=G("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mj=G("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gj=G("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const To=G("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yj=G("Car",[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vj=G("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xj=G("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y1=G("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ts=G("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wj=G("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _j=G("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sj=G("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q1=G("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cj=G("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ej=G("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bj=G("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nd=G("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nj=G("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kj=G("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tj=G("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q1=G("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X1=G("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sn=G("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yl=G("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jj=G("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bg=G("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pj=G("Shirt",[["path",{d:"M20.38 3.46 16 2a4 4 0 0 1-8 0L3.62 3.46a2 2 0 0 0-1.34 2.23l.58 3.47a1 1 0 0 0 .99.84H6v10c0 1.1.9 2 2 2h8a2 2 0 0 0 2-2V10h2.15a1 1 0 0 0 .99-.84l.58-3.47a2 2 0 0 0-1.34-2.23z",key:"1wgbhj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rj=G("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cn=G("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J1=G("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ij=G("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aj=G("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z1=G("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ew=G("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dj=G("UtensilsCrossed",[["path",{d:"m16 2-2.3 2.3a3 3 0 0 0 0 4.2l1.8 1.8a3 3 0 0 0 4.2 0L22 8",key:"n7qcjb"}],["path",{d:"M15 15 3.3 3.3a4.2 4.2 0 0 0 0 6l7.3 7.3c.7.7 2 .7 2.8 0L15 15Zm0 0 7 7",key:"d0u48b"}],["path",{d:"m2.1 21.8 6.4-6.3",key:"yn04lh"}],["path",{d:"m19 5-7 7",key:"194lzd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ee=G("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mj=G("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),Ql=({children:t,initialHeight:e=400,maxHeight:n=600,minHeight:s=200,className:i="",onHeightChange:r})=>{const[o,a]=v.useState(e),l=v.useRef(null),c=K1(0),d=hj(c,[-200,0],[.3,.1]),f=(p,y)=>{const w=o-y.delta.y,C=Math.max(s,Math.min(n,w));a(C),r==null||r(C)},h=(p,y)=>{const w=y.velocity.y;let C=o;if(Math.abs(w)>500)w>0?C=s:C=n;else{const g=(s+n)/2;C=o>g?n:s}a(C),r==null||r(C)};return u.jsxs(u.Fragment,{children:[u.jsx(j.div,{className:"fixed inset-0 bg-black pointer-events-none z-10",style:{opacity:d}}),u.jsxs(j.div,{ref:l,className:`fixed bottom-0 left-0 right-0 bg-white rounded-t-3xl shadow-2xl z-20 ${i}`,style:{height:o},initial:{y:100,opacity:0},animate:{y:0,opacity:1},transition:{type:"spring",damping:25,stiffness:200},children:[u.jsx(j.div,{className:"w-full h-6 flex justify-center items-center cursor-grab active:cursor-grabbing",drag:"y",dragConstraints:{top:0,bottom:0},dragElastic:.1,onDrag:f,onDragEnd:h,whileTap:{scale:1.1},children:u.jsx("div",{className:"w-12 h-1 bg-gray-300 rounded-full"})}),u.jsx("div",{className:"px-4 pb-4 overflow-hidden",style:{height:o-24},children:t})]})]})},Ms=({children:t,className:e="",maxHeight:n="max-h-32"})=>{const s=v.useRef(null);return u.jsxs(j.div,{ref:s,className:`overflow-y-auto scrollbar-hide ${n} ${e}`,initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2},style:{scrollbarWidth:"none",msOverflowStyle:"none"},children:[u.jsx("style",{jsx:!0,children:`
        ::-webkit-scrollbar {
          display: none;
        }
      `}),t]})},ql=({activeTab:t="home",onTabChange:e})=>{const n=be(),s=[{id:"home",label:"Home",icon:Q1},{id:"rides",label:"Rides",icon:To},{id:"account",label:"Account",icon:Z1}],i=r=>{e==null||e(r),r==="home"?n("/"):r==="rides"?n("/rides"):r==="account"&&n("/account")};return u.jsx(j.div,{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-100 px-4 py-2 z-30",initial:{y:100},animate:{y:0},transition:{type:"spring",damping:25,stiffness:200,delay:.3},children:u.jsx("div",{className:"flex justify-around items-center",children:s.map(r=>{const o=r.icon,a=t===r.id;return u.jsxs(j.button,{onClick:()=>i(r.id),className:`flex flex-col items-center py-2 px-4 rounded-lg transition-colors ${a?"text-green-600":"text-gray-500"}`,whileTap:{scale:.95},children:[u.jsx(o,{size:24,className:a?"text-green-600":"text-gray-500"}),u.jsx("span",{className:`text-xs mt-1 ${a?"text-green-600 font-medium":"text-gray-500"}`,children:r.label})]},r.id)})})})},Ls=()=>u.jsxs(j.div,{className:"fixed inset-0 bg-gradient-to-br from-blue-100 via-blue-50 to-green-50 z-0",initial:{opacity:0},animate:{opacity:1},transition:{duration:1},children:[u.jsx("div",{className:"absolute inset-0 opacity-20",children:u.jsxs("svg",{className:"w-full h-full",children:[u.jsx("defs",{children:u.jsx("pattern",{id:"grid",width:"40",height:"40",patternUnits:"userSpaceOnUse",children:u.jsx("path",{d:"M 40 0 L 0 0 0 40",fill:"none",stroke:"#94a3b8",strokeWidth:"1"})})}),u.jsx("rect",{width:"100%",height:"100%",fill:"url(#grid)"})]})}),u.jsxs("div",{className:"absolute inset-0 opacity-30",children:[u.jsx("div",{className:"absolute top-1/4 left-0 right-0 h-2 bg-gray-400 transform rotate-12"}),u.jsx("div",{className:"absolute top-1/2 left-0 right-0 h-1 bg-gray-300 transform -rotate-6"}),u.jsx("div",{className:"absolute top-3/4 left-0 right-0 h-2 bg-gray-400 transform rotate-3"}),u.jsx("div",{className:"absolute top-0 bottom-0 left-1/4 w-1 bg-gray-300 transform rotate-2"}),u.jsx("div",{className:"absolute top-0 bottom-0 left-2/3 w-2 bg-gray-400 transform -rotate-1"})]}),u.jsx("div",{className:"absolute top-1/3 left-1/2 transform -translate-x-1/2 -translate-y-1/2",children:u.jsx("div",{className:"w-4 h-4 bg-blue-500 rounded-full animate-pulse"})}),u.jsx("div",{className:"absolute top-2/3 right-1/3 transform translate-x-1/2 -translate-y-1/2",children:u.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"})})]}),Lj=[{id:"bolt",name:"Bolt",description:"Mid-size cars",eta:"1 min",price:0,originalPrice:0,capacity:3,badge:"FASTER",icon:""},{id:"economy",name:"Economy",description:"Affordable rides",eta:"2 min",price:0,originalPrice:0,capacity:2,badge:"CHEAPER",icon:""},{id:"comfort",name:"Comfort",description:"Premium cars",eta:"3 min",price:0,originalPrice:0,capacity:4,badge:"LUXURY",icon:""},{id:"xl",name:"Bolt XL",description:"Extra space",eta:"4 min",price:0,originalPrice:0,capacity:6,badge:"SPACIOUS",icon:""}],Fj=[{id:"1",address:"78 Eastwood Street",description:"West Turffontein, Johannesburg"},{id:"2",address:"KFC Gandhi Square",description:"Umnutho House, Eloff Street, Marshalltown..."},{id:"3",address:"Johannesburg Park Station",description:"Rissik Street, Johannesburg Central"},{id:"4",address:"Mall of Africa",description:"Lone Creek Crescent, Waterfall City"},{id:"5",address:"OR Tambo International Airport",description:"O.R. Tambo Airport Rd, Kempton Park"}],Oj=()=>{};var $g={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tw={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A=function(t,e){if(!t)throw Vi(e)},Vi=function(t){return new Error("Firebase Database ("+tw.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nw=function(t){const e=[];let n=0;for(let s=0;s<t.length;s++){let i=t.charCodeAt(s);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&s+1<t.length&&(t.charCodeAt(s+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++s)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},Vj=function(t){const e=[];let n=0,s=0;for(;n<t.length;){const i=t[n++];if(i<128)e[s++]=String.fromCharCode(i);else if(i>191&&i<224){const r=t[n++];e[s++]=String.fromCharCode((i&31)<<6|r&63)}else if(i>239&&i<365){const r=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(r&63)<<12|(o&63)<<6|a&63)-65536;e[s++]=String.fromCharCode(55296+(l>>10)),e[s++]=String.fromCharCode(56320+(l&1023))}else{const r=t[n++],o=t[n++];e[s++]=String.fromCharCode((i&15)<<12|(r&63)<<6|o&63)}}return e.join("")},bf={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let i=0;i<t.length;i+=3){const r=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,c=l?t[i+2]:0,d=r>>2,f=(r&3)<<4|a>>4;let h=(a&15)<<2|c>>6,p=c&63;l||(p=64,o||(h=64)),s.push(n[d],n[f],n[h],n[p])}return s.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(nw(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Vj(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let i=0;i<t.length;){const r=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const f=i<t.length?n[t.charAt(i)]:64;if(++i,r==null||a==null||c==null||f==null)throw new zj;const h=r<<2|a>>4;if(s.push(h),c!==64){const p=a<<4&240|c>>2;if(s.push(p),f!==64){const y=c<<6&192|f;s.push(y)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class zj extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const sw=function(t){const e=nw(t);return bf.encodeByteArray(e,!0)},rl=function(t){return sw(t).replace(/\./g,"")},kd=function(t){try{return bf.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bj(t){return iw(void 0,t)}function iw(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!$j(n)||(t[n]=iw(t[n],e[n]));return t}function $j(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uj(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wj=()=>Uj().__FIREBASE_DEFAULTS__,Hj=()=>{if(typeof process>"u"||typeof $g>"u")return;const t=$g.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Kj=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&kd(t[1]);return e&&JSON.parse(e)},rw=()=>{try{return Oj()||Wj()||Hj()||Kj()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Gj=t=>{var e,n;return(n=(e=rw())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},Yj=t=>{const e=Gj(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},ow=()=>{var t;return(t=rw())==null?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jo{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nf(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Qj(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qj(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",i=t.iat||0,r=t.sub||t.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${s}`,aud:s,iat:i,exp:i+3600,auth_time:i,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}},...t};return[rl(JSON.stringify(n)),rl(JSON.stringify(o)),""].join(".")}const br={};function Xj(){const t={prod:[],emulator:[]};for(const e of Object.keys(br))br[e]?t.emulator.push(e):t.prod.push(e);return t}function Jj(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Ug=!1;function Zj(t,e){if(typeof window>"u"||typeof document>"u"||!Nf(window.location.host)||br[t]===e||br[t]||Ug)return;br[t]=e;function n(h){return`__firebase__banner__${h}`}const s="__firebase__banner",r=Xj().prod.length>0;function o(){const h=document.getElementById(s);h&&h.remove()}function a(h){h.style.display="flex",h.style.background="#7faaf0",h.style.position="fixed",h.style.bottom="5px",h.style.left="5px",h.style.padding=".5em",h.style.borderRadius="5px",h.style.alignItems="center"}function l(h,p){h.setAttribute("width","24"),h.setAttribute("id",p),h.setAttribute("height","24"),h.setAttribute("viewBox","0 0 24 24"),h.setAttribute("fill","none"),h.style.marginLeft="-6px"}function c(){const h=document.createElement("span");return h.style.cursor="pointer",h.style.marginLeft="16px",h.style.fontSize="24px",h.innerHTML=" &times;",h.onclick=()=>{Ug=!0,o()},h}function d(h,p){h.setAttribute("id",p),h.innerText="Learn more",h.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",h.setAttribute("target","__blank"),h.style.paddingLeft="5px",h.style.textDecoration="underline"}function f(){const h=Jj(s),p=n("text"),y=document.getElementById(p)||document.createElement("span"),w=n("learnmore"),C=document.getElementById(w)||document.createElement("a"),g=n("preprendIcon"),m=document.getElementById(g)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(h.created){const x=h.element;a(x),d(C,w);const b=c();l(m,g),x.append(m,y,C,b),document.body.appendChild(x)}r?(y.innerText="Preview backend disconnected.",m.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(m.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,y.innerText="Preview backend running in this workspace."),y.setAttribute("id",p)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eP(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function aw(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(eP())}function tP(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function lw(){return tw.NODE_ADMIN===!0}function nP(){try{return typeof indexedDB=="object"}catch{return!1}}function sP(){return new Promise((t,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(s);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(s),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var r;e(((r=i.error)==null?void 0:r.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iP="FirebaseError";class Po extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=iP,Object.setPrototypeOf(this,Po.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,cw.prototype.create)}}class cw{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},i=`${this.service}/${e}`,r=this.errors[e],o=r?rP(r,s):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Po(i,a,s)}}function rP(t,e){return t.replace(oP,(n,s)=>{const i=e[s];return i!=null?String(i):`<${s}?>`})}const oP=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function to(t){return JSON.parse(t)}function Pe(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uw=function(t){let e={},n={},s={},i="";try{const r=t.split(".");e=to(kd(r[0])||""),n=to(kd(r[1])||""),i=r[2],s=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:s,signature:i}},aP=function(t){const e=uw(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},lP=function(t){const e=uw(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function bi(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function Wg(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function ol(t,e,n){const s={};for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(s[i]=e.call(n,t[i],i,t));return s}function al(t,e){if(t===e)return!0;const n=Object.keys(t),s=Object.keys(e);for(const i of n){if(!s.includes(i))return!1;const r=t[i],o=e[i];if(Hg(r)&&Hg(o)){if(!al(r,o))return!1}else if(r!==o)return!1}for(const i of s)if(!n.includes(i))return!1;return!0}function Hg(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cP(t){const e=[];for(const[n,s]of Object.entries(t))Array.isArray(s)?s.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uP{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const s=this.W_;if(typeof e=="string")for(let f=0;f<16;f++)s[f]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let f=0;f<16;f++)s[f]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let f=16;f<80;f++){const h=s[f-3]^s[f-8]^s[f-14]^s[f-16];s[f]=(h<<1|h>>>31)&4294967295}let i=this.chain_[0],r=this.chain_[1],o=this.chain_[2],a=this.chain_[3],l=this.chain_[4],c,d;for(let f=0;f<80;f++){f<40?f<20?(c=a^r&(o^a),d=1518500249):(c=r^o^a,d=1859775393):f<60?(c=r&o|a&(r|o),d=2400959708):(c=r^o^a,d=3395469782);const h=(i<<5|i>>>27)+c+l+d+s[f]&4294967295;l=a,a=o,o=(r<<30|r>>>2)&4294967295,r=i,i=h}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+r&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const s=n-this.blockSize;let i=0;const r=this.buf_;let o=this.inbuf_;for(;i<n;){if(o===0)for(;i<=s;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<n;)if(r[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(r),o=0;break}}else for(;i<n;)if(r[o]=e[i],++o,++i,o===this.blockSize){this.compress_(r),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let s=0;for(let i=0;i<5;i++)for(let r=24;r>=0;r-=8)e[s]=this.chain_[i]>>r&255,++s;return e}}function Xl(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dP=function(t){const e=[];let n=0;for(let s=0;s<t.length;s++){let i=t.charCodeAt(s);if(i>=55296&&i<=56319){const r=i-55296;s++,A(s<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(s)-56320;i=65536+(r<<10)+o}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},Jl=function(t){let e=0;for(let n=0;n<t.length;n++){const s=t.charCodeAt(n);s<128?e++:s<2048?e+=2:s>=55296&&s<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fs(t){return t&&t._delegate?t._delegate:t}class no{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const us="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hP{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new jo;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&s.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(pP(e))try{this.getOrInitializeService({instanceIdentifier:us})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const r=this.getOrInitializeService({instanceIdentifier:i});s.resolve(r)}catch{}}}}clearInstance(e=us){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=us){return this.instances.has(e)}getOptions(e=us){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[r,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(r);s===a&&o.resolve(i)}return i}onInit(e,n){const s=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(s)??new Set;i.add(e),this.onInitCallbacks.set(s,i);const r=this.instances.get(s);return r&&e(r,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const i of s)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:fP(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=us){return this.component?this.component.multipleInstances?e:us:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function fP(t){return t===us?void 0:t}function pP(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mP{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new hP(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ie;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ie||(ie={}));const gP={debug:ie.DEBUG,verbose:ie.VERBOSE,info:ie.INFO,warn:ie.WARN,error:ie.ERROR,silent:ie.SILENT},yP=ie.INFO,vP={[ie.DEBUG]:"log",[ie.VERBOSE]:"log",[ie.INFO]:"info",[ie.WARN]:"warn",[ie.ERROR]:"error"},xP=(t,e,...n)=>{if(e<t.logLevel)return;const s=new Date().toISOString(),i=vP[e];if(i)console[i](`[${s}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class dw{constructor(e){this.name=e,this._logLevel=yP,this._logHandler=xP,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ie))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?gP[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ie.DEBUG,...e),this._logHandler(this,ie.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ie.VERBOSE,...e),this._logHandler(this,ie.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ie.INFO,...e),this._logHandler(this,ie.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ie.WARN,...e),this._logHandler(this,ie.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ie.ERROR,...e),this._logHandler(this,ie.ERROR,...e)}}const wP=(t,e)=>e.some(n=>t instanceof n);let Kg,Gg;function _P(){return Kg||(Kg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function SP(){return Gg||(Gg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const hw=new WeakMap,Td=new WeakMap,fw=new WeakMap,eu=new WeakMap,kf=new WeakMap;function CP(t){const e=new Promise((n,s)=>{const i=()=>{t.removeEventListener("success",r),t.removeEventListener("error",o)},r=()=>{n(Hn(t.result)),i()},o=()=>{s(t.error),i()};t.addEventListener("success",r),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&hw.set(n,t)}).catch(()=>{}),kf.set(e,t),e}function EP(t){if(Td.has(t))return;const e=new Promise((n,s)=>{const i=()=>{t.removeEventListener("complete",r),t.removeEventListener("error",o),t.removeEventListener("abort",o)},r=()=>{n(),i()},o=()=>{s(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",r),t.addEventListener("error",o),t.addEventListener("abort",o)});Td.set(t,e)}let jd={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Td.get(t);if(e==="objectStoreNames")return t.objectStoreNames||fw.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Hn(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function bP(t){jd=t(jd)}function NP(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=t.call(tu(this),e,...n);return fw.set(s,e.sort?e.sort():[e]),Hn(s)}:SP().includes(t)?function(...e){return t.apply(tu(this),e),Hn(hw.get(this))}:function(...e){return Hn(t.apply(tu(this),e))}}function kP(t){return typeof t=="function"?NP(t):(t instanceof IDBTransaction&&EP(t),wP(t,_P())?new Proxy(t,jd):t)}function Hn(t){if(t instanceof IDBRequest)return CP(t);if(eu.has(t))return eu.get(t);const e=kP(t);return e!==t&&(eu.set(t,e),kf.set(e,t)),e}const tu=t=>kf.get(t);function TP(t,e,{blocked:n,upgrade:s,blocking:i,terminated:r}={}){const o=indexedDB.open(t,e),a=Hn(o);return s&&o.addEventListener("upgradeneeded",l=>{s(Hn(o.result),l.oldVersion,l.newVersion,Hn(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{r&&l.addEventListener("close",()=>r()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const jP=["get","getKey","getAll","getAllKeys","count"],PP=["put","add","delete","clear"],nu=new Map;function Yg(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(nu.get(e))return nu.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,i=PP.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(i||jP.includes(n)))return;const r=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let c=l.store;return s&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),i&&l.done]))[0]};return nu.set(e,r),r}bP(t=>({...t,get:(e,n,s)=>Yg(e,n)||t.get(e,n,s),has:(e,n)=>!!Yg(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RP{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(IP(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function IP(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Pd="@firebase/app",Qg="0.14.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cn=new dw("@firebase/app"),AP="@firebase/app-compat",DP="@firebase/analytics-compat",MP="@firebase/analytics",LP="@firebase/app-check-compat",FP="@firebase/app-check",OP="@firebase/auth",VP="@firebase/auth-compat",zP="@firebase/database",BP="@firebase/data-connect",$P="@firebase/database-compat",UP="@firebase/functions",WP="@firebase/functions-compat",HP="@firebase/installations",KP="@firebase/installations-compat",GP="@firebase/messaging",YP="@firebase/messaging-compat",QP="@firebase/performance",qP="@firebase/performance-compat",XP="@firebase/remote-config",JP="@firebase/remote-config-compat",ZP="@firebase/storage",eR="@firebase/storage-compat",tR="@firebase/firestore",nR="@firebase/ai",sR="@firebase/firestore-compat",iR="firebase",rR="12.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rd="[DEFAULT]",oR={[Pd]:"fire-core",[AP]:"fire-core-compat",[MP]:"fire-analytics",[DP]:"fire-analytics-compat",[FP]:"fire-app-check",[LP]:"fire-app-check-compat",[OP]:"fire-auth",[VP]:"fire-auth-compat",[zP]:"fire-rtdb",[BP]:"fire-data-connect",[$P]:"fire-rtdb-compat",[UP]:"fire-fn",[WP]:"fire-fn-compat",[HP]:"fire-iid",[KP]:"fire-iid-compat",[GP]:"fire-fcm",[YP]:"fire-fcm-compat",[QP]:"fire-perf",[qP]:"fire-perf-compat",[XP]:"fire-rc",[JP]:"fire-rc-compat",[ZP]:"fire-gcs",[eR]:"fire-gcs-compat",[tR]:"fire-fst",[sR]:"fire-fst-compat",[nR]:"fire-vertex","fire-js":"fire-js",[iR]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ll=new Map,aR=new Map,Id=new Map;function qg(t,e){try{t.container.addComponent(e)}catch(n){Cn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function cl(t){const e=t.name;if(Id.has(e))return Cn.debug(`There were multiple attempts to register component ${e}.`),!1;Id.set(e,t);for(const n of ll.values())qg(n,t);for(const n of aR.values())qg(n,t);return!0}function lR(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function cR(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Kn=new cw("app","Firebase",uR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dR{constructor(e,n,s){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new no("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Kn.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hR=rR;function pw(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const s={name:Rd,automaticDataCollectionEnabled:!0,...e},i=s.name;if(typeof i!="string"||!i)throw Kn.create("bad-app-name",{appName:String(i)});if(n||(n=ow()),!n)throw Kn.create("no-options");const r=ll.get(i);if(r){if(al(n,r.options)&&al(s,r.config))return r;throw Kn.create("duplicate-app",{appName:i})}const o=new mP(i);for(const l of Id.values())o.addComponent(l);const a=new dR(n,s,o);return ll.set(i,a),a}function fR(t=Rd){const e=ll.get(t);if(!e&&t===Rd&&ow())return pw();if(!e)throw Kn.create("no-app",{appName:t});return e}function pi(t,e,n){let s=oR[t]??t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),r=e.match(/\s|\//);if(i||r){const o=[`Unable to register library "${s}" with version "${e}":`];i&&o.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&r&&o.push("and"),r&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Cn.warn(o.join(" "));return}cl(new no(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pR="firebase-heartbeat-database",mR=1,so="firebase-heartbeat-store";let su=null;function mw(){return su||(su=TP(pR,mR,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(so)}catch(n){console.warn(n)}}}}).catch(t=>{throw Kn.create("idb-open",{originalErrorMessage:t.message})})),su}async function gR(t){try{const n=(await mw()).transaction(so),s=await n.objectStore(so).get(gw(t));return await n.done,s}catch(e){if(e instanceof Po)Cn.warn(e.message);else{const n=Kn.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Cn.warn(n.message)}}}async function Xg(t,e){try{const s=(await mw()).transaction(so,"readwrite");await s.objectStore(so).put(e,gw(t)),await s.done}catch(n){if(n instanceof Po)Cn.warn(n.message);else{const s=Kn.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Cn.warn(s.message)}}}function gw(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yR=1024,vR=30;class xR{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new _R(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Jg();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(o=>o.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:i}),this._heartbeatsCache.heartbeats.length>vR){const o=SR(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){Cn.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Jg(),{heartbeatsToSend:s,unsentEntries:i}=wR(this._heartbeatsCache.heartbeats),r=rl(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(n){return Cn.warn(n),""}}}function Jg(){return new Date().toISOString().substring(0,10)}function wR(t,e=yR){const n=[];let s=t.slice();for(const i of t){const r=n.find(o=>o.agent===i.agent);if(r){if(r.dates.push(i.date),Zg(n)>e){r.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Zg(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class _R{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return nP()?sP().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await gR(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Xg(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Xg(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Zg(t){return rl(JSON.stringify({version:2,heartbeats:t})).length}function SR(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let s=1;s<t.length;s++)t[s].date<n&&(n=t[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CR(t){cl(new no("platform-logger",e=>new RP(e),"PRIVATE")),cl(new no("heartbeat",e=>new xR(e),"PRIVATE")),pi(Pd,Qg,t),pi(Pd,Qg,"esm2020"),pi("fire-js","")}CR("");var ER="firebase",bR="12.2.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */pi(ER,bR,"app");var ey={};const ty="@firebase/database",ny="1.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yw="";function NR(t){yw=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kR{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Pe(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:to(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TR{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return sn(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vw=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new kR(e)}}catch{}return new TR},ys=vw("localStorage"),jR=vw("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mi=new dw("@firebase/database"),PR=function(){let t=1;return function(){return t++}}(),xw=function(t){const e=dP(t),n=new uP;n.update(e);const s=n.digest();return bf.encodeByteArray(s)},Ro=function(...t){let e="";for(let n=0;n<t.length;n++){const s=t[n];Array.isArray(s)||s&&typeof s=="object"&&typeof s.length=="number"?e+=Ro.apply(null,s):typeof s=="object"?e+=Pe(s):e+=s,e+=" "}return e};let Nr=null,sy=!0;const RR=function(t,e){A(!e,"Can't turn on custom loggers persistently."),mi.logLevel=ie.VERBOSE,Nr=mi.log.bind(mi)},ze=function(...t){if(sy===!0&&(sy=!1,Nr===null&&jR.get("logging_enabled")===!0&&RR()),Nr){const e=Ro.apply(null,t);Nr(e)}},Io=function(t){return function(...e){ze(t,...e)}},Ad=function(...t){const e="FIREBASE INTERNAL ERROR: "+Ro(...t);mi.error(e)},En=function(...t){const e=`FIREBASE FATAL ERROR: ${Ro(...t)}`;throw mi.error(e),new Error(e)},nt=function(...t){const e="FIREBASE WARNING: "+Ro(...t);mi.warn(e)},IR=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&nt("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Tf=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},AR=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Ni="[MIN_NAME]",js="[MAX_NAME]",Os=function(t,e){if(t===e)return 0;if(t===Ni||e===js)return-1;if(e===Ni||t===js)return 1;{const n=iy(t),s=iy(e);return n!==null?s!==null?n-s===0?t.length-e.length:n-s:-1:s!==null?1:t<e?-1:1}},DR=function(t,e){return t===e?0:t<e?-1:1},er=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Pe(e))},jf=function(t){if(typeof t!="object"||t===null)return Pe(t);const e=[];for(const s in t)e.push(s);e.sort();let n="{";for(let s=0;s<e.length;s++)s!==0&&(n+=","),n+=Pe(e[s]),n+=":",n+=jf(t[e[s]]);return n+="}",n},ww=function(t,e){const n=t.length;if(n<=e)return[t];const s=[];for(let i=0;i<n;i+=e)i+e>n?s.push(t.substring(i,n)):s.push(t.substring(i,i+e));return s};function Ue(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const _w=function(t){A(!Tf(t),"Invalid JSON number");const e=11,n=52,s=(1<<e-1)-1;let i,r,o,a,l;t===0?(r=0,o=0,i=1/t===-1/0?1:0):(i=t<0,t=Math.abs(t),t>=Math.pow(2,1-s)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),s),r=a+s,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(r=0,o=Math.round(t/Math.pow(2,1-s-n))));const c=[];for(l=n;l;l-=1)c.push(o%2?1:0),o=Math.floor(o/2);for(l=e;l;l-=1)c.push(r%2?1:0),r=Math.floor(r/2);c.push(i?1:0),c.reverse();const d=c.join("");let f="";for(l=0;l<64;l+=8){let h=parseInt(d.substr(l,8),2).toString(16);h.length===1&&(h="0"+h),f=f+h}return f.toLowerCase()},MR=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},LR=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function FR(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const s=new Error(t+" at "+e._path.toString()+": "+n);return s.code=t.toUpperCase(),s}const OR=new RegExp("^-?(0*)\\d{1,10}$"),VR=-2147483648,zR=2147483647,iy=function(t){if(OR.test(t)){const e=Number(t);if(e>=VR&&e<=zR)return e}return null},zi=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw nt("Exception was thrown by user callback.",n),e},Math.floor(0))}},BR=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},kr=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $R{constructor(e,n){this.appCheckProvider=n,this.appName=e.name,cR(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(s=>this.appCheck=s)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((n,s)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,s):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)==null||n.get().then(s=>s.addTokenListener(e))}notifyForInvalidToken(){nt(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UR{constructor(e,n,s){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=s,this.auth_=null,this.auth_=s.getImmediate({optional:!0}),this.auth_||s.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(ze("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,s)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,s):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',nt(e)}}class ka{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}ka.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pf="5",Sw="v",Cw="s",Ew="r",bw="f",Nw=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,kw="ls",Tw="p",Dd="ac",jw="websocket",Pw="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rw{constructor(e,n,s,i,r=!1,o="",a=!1,l=!1,c=null){this.secure=n,this.namespace=s,this.webSocketOnly=i,this.nodeAdmin=r,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=l,this.emulatorOptions=c,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=ys.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&ys.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function WR(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function Iw(t,e,n){A(typeof e=="string","typeof type must == string"),A(typeof n=="object","typeof params must == object");let s;if(e===jw)s=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===Pw)s=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);WR(t)&&(n.ns=t.namespace);const i=[];return Ue(n,(r,o)=>{i.push(r+"="+o)}),s+i.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HR{constructor(){this.counters_={}}incrementCounter(e,n=1){sn(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return Bj(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iu={},ru={};function Rf(t){const e=t.toString();return iu[e]||(iu[e]=new HR),iu[e]}function KR(t,e){const n=t.toString();return ru[n]||(ru[n]=e()),ru[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GR{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const s=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<s.length;++i)s[i]&&zi(()=>{this.onMessage_(s[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ry="start",YR="close",QR="pLPCommand",qR="pRTLPCB",Aw="id",Dw="pw",Mw="ser",XR="cb",JR="seg",ZR="ts",eI="d",tI="dframe",Lw=1870,Fw=30,nI=Lw-Fw,sI=25e3,iI=3e4;class oi{constructor(e,n,s,i,r,o,a){this.connId=e,this.repoInfo=n,this.applicationId=s,this.appCheckToken=i,this.authToken=r,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Io(e),this.stats_=Rf(n),this.urlFn=l=>(this.appCheckToken&&(l[Dd]=this.appCheckToken),Iw(n,Pw,l))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new GR(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(iI)),AR(()=>{if(this.isClosed_)return;this.scriptTagHolder=new If((...r)=>{const[o,a,l,c,d]=r;if(this.incrementIncomingBytes_(r),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===ry)this.id=a,this.password=l;else if(o===YR)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...r)=>{const[o,a]=r;this.incrementIncomingBytes_(r),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const s={};s[ry]="t",s[Mw]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(s[XR]=this.scriptTagHolder.uniqueCallbackIdentifier),s[Sw]=Pf,this.transportSessionId&&(s[Cw]=this.transportSessionId),this.lastSessionId&&(s[kw]=this.lastSessionId),this.applicationId&&(s[Tw]=this.applicationId),this.appCheckToken&&(s[Dd]=this.appCheckToken),typeof location<"u"&&location.hostname&&Nw.test(location.hostname)&&(s[Ew]=bw);const i=this.urlFn(s);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){oi.forceAllow_=!0}static forceDisallow(){oi.forceDisallow_=!0}static isAvailable(){return oi.forceAllow_?!0:!oi.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!MR()&&!LR()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=Pe(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const s=sw(n),i=ww(s,nI);for(let r=0;r<i.length;r++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[r]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const s={};s[tI]="t",s[Aw]=e,s[Dw]=n,this.myDisconnFrame.src=this.urlFn(s),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=Pe(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class If{constructor(e,n,s,i){this.onDisconnect=s,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=PR(),window[QR+this.uniqueCallbackIdentifier]=e,window[qR+this.uniqueCallbackIdentifier]=n,this.myIFrame=If.createIFrame_();let r="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(r='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+r+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){ze("frame writing exception"),a.stack&&ze(a.stack),ze(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||ze("No IE domain setting required")}catch{const s=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+s+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[Aw]=this.myID,e[Dw]=this.myPW,e[Mw]=this.currentSerial;let n=this.urlFn(e),s="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+Fw+s.length<=Lw;){const o=this.pendingSegs.shift();s=s+"&"+JR+i+"="+o.seg+"&"+ZR+i+"="+o.ts+"&"+eI+i+"="+o.d,i++}return n=n+s,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,s){this.pendingSegs.push({seg:e,ts:n,d:s}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const s=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(s,Math.floor(sI)),r=()=>{clearTimeout(i),s()};this.addTag(e,r)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const s=this.myIFrame.doc.createElement("script");s.type="text/javascript",s.async=!0,s.src=e,s.onload=s.onreadystatechange=function(){const i=s.readyState;(!i||i==="loaded"||i==="complete")&&(s.onload=s.onreadystatechange=null,s.parentNode&&s.parentNode.removeChild(s),n())},s.onerror=()=>{ze("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(s)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rI=16384,oI=45e3;let ul=null;typeof MozWebSocket<"u"?ul=MozWebSocket:typeof WebSocket<"u"&&(ul=WebSocket);class zt{constructor(e,n,s,i,r,o,a){this.connId=e,this.applicationId=s,this.appCheckToken=i,this.authToken=r,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Io(this.connId),this.stats_=Rf(n),this.connURL=zt.connectionURL_(n,o,a,i,s),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,s,i,r){const o={};return o[Sw]=Pf,typeof location<"u"&&location.hostname&&Nw.test(location.hostname)&&(o[Ew]=bw),n&&(o[Cw]=n),s&&(o[kw]=s),i&&(o[Dd]=i),r&&(o[Tw]=r),Iw(e,jw,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,ys.set("previous_websocket_failure",!0);try{let s;lw(),this.mySock=new ul(this.connURL,[],s)}catch(s){this.log_("Error instantiating WebSocket.");const i=s.message||s.data;i&&this.log_(i),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=s=>{this.handleIncomingFrame(s)},this.mySock.onerror=s=>{this.log_("WebSocket error.  Closing connection.");const i=s.message||s.data;i&&this.log_(i),this.onClosed_()}}start(){}static forceDisallow(){zt.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,s=navigator.userAgent.match(n);s&&s.length>1&&parseFloat(s[1])<4.4&&(e=!0)}return!e&&ul!==null&&!zt.forceDisallow_}static previouslyFailed(){return ys.isInMemoryStorage||ys.get("previous_websocket_failure")===!0}markConnectionHealthy(){ys.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const s=to(n);this.onMessage(s)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(A(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const s=this.extractFrameCount_(n);s!==null&&this.appendFrame_(s)}}send(e){this.resetKeepAlive();const n=Pe(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const s=ww(n,rI);s.length>1&&this.sendString_(String(s.length));for(let i=0;i<s.length;i++)this.sendString_(s[i])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(oI))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}zt.responsesRequiredToBeHealthy=2;zt.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io{static get ALL_TRANSPORTS(){return[oi,zt]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const n=zt&&zt.isAvailable();let s=n&&!zt.previouslyFailed();if(e.webSocketOnly&&(n||nt("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),s=!0),s)this.transports_=[zt];else{const i=this.transports_=[];for(const r of io.ALL_TRANSPORTS)r&&r.isAvailable()&&i.push(r);io.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}io.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aI=6e4,lI=5e3,cI=10*1024,uI=100*1024,ou="t",oy="d",dI="s",ay="r",hI="e",ly="o",cy="a",uy="n",dy="p",fI="h";class pI{constructor(e,n,s,i,r,o,a,l,c,d){this.id=e,this.repoInfo_=n,this.applicationId_=s,this.appCheckToken_=i,this.authToken_=r,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=l,this.onKill_=c,this.lastSessionId=d,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Io("c:"+this.id+":"),this.transportManager_=new io(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),s=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,s)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=kr(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>uI?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>cI?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(ou in e){const n=e[ou];n===cy?this.upgradeIfSecondaryHealthy_():n===ay?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===ly&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=er("t",e),s=er("d",e);if(n==="c")this.onSecondaryControl_(s);else if(n==="d")this.pendingDataMessages.push(s);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:dy,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:cy,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:uy,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=er("t",e),s=er("d",e);n==="c"?this.onControl_(s):n==="d"&&this.onDataMessage_(s)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=er(ou,e);if(oy in e){const s=e[oy];if(n===fI){const i={...s};this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===uy){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===dI?this.onConnectionShutdown_(s):n===ay?this.onReset_(s):n===hI?Ad("Server Error: "+s):n===ly?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Ad("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,s=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),Pf!==s&&nt("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),s=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,s),kr(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(aI))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):kr(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(lI))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:dy,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(ys.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ow{put(e,n,s,i){}merge(e,n,s,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,s){}onDisconnectMerge(e,n,s){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vw{constructor(e){this.allowedEvents_=e,this.listeners_={},A(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const s=[...this.listeners_[e]];for(let i=0;i<s.length;i++)s[i].callback.apply(s[i].context,n)}}on(e,n,s){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:s});const i=this.getInitialEvent(e);i&&n.apply(s,i)}off(e,n,s){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let r=0;r<i.length;r++)if(i[r].callback===n&&(!s||s===i[r].context)){i.splice(r,1);return}}validateEventType_(e){A(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dl extends Vw{static getInstance(){return new dl}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!aw()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return A(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hy=32,fy=768;class te{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let s=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[s]=this.pieces_[i],s++);this.pieces_.length=s,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function Z(){return new te("")}function U(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Jn(t){return t.pieces_.length-t.pieceNum_}function re(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new te(t.pieces_,e)}function Af(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function mI(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function ro(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function zw(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new te(e,0)}function xe(t,e){const n=[];for(let s=t.pieceNum_;s<t.pieces_.length;s++)n.push(t.pieces_[s]);if(e instanceof te)for(let s=e.pieceNum_;s<e.pieces_.length;s++)n.push(e.pieces_[s]);else{const s=e.split("/");for(let i=0;i<s.length;i++)s[i].length>0&&n.push(s[i])}return new te(n,0)}function H(t){return t.pieceNum_>=t.pieces_.length}function et(t,e){const n=U(t),s=U(e);if(n===null)return e;if(n===s)return et(re(t),re(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function gI(t,e){const n=ro(t,0),s=ro(e,0);for(let i=0;i<n.length&&i<s.length;i++){const r=Os(n[i],s[i]);if(r!==0)return r}return n.length===s.length?0:n.length<s.length?-1:1}function Df(t,e){if(Jn(t)!==Jn(e))return!1;for(let n=t.pieceNum_,s=e.pieceNum_;n<=t.pieces_.length;n++,s++)if(t.pieces_[n]!==e.pieces_[s])return!1;return!0}function Nt(t,e){let n=t.pieceNum_,s=e.pieceNum_;if(Jn(t)>Jn(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[s])return!1;++n,++s}return!0}class yI{constructor(e,n){this.errorPrefix_=n,this.parts_=ro(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let s=0;s<this.parts_.length;s++)this.byteLength_+=Jl(this.parts_[s]);Bw(this)}}function vI(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Jl(e),Bw(t)}function xI(t){const e=t.parts_.pop();t.byteLength_-=Jl(e),t.parts_.length>0&&(t.byteLength_-=1)}function Bw(t){if(t.byteLength_>fy)throw new Error(t.errorPrefix_+"has a key path longer than "+fy+" bytes ("+t.byteLength_+").");if(t.parts_.length>hy)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+hy+") or object contains a cycle "+ds(t))}function ds(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mf extends Vw{static getInstance(){return new Mf}constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const s=!document[e];s!==this.visible_&&(this.visible_=s,this.trigger("visible",s))},!1)}getInitialEvent(e){return A(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tr=1e3,wI=60*5*1e3,py=30*1e3,_I=1.3,SI=3e4,CI="server_kill",my=3;class fn extends Ow{constructor(e,n,s,i,r,o,a,l){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=s,this.onConnectStatus_=i,this.onServerInfoUpdate_=r,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=l,this.id=fn.nextPersistentConnectionId_++,this.log_=Io("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=tr,this.maxReconnectDelay_=wI,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!lw())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Mf.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&dl.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,s){const i=++this.requestNumber_,r={r:i,a:e,b:n};this.log_(Pe(r)),A(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(r),s&&(this.requestCBHash_[i]=s)}get(e){this.initConnection_();const n=new jo,i={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const a=o.d;o.s==="ok"?n.resolve(a):n.reject(a)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;const r=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(r),n.promise}listen(e,n,s,i){this.initConnection_();const r=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+r),this.listens.has(o)||this.listens.set(o,new Map),A(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),A(!this.listens.get(o).has(r),"listen() called twice for same path/queryId.");const a={onComplete:i,hashFn:n,query:e,tag:s};this.listens.get(o).set(r,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,s=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(s)})}sendListen_(e){const n=e.query,s=n._path.toString(),i=n._queryIdentifier;this.log_("Listen on "+s+" for "+i);const r={p:s},o="q";e.tag&&(r.q=n._queryObject,r.t=e.tag),r.h=e.hashFn(),this.sendRequest(o,r,a=>{const l=a.d,c=a.s;fn.warnOnListenWarnings_(l,n),(this.listens.get(s)&&this.listens.get(s).get(i))===e&&(this.log_("listen response",a),c!=="ok"&&this.removeListen_(s,i),e.onComplete&&e.onComplete(c,l))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&sn(e,"w")){const s=bi(e,"w");if(Array.isArray(s)&&~s.indexOf("no_index")){const i='".indexOn": "'+n._queryParams.getIndex().toString()+'"',r=n._path.toString();nt(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${i} at ${r} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||lP(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=py)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=aP(e)?"auth":"gauth",s={cred:e};this.authOverride_===null?s.noauth=!0:typeof this.authOverride_=="object"&&(s.authvar=this.authOverride_),this.sendRequest(n,s,i=>{const r=i.s,o=i.d||"error";this.authToken_===e&&(r==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(r,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,s=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,s)})}unlisten(e,n){const s=e._path.toString(),i=e._queryIdentifier;this.log_("Unlisten called for "+s+" "+i),A(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(s,i)&&this.connected_&&this.sendUnlisten_(s,i,e._queryObject,n)}sendUnlisten_(e,n,s,i){this.log_("Unlisten on "+e+" for "+n);const r={p:e},o="n";i&&(r.q=s,r.t=i),this.sendRequest(o,r)}onDisconnectPut(e,n,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,s):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:s})}onDisconnectMerge(e,n,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,s):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:s})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,s,i){const r={p:n,d:s};this.log_("onDisconnect "+e,r),this.sendRequest(e,r,o=>{i&&setTimeout(()=>{i(o.s,o.d)},Math.floor(0))})}put(e,n,s,i){this.putInternal("p",e,n,s,i)}merge(e,n,s,i){this.putInternal("m",e,n,s,i)}putInternal(e,n,s,i,r){this.initConnection_();const o={p:n,d:s};r!==void 0&&(o.h=r),this.outstandingPuts_.push({action:e,request:o,onComplete:i}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,s=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,s,r=>{this.log_(n+" response",r),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),i&&i(r.s,r.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,s=>{if(s.s!=="ok"){const r=s.d;this.log_("reportStats","Error sending stats: "+r)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+Pe(e));const n=e.r,s=this.requestCBHash_[n];s&&(delete this.requestCBHash_[n],s(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):Ad("Unrecognized action received from server: "+Pe(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){A(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=tr,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=tr,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>SI&&(this.reconnectDelay_=tr),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*_I)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),s=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+fn.nextConnectionId_++,r=this.lastSessionId;let o=!1,a=null;const l=function(){a?a.close():(o=!0,s())},c=function(f){A(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(f)};this.realtime_={close:l,sendRequest:c};const d=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[f,h]=await Promise.all([this.authTokenProvider_.getToken(d),this.appCheckTokenProvider_.getToken(d)]);o?ze("getToken() completed but was canceled"):(ze("getToken() completed. Creating connection."),this.authToken_=f&&f.accessToken,this.appCheckToken_=h&&h.token,a=new pI(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,s,p=>{nt(p+" ("+this.repoInfo_.toString()+")"),this.interrupt(CI)},r))}catch(f){this.log_("Failed to get token: "+f),o||(this.repoInfo_.nodeAdmin&&nt(f),l())}}}interrupt(e){ze("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){ze("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Wg(this.interruptReasons_)&&(this.reconnectDelay_=tr,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let s;n?s=n.map(r=>jf(r)).join("$"):s="default";const i=this.removeListen_(e,s);i&&i.onComplete&&i.onComplete("permission_denied")}removeListen_(e,n){const s=new te(e).toString();let i;if(this.listens.has(s)){const r=this.listens.get(s);i=r.get(n),r.delete(n),r.size===0&&this.listens.delete(s)}else i=void 0;return i}onAuthRevoked_(e,n){ze("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=my&&(this.reconnectDelay_=py,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){ze("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=my&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+yw.replace(/\./g,"-")]=1,aw()?e["framework.cordova"]=1:tP()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=dl.getInstance().currentlyOnline();return Wg(this.interruptReasons_)&&e}}fn.nextPersistentConnectionId_=0;fn.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new W(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zl{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const s=new W(Ni,e),i=new W(Ni,n);return this.compare(s,i)!==0}minPost(){return W.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let oa;class $w extends Zl{static get __EMPTY_NODE(){return oa}static set __EMPTY_NODE(e){oa=e}compare(e,n){return Os(e.name,n.name)}isDefinedOn(e){throw Vi("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return W.MIN}maxPost(){return new W(js,oa)}makePost(e,n){return A(typeof e=="string","KeyIndex indexValue must always be a string."),new W(e,oa)}toString(){return".key"}}const gi=new $w;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aa{constructor(e,n,s,i,r=null){this.isReverse_=i,this.resultGenerator_=r,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?s(e.key,n):1,i&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class Me{constructor(e,n,s,i,r){this.key=e,this.value=n,this.color=s??Me.RED,this.left=i??lt.EMPTY_NODE,this.right=r??lt.EMPTY_NODE}copy(e,n,s,i,r){return new Me(e??this.key,n??this.value,s??this.color,i??this.left,r??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let i=this;const r=s(e,i.key);return r<0?i=i.copy(null,null,null,i.left.insert(e,n,s),null):r===0?i=i.copy(null,n,null,null,null):i=i.copy(null,null,null,null,i.right.insert(e,n,s)),i.fixUp_()}removeMin_(){if(this.left.isEmpty())return lt.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let s,i;if(s=this,n(e,s.key)<0)!s.left.isEmpty()&&!s.left.isRed_()&&!s.left.left.isRed_()&&(s=s.moveRedLeft_()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed_()&&(s=s.rotateRight_()),!s.right.isEmpty()&&!s.right.isRed_()&&!s.right.left.isRed_()&&(s=s.moveRedRight_()),n(e,s.key)===0){if(s.right.isEmpty())return lt.EMPTY_NODE;i=s.right.min_(),s=s.copy(i.key,i.value,null,null,s.right.removeMin_())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Me.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Me.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}Me.RED=!0;Me.BLACK=!1;class EI{copy(e,n,s,i,r){return this}insert(e,n,s){return new Me(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class lt{constructor(e,n=lt.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new lt(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Me.BLACK,null,null))}remove(e){return new lt(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Me.BLACK,null,null))}get(e){let n,s=this.root_;for(;!s.isEmpty();){if(n=this.comparator_(e,s.key),n===0)return s.value;n<0?s=s.left:n>0&&(s=s.right)}return null}getPredecessorKey(e){let n,s=this.root_,i=null;for(;!s.isEmpty();)if(n=this.comparator_(e,s.key),n===0){if(s.left.isEmpty())return i?i.key:null;for(s=s.left;!s.right.isEmpty();)s=s.right;return s.key}else n<0?s=s.left:n>0&&(i=s,s=s.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new aa(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new aa(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new aa(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new aa(this.root_,null,this.comparator_,!0,e)}}lt.EMPTY_NODE=new EI;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bI(t,e){return Os(t.name,e.name)}function Lf(t,e){return Os(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Md;function NI(t){Md=t}const Uw=function(t){return typeof t=="number"?"number:"+_w(t):"string:"+t},Ww=function(t){if(t.isLeafNode()){const e=t.val();A(typeof e=="string"||typeof e=="number"||typeof e=="object"&&sn(e,".sv"),"Priority must be a string or number.")}else A(t===Md||t.isEmpty(),"priority of unexpected type.");A(t===Md||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gy;class Ae{static set __childrenNodeConstructor(e){gy=e}static get __childrenNodeConstructor(){return gy}constructor(e,n=Ae.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,A(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),Ww(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Ae(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:Ae.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return H(e)?this:U(e)===".priority"?this.priorityNode_:Ae.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:Ae.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const s=U(e);return s===null?n:n.isEmpty()&&s!==".priority"?this:(A(s!==".priority"||Jn(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(s,Ae.__childrenNodeConstructor.EMPTY_NODE.updateChild(re(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+Uw(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=_w(this.value_):e+=this.value_,this.lazyHash_=xw(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Ae.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Ae.__childrenNodeConstructor?-1:(A(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,s=typeof this.value_,i=Ae.VALUE_TYPE_ORDER.indexOf(n),r=Ae.VALUE_TYPE_ORDER.indexOf(s);return A(i>=0,"Unknown leaf type: "+n),A(r>=0,"Unknown leaf type: "+s),i===r?s==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:r-i}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}Ae.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hw,Kw;function kI(t){Hw=t}function TI(t){Kw=t}class jI extends Zl{compare(e,n){const s=e.node.getPriority(),i=n.node.getPriority(),r=s.compareTo(i);return r===0?Os(e.name,n.name):r}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return W.MIN}maxPost(){return new W(js,new Ae("[PRIORITY-POST]",Kw))}makePost(e,n){const s=Hw(e);return new W(n,new Ae("[PRIORITY-POST]",s))}toString(){return".priority"}}const we=new jI;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PI=Math.log(2);class RI{constructor(e){const n=r=>parseInt(Math.log(r)/PI,10),s=r=>parseInt(Array(r+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const i=s(this.count);this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const hl=function(t,e,n,s){t.sort(e);const i=function(l,c){const d=c-l;let f,h;if(d===0)return null;if(d===1)return f=t[l],h=n?n(f):f,new Me(h,f.node,Me.BLACK,null,null);{const p=parseInt(d/2,10)+l,y=i(l,p),w=i(p+1,c);return f=t[p],h=n?n(f):f,new Me(h,f.node,Me.BLACK,y,w)}},r=function(l){let c=null,d=null,f=t.length;const h=function(y,w){const C=f-y,g=f;f-=y;const m=i(C+1,g),x=t[C],b=n?n(x):x;p(new Me(b,x.node,w,null,m))},p=function(y){c?(c.left=y,c=y):(d=y,c=y)};for(let y=0;y<l.count;++y){const w=l.nextBitIsOne(),C=Math.pow(2,l.count-(y+1));w?h(C,Me.BLACK):(h(C,Me.BLACK),h(C,Me.RED))}return d},o=new RI(t.length),a=r(o);return new lt(s||e,a)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let au;const $s={};class un{static get Default(){return A($s&&we,"ChildrenNode.ts has not been loaded"),au=au||new un({".priority":$s},{".priority":we}),au}constructor(e,n){this.indexes_=e,this.indexSet_=n}get(e){const n=bi(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof lt?n:null}hasIndex(e){return sn(this.indexSet_,e.toString())}addIndex(e,n){A(e!==gi,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const s=[];let i=!1;const r=n.getIterator(W.Wrap);let o=r.getNext();for(;o;)i=i||e.isDefinedOn(o.node),s.push(o),o=r.getNext();let a;i?a=hl(s,e.getCompare()):a=$s;const l=e.toString(),c={...this.indexSet_};c[l]=e;const d={...this.indexes_};return d[l]=a,new un(d,c)}addToIndexes(e,n){const s=ol(this.indexes_,(i,r)=>{const o=bi(this.indexSet_,r);if(A(o,"Missing index implementation for "+r),i===$s)if(o.isDefinedOn(e.node)){const a=[],l=n.getIterator(W.Wrap);let c=l.getNext();for(;c;)c.name!==e.name&&a.push(c),c=l.getNext();return a.push(e),hl(a,o.getCompare())}else return $s;else{const a=n.get(e.name);let l=i;return a&&(l=l.remove(new W(e.name,a))),l.insert(e,e.node)}});return new un(s,this.indexSet_)}removeFromIndexes(e,n){const s=ol(this.indexes_,i=>{if(i===$s)return i;{const r=n.get(e.name);return r?i.remove(new W(e.name,r)):i}});return new un(s,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nr;class O{static get EMPTY_NODE(){return nr||(nr=new O(new lt(Lf),null,un.Default))}constructor(e,n,s){this.children_=e,this.priorityNode_=n,this.indexMap_=s,this.lazyHash_=null,this.priorityNode_&&Ww(this.priorityNode_),this.children_.isEmpty()&&A(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||nr}updatePriority(e){return this.children_.isEmpty()?this:new O(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?nr:n}}getChild(e){const n=U(e);return n===null?this:this.getImmediateChild(n).getChild(re(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(A(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const s=new W(e,n);let i,r;n.isEmpty()?(i=this.children_.remove(e),r=this.indexMap_.removeFromIndexes(s,this.children_)):(i=this.children_.insert(e,n),r=this.indexMap_.addToIndexes(s,this.children_));const o=i.isEmpty()?nr:this.priorityNode_;return new O(i,o,r)}}updateChild(e,n){const s=U(e);if(s===null)return n;{A(U(e)!==".priority"||Jn(e)===1,".priority must be the last token in a path");const i=this.getImmediateChild(s).updateChild(re(e),n);return this.updateImmediateChild(s,i)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let s=0,i=0,r=!0;if(this.forEachChild(we,(o,a)=>{n[o]=a.val(e),s++,r&&O.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):r=!1}),!e&&r&&i<2*s){const o=[];for(const a in n)o[a]=n[a];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+Uw(this.getPriority().val())+":"),this.forEachChild(we,(n,s)=>{const i=s.hash();i!==""&&(e+=":"+n+":"+i)}),this.lazyHash_=e===""?"":xw(e)}return this.lazyHash_}getPredecessorChildName(e,n,s){const i=this.resolveIndex_(s);if(i){const r=i.getPredecessorKey(new W(e,n));return r?r.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const s=n.minKey();return s&&s.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new W(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const s=n.maxKey();return s&&s.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new W(n,this.children_.get(n)):null}forEachChild(e,n){const s=this.resolveIndex_(e);return s?s.inorderTraversal(i=>n(i.name,i.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const s=this.resolveIndex_(n);if(s)return s.getIteratorFrom(e,i=>i);{const i=this.children_.getIteratorFrom(e.name,W.Wrap);let r=i.peek();for(;r!=null&&n.compare(r,e)<0;)i.getNext(),r=i.peek();return i}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const s=this.resolveIndex_(n);if(s)return s.getReverseIteratorFrom(e,i=>i);{const i=this.children_.getReverseIteratorFrom(e.name,W.Wrap);let r=i.peek();for(;r!=null&&n.compare(r,e)>0;)i.getNext(),r=i.peek();return i}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Ao?-1:0}withIndex(e){if(e===gi||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new O(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===gi||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const s=this.getIterator(we),i=n.getIterator(we);let r=s.getNext(),o=i.getNext();for(;r&&o;){if(r.name!==o.name||!r.node.equals(o.node))return!1;r=s.getNext(),o=i.getNext()}return r===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===gi?null:this.indexMap_.get(e.toString())}}O.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class II extends O{constructor(){super(new lt(Lf),O.EMPTY_NODE,un.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return O.EMPTY_NODE}isEmpty(){return!1}}const Ao=new II;Object.defineProperties(W,{MIN:{value:new W(Ni,O.EMPTY_NODE)},MAX:{value:new W(js,Ao)}});$w.__EMPTY_NODE=O.EMPTY_NODE;Ae.__childrenNodeConstructor=O;NI(Ao);TI(Ao);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AI=!0;function je(t,e=null){if(t===null)return O.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),A(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new Ae(n,je(e))}if(!(t instanceof Array)&&AI){const n=[];let s=!1;if(Ue(t,(o,a)=>{if(o.substring(0,1)!=="."){const l=je(a);l.isEmpty()||(s=s||!l.getPriority().isEmpty(),n.push(new W(o,l)))}}),n.length===0)return O.EMPTY_NODE;const r=hl(n,bI,o=>o.name,Lf);if(s){const o=hl(n,we.getCompare());return new O(r,je(e),new un({".priority":o},{".priority":we}))}else return new O(r,je(e),un.Default)}else{let n=O.EMPTY_NODE;return Ue(t,(s,i)=>{if(sn(t,s)&&s.substring(0,1)!=="."){const r=je(i);(r.isLeafNode()||!r.isEmpty())&&(n=n.updateImmediateChild(s,r))}}),n.updatePriority(je(e))}}kI(je);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DI extends Zl{constructor(e){super(),this.indexPath_=e,A(!H(e)&&U(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const s=this.extractChild(e.node),i=this.extractChild(n.node),r=s.compareTo(i);return r===0?Os(e.name,n.name):r}makePost(e,n){const s=je(e),i=O.EMPTY_NODE.updateChild(this.indexPath_,s);return new W(n,i)}maxPost(){const e=O.EMPTY_NODE.updateChild(this.indexPath_,Ao);return new W(js,e)}toString(){return ro(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MI extends Zl{compare(e,n){const s=e.node.compareTo(n.node);return s===0?Os(e.name,n.name):s}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return W.MIN}maxPost(){return W.MAX}makePost(e,n){const s=je(e);return new W(n,s)}toString(){return".value"}}const LI=new MI;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gw(t){return{type:"value",snapshotNode:t}}function ki(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function oo(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function ao(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function FI(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ff{constructor(e){this.index_=e}updateChild(e,n,s,i,r,o){A(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(n);return a.getChild(i).equals(s.getChild(i))&&a.isEmpty()===s.isEmpty()||(o!=null&&(s.isEmpty()?e.hasChild(n)?o.trackChildChange(oo(n,a)):A(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(ki(n,s)):o.trackChildChange(ao(n,s,a))),e.isLeafNode()&&s.isEmpty())?e:e.updateImmediateChild(n,s).withIndex(this.index_)}updateFullNode(e,n,s){return s!=null&&(e.isLeafNode()||e.forEachChild(we,(i,r)=>{n.hasChild(i)||s.trackChildChange(oo(i,r))}),n.isLeafNode()||n.forEachChild(we,(i,r)=>{if(e.hasChild(i)){const o=e.getImmediateChild(i);o.equals(r)||s.trackChildChange(ao(i,r,o))}else s.trackChildChange(ki(i,r))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?O.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo{constructor(e){this.indexedFilter_=new Ff(e.getIndex()),this.index_=e.getIndex(),this.startPost_=lo.getStartPost_(e),this.endPost_=lo.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,s=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&s}updateChild(e,n,s,i,r,o){return this.matches(new W(n,s))||(s=O.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,s,i,r,o)}updateFullNode(e,n,s){n.isLeafNode()&&(n=O.EMPTY_NODE);let i=n.withIndex(this.index_);i=i.updatePriority(O.EMPTY_NODE);const r=this;return n.forEachChild(we,(o,a)=>{r.matches(new W(o,a))||(i=i.updateImmediateChild(o,O.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,s)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OI{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const s=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?s<=0:s<0},this.withinEndPost=n=>{const s=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?s<=0:s<0},this.rangedFilter_=new lo(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,s,i,r,o){return this.rangedFilter_.matches(new W(n,s))||(s=O.EMPTY_NODE),e.getImmediateChild(n).equals(s)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,s,i,r,o):this.fullLimitUpdateChild_(e,n,s,r,o)}updateFullNode(e,n,s){let i;if(n.isLeafNode()||n.isEmpty())i=O.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){i=O.EMPTY_NODE.withIndex(this.index_);let r;this.reverse_?r=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):r=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;r.hasNext()&&o<this.limit_;){const a=r.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))i=i.updateImmediateChild(a.name,a.node),o++;else break;else continue}}else{i=n.withIndex(this.index_),i=i.updatePriority(O.EMPTY_NODE);let r;this.reverse_?r=i.getReverseIterator(this.index_):r=i.getIterator(this.index_);let o=0;for(;r.hasNext();){const a=r.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:i=i.updateImmediateChild(a.name,O.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,s)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,s,i,r){let o;if(this.reverse_){const f=this.index_.getCompare();o=(h,p)=>f(p,h)}else o=this.index_.getCompare();const a=e;A(a.numChildren()===this.limit_,"");const l=new W(n,s),c=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),d=this.rangedFilter_.matches(l);if(a.hasChild(n)){const f=a.getImmediateChild(n);let h=i.getChildAfterChild(this.index_,c,this.reverse_);for(;h!=null&&(h.name===n||a.hasChild(h.name));)h=i.getChildAfterChild(this.index_,h,this.reverse_);const p=h==null?1:o(h,l);if(d&&!s.isEmpty()&&p>=0)return r!=null&&r.trackChildChange(ao(n,s,f)),a.updateImmediateChild(n,s);{r!=null&&r.trackChildChange(oo(n,f));const w=a.updateImmediateChild(n,O.EMPTY_NODE);return h!=null&&this.rangedFilter_.matches(h)?(r!=null&&r.trackChildChange(ki(h.name,h.node)),w.updateImmediateChild(h.name,h.node)):w}}else return s.isEmpty()?e:d&&o(c,l)>=0?(r!=null&&(r.trackChildChange(oo(c.name,c.node)),r.trackChildChange(ki(n,s))),a.updateImmediateChild(n,s).updateImmediateChild(c.name,O.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Of{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=we}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return A(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return A(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Ni}hasEnd(){return this.endSet_}getIndexEndValue(){return A(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return A(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:js}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return A(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===we}copy(){const e=new Of;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function VI(t){return t.loadsAllData()?new Ff(t.getIndex()):t.hasLimit()?new OI(t):new lo(t)}function yy(t){const e={};if(t.isDefault())return e;let n;if(t.index_===we?n="$priority":t.index_===LI?n="$value":t.index_===gi?n="$key":(A(t.index_ instanceof DI,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=Pe(n),t.startSet_){const s=t.startAfterSet_?"startAfter":"startAt";e[s]=Pe(t.indexStartValue_),t.startNameSet_&&(e[s]+=","+Pe(t.indexStartName_))}if(t.endSet_){const s=t.endBeforeSet_?"endBefore":"endAt";e[s]=Pe(t.indexEndValue_),t.endNameSet_&&(e[s]+=","+Pe(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function vy(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==we&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fl extends Ow{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(A(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,n,s,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=s,this.appCheckTokenProvider_=i,this.log_=Io("p:rest:"),this.listens_={}}listen(e,n,s,i){const r=e._path.toString();this.log_("Listen called for "+r+" "+e._queryIdentifier);const o=fl.getListenId_(e,s),a={};this.listens_[o]=a;const l=yy(e._queryParams);this.restRequest_(r+".json",l,(c,d)=>{let f=d;if(c===404&&(f=null,c=null),c===null&&this.onDataUpdate_(r,f,!1,s),bi(this.listens_,o)===a){let h;c?c===401?h="permission_denied":h="rest_error:"+c:h="ok",i(h,null)}})}unlisten(e,n){const s=fl.getListenId_(e,n);delete this.listens_[s]}get(e){const n=yy(e._queryParams),s=e._path.toString(),i=new jo;return this.restRequest_(s+".json",n,(r,o)=>{let a=o;r===404&&(a=null,r=null),r===null?(this.onDataUpdate_(s,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},s){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,r])=>{i&&i.accessToken&&(n.auth=i.accessToken),r&&r.token&&(n.ac=r.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+cP(n);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(s&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=to(a.responseText)}catch{nt("Failed to parse JSON response for "+o+": "+a.responseText)}s(null,l)}else a.status!==401&&a.status!==404&&nt("Got unsuccessful REST response for "+o+" Status: "+a.status),s(a.status);s=null}},a.open("GET",o,!0),a.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zI{constructor(){this.rootNode_=O.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pl(){return{value:null,children:new Map}}function Yw(t,e,n){if(H(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const s=U(e);t.children.has(s)||t.children.set(s,pl());const i=t.children.get(s);e=re(e),Yw(i,e,n)}}function Ld(t,e,n){t.value!==null?n(e,t.value):BI(t,(s,i)=>{const r=new te(e.toString()+"/"+s);Ld(i,r,n)})}function BI(t,e){t.children.forEach((n,s)=>{e(s,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $I{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n={...e};return this.last_&&Ue(this.last_,(s,i)=>{n[s]=n[s]-i}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xy=10*1e3,UI=30*1e3,WI=5*60*1e3;class HI{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new $I(e);const s=xy+(UI-xy)*Math.random();kr(this.reportStats_.bind(this),Math.floor(s))}reportStats_(){const e=this.statsListener_.get(),n={};let s=!1;Ue(e,(i,r)=>{r>0&&sn(this.statsToReport_,i)&&(n[i]=r,s=!0)}),s&&this.server_.reportStats(n),kr(this.reportStats_.bind(this),Math.floor(Math.random()*2*WI))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Bt;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Bt||(Bt={}));function Vf(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function zf(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Bf(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ml{constructor(e,n,s){this.path=e,this.affectedTree=n,this.revert=s,this.type=Bt.ACK_USER_WRITE,this.source=Vf()}operationForChild(e){if(H(this.path)){if(this.affectedTree.value!=null)return A(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new te(e));return new ml(Z(),n,this.revert)}}else return A(U(this.path)===e,"operationForChild called for unrelated child."),new ml(re(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class co{constructor(e,n){this.source=e,this.path=n,this.type=Bt.LISTEN_COMPLETE}operationForChild(e){return H(this.path)?new co(this.source,Z()):new co(this.source,re(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ps{constructor(e,n,s){this.source=e,this.path=n,this.snap=s,this.type=Bt.OVERWRITE}operationForChild(e){return H(this.path)?new Ps(this.source,Z(),this.snap.getImmediateChild(e)):new Ps(this.source,re(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti{constructor(e,n,s){this.source=e,this.path=n,this.children=s,this.type=Bt.MERGE}operationForChild(e){if(H(this.path)){const n=this.children.subtree(new te(e));return n.isEmpty()?null:n.value?new Ps(this.source,Z(),n.value):new Ti(this.source,Z(),n)}else return A(U(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Ti(this.source,re(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn{constructor(e,n,s){this.node_=e,this.fullyInitialized_=n,this.filtered_=s}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(H(e))return this.isFullyInitialized()&&!this.filtered_;const n=U(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KI{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function GI(t,e,n,s){const i=[],r=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&r.push(FI(o.childName,o.snapshotNode))}),sr(t,i,"child_removed",e,s,n),sr(t,i,"child_added",e,s,n),sr(t,i,"child_moved",r,s,n),sr(t,i,"child_changed",e,s,n),sr(t,i,"value",e,s,n),i}function sr(t,e,n,s,i,r){const o=s.filter(a=>a.type===n);o.sort((a,l)=>QI(t,a,l)),o.forEach(a=>{const l=YI(t,a,r);i.forEach(c=>{c.respondsTo(a.type)&&e.push(c.createEvent(l,t.query_))})})}function YI(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function QI(t,e,n){if(e.childName==null||n.childName==null)throw Vi("Should only compare child_ events.");const s=new W(e.childName,e.snapshotNode),i=new W(n.childName,n.snapshotNode);return t.index_.compare(s,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ec(t,e){return{eventCache:t,serverCache:e}}function Tr(t,e,n,s){return ec(new Zn(e,n,s),t.serverCache)}function Qw(t,e,n,s){return ec(t.eventCache,new Zn(e,n,s))}function gl(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Rs(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lu;const qI=()=>(lu||(lu=new lt(DR)),lu);class se{static fromObject(e){let n=new se(null);return Ue(e,(s,i)=>{n=n.set(new te(s),i)}),n}constructor(e,n=qI()){this.value=e,this.children=n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:Z(),value:this.value};if(H(e))return null;{const s=U(e),i=this.children.get(s);if(i!==null){const r=i.findRootMostMatchingPathAndValue(re(e),n);return r!=null?{path:xe(new te(s),r.path),value:r.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(H(e))return this;{const n=U(e),s=this.children.get(n);return s!==null?s.subtree(re(e)):new se(null)}}set(e,n){if(H(e))return new se(n,this.children);{const s=U(e),r=(this.children.get(s)||new se(null)).set(re(e),n),o=this.children.insert(s,r);return new se(this.value,o)}}remove(e){if(H(e))return this.children.isEmpty()?new se(null):new se(null,this.children);{const n=U(e),s=this.children.get(n);if(s){const i=s.remove(re(e));let r;return i.isEmpty()?r=this.children.remove(n):r=this.children.insert(n,i),this.value===null&&r.isEmpty()?new se(null):new se(this.value,r)}else return this}}get(e){if(H(e))return this.value;{const n=U(e),s=this.children.get(n);return s?s.get(re(e)):null}}setTree(e,n){if(H(e))return n;{const s=U(e),r=(this.children.get(s)||new se(null)).setTree(re(e),n);let o;return r.isEmpty()?o=this.children.remove(s):o=this.children.insert(s,r),new se(this.value,o)}}fold(e){return this.fold_(Z(),e)}fold_(e,n){const s={};return this.children.inorderTraversal((i,r)=>{s[i]=r.fold_(xe(e,i),n)}),n(e,this.value,s)}findOnPath(e,n){return this.findOnPath_(e,Z(),n)}findOnPath_(e,n,s){const i=this.value?s(n,this.value):!1;if(i)return i;if(H(e))return null;{const r=U(e),o=this.children.get(r);return o?o.findOnPath_(re(e),xe(n,r),s):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,Z(),n)}foreachOnPath_(e,n,s){if(H(e))return this;{this.value&&s(n,this.value);const i=U(e),r=this.children.get(i);return r?r.foreachOnPath_(re(e),xe(n,i),s):new se(null)}}foreach(e){this.foreach_(Z(),e)}foreach_(e,n){this.children.inorderTraversal((s,i)=>{i.foreach_(xe(e,s),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,s)=>{s.value&&e(n,s.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(e){this.writeTree_=e}static empty(){return new Wt(new se(null))}}function jr(t,e,n){if(H(e))return new Wt(new se(n));{const s=t.writeTree_.findRootMostValueAndPath(e);if(s!=null){const i=s.path;let r=s.value;const o=et(i,e);return r=r.updateChild(o,n),new Wt(t.writeTree_.set(i,r))}else{const i=new se(n),r=t.writeTree_.setTree(e,i);return new Wt(r)}}}function Fd(t,e,n){let s=t;return Ue(n,(i,r)=>{s=jr(s,xe(e,i),r)}),s}function wy(t,e){if(H(e))return Wt.empty();{const n=t.writeTree_.setTree(e,new se(null));return new Wt(n)}}function Od(t,e){return Vs(t,e)!=null}function Vs(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(et(n.path,e)):null}function _y(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(we,(s,i)=>{e.push(new W(s,i))}):t.writeTree_.children.inorderTraversal((s,i)=>{i.value!=null&&e.push(new W(s,i.value))}),e}function Gn(t,e){if(H(e))return t;{const n=Vs(t,e);return n!=null?new Wt(new se(n)):new Wt(t.writeTree_.subtree(e))}}function Vd(t){return t.writeTree_.isEmpty()}function ji(t,e){return qw(Z(),t.writeTree_,e)}function qw(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let s=null;return e.children.inorderTraversal((i,r)=>{i===".priority"?(A(r.value!==null,"Priority writes must always be leaf nodes"),s=r.value):n=qw(xe(t,i),r,n)}),!n.getChild(t).isEmpty()&&s!==null&&(n=n.updateChild(xe(t,".priority"),s)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tc(t,e){return e_(e,t)}function XI(t,e,n,s,i){A(s>t.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:s,visible:i}),i&&(t.visibleWrites=jr(t.visibleWrites,e,n)),t.lastWriteId=s}function JI(t,e,n,s){A(s>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:s,visible:!0}),t.visibleWrites=Fd(t.visibleWrites,e,n),t.lastWriteId=s}function ZI(t,e){for(let n=0;n<t.allWrites.length;n++){const s=t.allWrites[n];if(s.writeId===e)return s}return null}function eA(t,e){const n=t.allWrites.findIndex(a=>a.writeId===e);A(n>=0,"removeWrite called with nonexistent writeId.");const s=t.allWrites[n];t.allWrites.splice(n,1);let i=s.visible,r=!1,o=t.allWrites.length-1;for(;i&&o>=0;){const a=t.allWrites[o];a.visible&&(o>=n&&tA(a,s.path)?i=!1:Nt(s.path,a.path)&&(r=!0)),o--}if(i){if(r)return nA(t),!0;if(s.snap)t.visibleWrites=wy(t.visibleWrites,s.path);else{const a=s.children;Ue(a,l=>{t.visibleWrites=wy(t.visibleWrites,xe(s.path,l))})}return!0}else return!1}function tA(t,e){if(t.snap)return Nt(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&Nt(xe(t.path,n),e))return!0;return!1}function nA(t){t.visibleWrites=Xw(t.allWrites,sA,Z()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function sA(t){return t.visible}function Xw(t,e,n){let s=Wt.empty();for(let i=0;i<t.length;++i){const r=t[i];if(e(r)){const o=r.path;let a;if(r.snap)Nt(n,o)?(a=et(n,o),s=jr(s,a,r.snap)):Nt(o,n)&&(a=et(o,n),s=jr(s,Z(),r.snap.getChild(a)));else if(r.children){if(Nt(n,o))a=et(n,o),s=Fd(s,a,r.children);else if(Nt(o,n))if(a=et(o,n),H(a))s=Fd(s,Z(),r.children);else{const l=bi(r.children,U(a));if(l){const c=l.getChild(re(a));s=jr(s,Z(),c)}}}else throw Vi("WriteRecord should have .snap or .children")}}return s}function Jw(t,e,n,s,i){if(!s&&!i){const r=Vs(t.visibleWrites,e);if(r!=null)return r;{const o=Gn(t.visibleWrites,e);if(Vd(o))return n;if(n==null&&!Od(o,Z()))return null;{const a=n||O.EMPTY_NODE;return ji(o,a)}}}else{const r=Gn(t.visibleWrites,e);if(!i&&Vd(r))return n;if(!i&&n==null&&!Od(r,Z()))return null;{const o=function(c){return(c.visible||i)&&(!s||!~s.indexOf(c.writeId))&&(Nt(c.path,e)||Nt(e,c.path))},a=Xw(t.allWrites,o,e),l=n||O.EMPTY_NODE;return ji(a,l)}}}function iA(t,e,n){let s=O.EMPTY_NODE;const i=Vs(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(we,(r,o)=>{s=s.updateImmediateChild(r,o)}),s;if(n){const r=Gn(t.visibleWrites,e);return n.forEachChild(we,(o,a)=>{const l=ji(Gn(r,new te(o)),a);s=s.updateImmediateChild(o,l)}),_y(r).forEach(o=>{s=s.updateImmediateChild(o.name,o.node)}),s}else{const r=Gn(t.visibleWrites,e);return _y(r).forEach(o=>{s=s.updateImmediateChild(o.name,o.node)}),s}}function rA(t,e,n,s,i){A(s||i,"Either existingEventSnap or existingServerSnap must exist");const r=xe(e,n);if(Od(t.visibleWrites,r))return null;{const o=Gn(t.visibleWrites,r);return Vd(o)?i.getChild(n):ji(o,i.getChild(n))}}function oA(t,e,n,s){const i=xe(e,n),r=Vs(t.visibleWrites,i);if(r!=null)return r;if(s.isCompleteForChild(n)){const o=Gn(t.visibleWrites,i);return ji(o,s.getNode().getImmediateChild(n))}else return null}function aA(t,e){return Vs(t.visibleWrites,e)}function lA(t,e,n,s,i,r,o){let a;const l=Gn(t.visibleWrites,e),c=Vs(l,Z());if(c!=null)a=c;else if(n!=null)a=ji(l,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){const d=[],f=o.getCompare(),h=r?a.getReverseIteratorFrom(s,o):a.getIteratorFrom(s,o);let p=h.getNext();for(;p&&d.length<i;)f(p,s)!==0&&d.push(p),p=h.getNext();return d}else return[]}function cA(){return{visibleWrites:Wt.empty(),allWrites:[],lastWriteId:-1}}function yl(t,e,n,s){return Jw(t.writeTree,t.treePath,e,n,s)}function $f(t,e){return iA(t.writeTree,t.treePath,e)}function Sy(t,e,n,s){return rA(t.writeTree,t.treePath,e,n,s)}function vl(t,e){return aA(t.writeTree,xe(t.treePath,e))}function uA(t,e,n,s,i,r){return lA(t.writeTree,t.treePath,e,n,s,i,r)}function Uf(t,e,n){return oA(t.writeTree,t.treePath,e,n)}function Zw(t,e){return e_(xe(t.treePath,e),t.writeTree)}function e_(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dA{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,s=e.childName;A(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),A(s!==".priority","Only non-priority child changes can be tracked.");const i=this.changeMap.get(s);if(i){const r=i.type;if(n==="child_added"&&r==="child_removed")this.changeMap.set(s,ao(s,e.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&r==="child_added")this.changeMap.delete(s);else if(n==="child_removed"&&r==="child_changed")this.changeMap.set(s,oo(s,i.oldSnap));else if(n==="child_changed"&&r==="child_added")this.changeMap.set(s,ki(s,e.snapshotNode));else if(n==="child_changed"&&r==="child_changed")this.changeMap.set(s,ao(s,e.snapshotNode,i.oldSnap));else throw Vi("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(s,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hA{getCompleteChild(e){return null}getChildAfterChild(e,n,s){return null}}const t_=new hA;class Wf{constructor(e,n,s=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=s}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const s=this.optCompleteServerCache_!=null?new Zn(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Uf(this.writes_,e,s)}}getChildAfterChild(e,n,s){const i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Rs(this.viewCache_),r=uA(this.writes_,i,n,1,s,e);return r.length===0?null:r[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fA(t){return{filter:t}}function pA(t,e){A(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),A(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function mA(t,e,n,s,i){const r=new dA;let o,a;if(n.type===Bt.OVERWRITE){const c=n;c.source.fromUser?o=zd(t,e,c.path,c.snap,s,i,r):(A(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered()&&!H(c.path),o=xl(t,e,c.path,c.snap,s,i,a,r))}else if(n.type===Bt.MERGE){const c=n;c.source.fromUser?o=yA(t,e,c.path,c.children,s,i,r):(A(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered(),o=Bd(t,e,c.path,c.children,s,i,a,r))}else if(n.type===Bt.ACK_USER_WRITE){const c=n;c.revert?o=wA(t,e,c.path,s,i,r):o=vA(t,e,c.path,c.affectedTree,s,i,r)}else if(n.type===Bt.LISTEN_COMPLETE)o=xA(t,e,n.path,s,r);else throw Vi("Unknown operation type: "+n.type);const l=r.getChanges();return gA(e,o,l),{viewCache:o,changes:l}}function gA(t,e,n){const s=e.eventCache;if(s.isFullyInitialized()){const i=s.getNode().isLeafNode()||s.getNode().isEmpty(),r=gl(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!s.getNode().equals(r)||!s.getNode().getPriority().equals(r.getPriority()))&&n.push(Gw(gl(e)))}}function n_(t,e,n,s,i,r){const o=e.eventCache;if(vl(s,n)!=null)return e;{let a,l;if(H(n))if(A(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const c=Rs(e),d=c instanceof O?c:O.EMPTY_NODE,f=$f(s,d);a=t.filter.updateFullNode(e.eventCache.getNode(),f,r)}else{const c=yl(s,Rs(e));a=t.filter.updateFullNode(e.eventCache.getNode(),c,r)}else{const c=U(n);if(c===".priority"){A(Jn(n)===1,"Can't have a priority with additional path components");const d=o.getNode();l=e.serverCache.getNode();const f=Sy(s,n,d,l);f!=null?a=t.filter.updatePriority(d,f):a=o.getNode()}else{const d=re(n);let f;if(o.isCompleteForChild(c)){l=e.serverCache.getNode();const h=Sy(s,n,o.getNode(),l);h!=null?f=o.getNode().getImmediateChild(c).updateChild(d,h):f=o.getNode().getImmediateChild(c)}else f=Uf(s,c,e.serverCache);f!=null?a=t.filter.updateChild(o.getNode(),c,f,d,i,r):a=o.getNode()}}return Tr(e,a,o.isFullyInitialized()||H(n),t.filter.filtersNodes())}}function xl(t,e,n,s,i,r,o,a){const l=e.serverCache;let c;const d=o?t.filter:t.filter.getIndexedFilter();if(H(n))c=d.updateFullNode(l.getNode(),s,null);else if(d.filtersNodes()&&!l.isFiltered()){const p=l.getNode().updateChild(n,s);c=d.updateFullNode(l.getNode(),p,null)}else{const p=U(n);if(!l.isCompleteForPath(n)&&Jn(n)>1)return e;const y=re(n),C=l.getNode().getImmediateChild(p).updateChild(y,s);p===".priority"?c=d.updatePriority(l.getNode(),C):c=d.updateChild(l.getNode(),p,C,y,t_,null)}const f=Qw(e,c,l.isFullyInitialized()||H(n),d.filtersNodes()),h=new Wf(i,f,r);return n_(t,f,n,i,h,a)}function zd(t,e,n,s,i,r,o){const a=e.eventCache;let l,c;const d=new Wf(i,e,r);if(H(n))c=t.filter.updateFullNode(e.eventCache.getNode(),s,o),l=Tr(e,c,!0,t.filter.filtersNodes());else{const f=U(n);if(f===".priority")c=t.filter.updatePriority(e.eventCache.getNode(),s),l=Tr(e,c,a.isFullyInitialized(),a.isFiltered());else{const h=re(n),p=a.getNode().getImmediateChild(f);let y;if(H(h))y=s;else{const w=d.getCompleteChild(f);w!=null?Af(h)===".priority"&&w.getChild(zw(h)).isEmpty()?y=w:y=w.updateChild(h,s):y=O.EMPTY_NODE}if(p.equals(y))l=e;else{const w=t.filter.updateChild(a.getNode(),f,y,h,d,o);l=Tr(e,w,a.isFullyInitialized(),t.filter.filtersNodes())}}}return l}function Cy(t,e){return t.eventCache.isCompleteForChild(e)}function yA(t,e,n,s,i,r,o){let a=e;return s.foreach((l,c)=>{const d=xe(n,l);Cy(e,U(d))&&(a=zd(t,a,d,c,i,r,o))}),s.foreach((l,c)=>{const d=xe(n,l);Cy(e,U(d))||(a=zd(t,a,d,c,i,r,o))}),a}function Ey(t,e,n){return n.foreach((s,i)=>{e=e.updateChild(s,i)}),e}function Bd(t,e,n,s,i,r,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let l=e,c;H(n)?c=s:c=new se(null).setTree(n,s);const d=e.serverCache.getNode();return c.children.inorderTraversal((f,h)=>{if(d.hasChild(f)){const p=e.serverCache.getNode().getImmediateChild(f),y=Ey(t,p,h);l=xl(t,l,new te(f),y,i,r,o,a)}}),c.children.inorderTraversal((f,h)=>{const p=!e.serverCache.isCompleteForChild(f)&&h.value===null;if(!d.hasChild(f)&&!p){const y=e.serverCache.getNode().getImmediateChild(f),w=Ey(t,y,h);l=xl(t,l,new te(f),w,i,r,o,a)}}),l}function vA(t,e,n,s,i,r,o){if(vl(i,n)!=null)return e;const a=e.serverCache.isFiltered(),l=e.serverCache;if(s.value!=null){if(H(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return xl(t,e,n,l.getNode().getChild(n),i,r,a,o);if(H(n)){let c=new se(null);return l.getNode().forEachChild(gi,(d,f)=>{c=c.set(new te(d),f)}),Bd(t,e,n,c,i,r,a,o)}else return e}else{let c=new se(null);return s.foreach((d,f)=>{const h=xe(n,d);l.isCompleteForPath(h)&&(c=c.set(d,l.getNode().getChild(h)))}),Bd(t,e,n,c,i,r,a,o)}}function xA(t,e,n,s,i){const r=e.serverCache,o=Qw(e,r.getNode(),r.isFullyInitialized()||H(n),r.isFiltered());return n_(t,o,n,s,t_,i)}function wA(t,e,n,s,i,r){let o;if(vl(s,n)!=null)return e;{const a=new Wf(s,e,i),l=e.eventCache.getNode();let c;if(H(n)||U(n)===".priority"){let d;if(e.serverCache.isFullyInitialized())d=yl(s,Rs(e));else{const f=e.serverCache.getNode();A(f instanceof O,"serverChildren would be complete if leaf node"),d=$f(s,f)}d=d,c=t.filter.updateFullNode(l,d,r)}else{const d=U(n);let f=Uf(s,d,e.serverCache);f==null&&e.serverCache.isCompleteForChild(d)&&(f=l.getImmediateChild(d)),f!=null?c=t.filter.updateChild(l,d,f,re(n),a,r):e.eventCache.getNode().hasChild(d)?c=t.filter.updateChild(l,d,O.EMPTY_NODE,re(n),a,r):c=l,c.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=yl(s,Rs(e)),o.isLeafNode()&&(c=t.filter.updateFullNode(c,o,r)))}return o=e.serverCache.isFullyInitialized()||vl(s,Z())!=null,Tr(e,c,o,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _A{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const s=this.query_._queryParams,i=new Ff(s.getIndex()),r=VI(s);this.processor_=fA(r);const o=n.serverCache,a=n.eventCache,l=i.updateFullNode(O.EMPTY_NODE,o.getNode(),null),c=r.updateFullNode(O.EMPTY_NODE,a.getNode(),null),d=new Zn(l,o.isFullyInitialized(),i.filtersNodes()),f=new Zn(c,a.isFullyInitialized(),r.filtersNodes());this.viewCache_=ec(f,d),this.eventGenerator_=new KI(this.query_)}get query(){return this.query_}}function SA(t){return t.viewCache_.serverCache.getNode()}function CA(t){return gl(t.viewCache_)}function EA(t,e){const n=Rs(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!H(e)&&!n.getImmediateChild(U(e)).isEmpty())?n.getChild(e):null}function by(t){return t.eventRegistrations_.length===0}function bA(t,e){t.eventRegistrations_.push(e)}function Ny(t,e,n){const s=[];if(n){A(e==null,"A cancel should cancel all event registrations.");const i=t.query._path;t.eventRegistrations_.forEach(r=>{const o=r.createCancelEvent(n,i);o&&s.push(o)})}if(e){let i=[];for(let r=0;r<t.eventRegistrations_.length;++r){const o=t.eventRegistrations_[r];if(!o.matches(e))i.push(o);else if(e.hasAnyCallback()){i=i.concat(t.eventRegistrations_.slice(r+1));break}}t.eventRegistrations_=i}else t.eventRegistrations_=[];return s}function ky(t,e,n,s){e.type===Bt.MERGE&&e.source.queryId!==null&&(A(Rs(t.viewCache_),"We should always have a full cache before handling merges"),A(gl(t.viewCache_),"Missing event cache, even though we have a server cache"));const i=t.viewCache_,r=mA(t.processor_,i,e,n,s);return pA(t.processor_,r.viewCache),A(r.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=r.viewCache,s_(t,r.changes,r.viewCache.eventCache.getNode(),null)}function NA(t,e){const n=t.viewCache_.eventCache,s=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(we,(r,o)=>{s.push(ki(r,o))}),n.isFullyInitialized()&&s.push(Gw(n.getNode())),s_(t,s,n.getNode(),e)}function s_(t,e,n,s){const i=s?[s]:t.eventRegistrations_;return GI(t.eventGenerator_,e,n,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wl;class i_{constructor(){this.views=new Map}}function kA(t){A(!wl,"__referenceConstructor has already been defined"),wl=t}function TA(){return A(wl,"Reference.ts has not been loaded"),wl}function jA(t){return t.views.size===0}function Hf(t,e,n,s){const i=e.source.queryId;if(i!==null){const r=t.views.get(i);return A(r!=null,"SyncTree gave us an op for an invalid query."),ky(r,e,n,s)}else{let r=[];for(const o of t.views.values())r=r.concat(ky(o,e,n,s));return r}}function r_(t,e,n,s,i){const r=e._queryIdentifier,o=t.views.get(r);if(!o){let a=yl(n,i?s:null),l=!1;a?l=!0:s instanceof O?(a=$f(n,s),l=!1):(a=O.EMPTY_NODE,l=!1);const c=ec(new Zn(a,l,!1),new Zn(s,i,!1));return new _A(e,c)}return o}function PA(t,e,n,s,i,r){const o=r_(t,e,s,i,r);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),bA(o,n),NA(o,n)}function RA(t,e,n,s){const i=e._queryIdentifier,r=[];let o=[];const a=es(t);if(i==="default")for(const[l,c]of t.views.entries())o=o.concat(Ny(c,n,s)),by(c)&&(t.views.delete(l),c.query._queryParams.loadsAllData()||r.push(c.query));else{const l=t.views.get(i);l&&(o=o.concat(Ny(l,n,s)),by(l)&&(t.views.delete(i),l.query._queryParams.loadsAllData()||r.push(l.query)))}return a&&!es(t)&&r.push(new(TA())(e._repo,e._path)),{removed:r,events:o}}function o_(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function Yn(t,e){let n=null;for(const s of t.views.values())n=n||EA(s,e);return n}function a_(t,e){if(e._queryParams.loadsAllData())return nc(t);{const s=e._queryIdentifier;return t.views.get(s)}}function l_(t,e){return a_(t,e)!=null}function es(t){return nc(t)!=null}function nc(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _l;function IA(t){A(!_l,"__referenceConstructor has already been defined"),_l=t}function AA(){return A(_l,"Reference.ts has not been loaded"),_l}let DA=1;class Ty{constructor(e){this.listenProvider_=e,this.syncPointTree_=new se(null),this.pendingWriteTree_=cA(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function c_(t,e,n,s,i){return XI(t.pendingWriteTree_,e,n,s,i),i?Bi(t,new Ps(Vf(),e,n)):[]}function MA(t,e,n,s){JI(t.pendingWriteTree_,e,n,s);const i=se.fromObject(n);return Bi(t,new Ti(Vf(),e,i))}function Ln(t,e,n=!1){const s=ZI(t.pendingWriteTree_,e);if(eA(t.pendingWriteTree_,e)){let r=new se(null);return s.snap!=null?r=r.set(Z(),!0):Ue(s.children,o=>{r=r.set(new te(o),!0)}),Bi(t,new ml(s.path,r,n))}else return[]}function Do(t,e,n){return Bi(t,new Ps(zf(),e,n))}function LA(t,e,n){const s=se.fromObject(n);return Bi(t,new Ti(zf(),e,s))}function FA(t,e){return Bi(t,new co(zf(),e))}function OA(t,e,n){const s=Gf(t,n);if(s){const i=Yf(s),r=i.path,o=i.queryId,a=et(r,e),l=new co(Bf(o),a);return Qf(t,r,l)}else return[]}function Sl(t,e,n,s,i=!1){const r=e._path,o=t.syncPointTree_.get(r);let a=[];if(o&&(e._queryIdentifier==="default"||l_(o,e))){const l=RA(o,e,n,s);jA(o)&&(t.syncPointTree_=t.syncPointTree_.remove(r));const c=l.removed;if(a=l.events,!i){const d=c.findIndex(h=>h._queryParams.loadsAllData())!==-1,f=t.syncPointTree_.findOnPath(r,(h,p)=>es(p));if(d&&!f){const h=t.syncPointTree_.subtree(r);if(!h.isEmpty()){const p=BA(h);for(let y=0;y<p.length;++y){const w=p[y],C=w.query,g=f_(t,w);t.listenProvider_.startListening(Pr(C),uo(t,C),g.hashFn,g.onComplete)}}}!f&&c.length>0&&!s&&(d?t.listenProvider_.stopListening(Pr(e),null):c.forEach(h=>{const p=t.queryToTagMap.get(sc(h));t.listenProvider_.stopListening(Pr(h),p)}))}$A(t,c)}return a}function u_(t,e,n,s){const i=Gf(t,s);if(i!=null){const r=Yf(i),o=r.path,a=r.queryId,l=et(o,e),c=new Ps(Bf(a),l,n);return Qf(t,o,c)}else return[]}function VA(t,e,n,s){const i=Gf(t,s);if(i){const r=Yf(i),o=r.path,a=r.queryId,l=et(o,e),c=se.fromObject(n),d=new Ti(Bf(a),l,c);return Qf(t,o,d)}else return[]}function $d(t,e,n,s=!1){const i=e._path;let r=null,o=!1;t.syncPointTree_.foreachOnPath(i,(h,p)=>{const y=et(h,i);r=r||Yn(p,y),o=o||es(p)});let a=t.syncPointTree_.get(i);a?(o=o||es(a),r=r||Yn(a,Z())):(a=new i_,t.syncPointTree_=t.syncPointTree_.set(i,a));let l;r!=null?l=!0:(l=!1,r=O.EMPTY_NODE,t.syncPointTree_.subtree(i).foreachChild((p,y)=>{const w=Yn(y,Z());w&&(r=r.updateImmediateChild(p,w))}));const c=l_(a,e);if(!c&&!e._queryParams.loadsAllData()){const h=sc(e);A(!t.queryToTagMap.has(h),"View does not exist, but we have a tag");const p=UA();t.queryToTagMap.set(h,p),t.tagToQueryMap.set(p,h)}const d=tc(t.pendingWriteTree_,i);let f=PA(a,e,n,d,r,l);if(!c&&!o&&!s){const h=a_(a,e);f=f.concat(WA(t,e,h))}return f}function Kf(t,e,n){const i=t.pendingWriteTree_,r=t.syncPointTree_.findOnPath(e,(o,a)=>{const l=et(o,e),c=Yn(a,l);if(c)return c});return Jw(i,e,r,n,!0)}function zA(t,e){const n=e._path;let s=null;t.syncPointTree_.foreachOnPath(n,(c,d)=>{const f=et(c,n);s=s||Yn(d,f)});let i=t.syncPointTree_.get(n);i?s=s||Yn(i,Z()):(i=new i_,t.syncPointTree_=t.syncPointTree_.set(n,i));const r=s!=null,o=r?new Zn(s,!0,!1):null,a=tc(t.pendingWriteTree_,e._path),l=r_(i,e,a,r?o.getNode():O.EMPTY_NODE,r);return CA(l)}function Bi(t,e){return d_(e,t.syncPointTree_,null,tc(t.pendingWriteTree_,Z()))}function d_(t,e,n,s){if(H(t.path))return h_(t,e,n,s);{const i=e.get(Z());n==null&&i!=null&&(n=Yn(i,Z()));let r=[];const o=U(t.path),a=t.operationForChild(o),l=e.children.get(o);if(l&&a){const c=n?n.getImmediateChild(o):null,d=Zw(s,o);r=r.concat(d_(a,l,c,d))}return i&&(r=r.concat(Hf(i,t,s,n))),r}}function h_(t,e,n,s){const i=e.get(Z());n==null&&i!=null&&(n=Yn(i,Z()));let r=[];return e.children.inorderTraversal((o,a)=>{const l=n?n.getImmediateChild(o):null,c=Zw(s,o),d=t.operationForChild(o);d&&(r=r.concat(h_(d,a,l,c)))}),i&&(r=r.concat(Hf(i,t,s,n))),r}function f_(t,e){const n=e.query,s=uo(t,n);return{hashFn:()=>(SA(e)||O.EMPTY_NODE).hash(),onComplete:i=>{if(i==="ok")return s?OA(t,n._path,s):FA(t,n._path);{const r=FR(i,n);return Sl(t,n,null,r)}}}}function uo(t,e){const n=sc(e);return t.queryToTagMap.get(n)}function sc(t){return t._path.toString()+"$"+t._queryIdentifier}function Gf(t,e){return t.tagToQueryMap.get(e)}function Yf(t){const e=t.indexOf("$");return A(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new te(t.substr(0,e))}}function Qf(t,e,n){const s=t.syncPointTree_.get(e);A(s,"Missing sync point for query tag that we're tracking");const i=tc(t.pendingWriteTree_,e);return Hf(s,n,i,null)}function BA(t){return t.fold((e,n,s)=>{if(n&&es(n))return[nc(n)];{let i=[];return n&&(i=o_(n)),Ue(s,(r,o)=>{i=i.concat(o)}),i}})}function Pr(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(AA())(t._repo,t._path):t}function $A(t,e){for(let n=0;n<e.length;++n){const s=e[n];if(!s._queryParams.loadsAllData()){const i=sc(s),r=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(r)}}}function UA(){return DA++}function WA(t,e,n){const s=e._path,i=uo(t,e),r=f_(t,n),o=t.listenProvider_.startListening(Pr(e),i,r.hashFn,r.onComplete),a=t.syncPointTree_.subtree(s);if(i)A(!es(a.value),"If we're adding a query, it shouldn't be shadowed");else{const l=a.fold((c,d,f)=>{if(!H(c)&&d&&es(d))return[nc(d).query];{let h=[];return d&&(h=h.concat(o_(d).map(p=>p.query))),Ue(f,(p,y)=>{h=h.concat(y)}),h}});for(let c=0;c<l.length;++c){const d=l[c];t.listenProvider_.stopListening(Pr(d),uo(t,d))}}return o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qf{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new qf(n)}node(){return this.node_}}class Xf{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=xe(this.path_,e);return new Xf(this.syncTree_,n)}node(){return Kf(this.syncTree_,this.path_)}}const HA=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},jy=function(t,e,n){if(!t||typeof t!="object")return t;if(A(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return KA(t[".sv"],e,n);if(typeof t[".sv"]=="object")return GA(t[".sv"],e);A(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},KA=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:A(!1,"Unexpected server value: "+t)}},GA=function(t,e,n){t.hasOwnProperty("increment")||A(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const s=t.increment;typeof s!="number"&&A(!1,"Unexpected increment value: "+s);const i=e.node();if(A(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return s;const o=i.getValue();return typeof o!="number"?s:o+s},p_=function(t,e,n,s){return Jf(e,new Xf(n,t),s)},m_=function(t,e,n){return Jf(t,new qf(e),n)};function Jf(t,e,n){const s=t.getPriority().val(),i=jy(s,e.getImmediateChild(".priority"),n);let r;if(t.isLeafNode()){const o=t,a=jy(o.getValue(),e,n);return a!==o.getValue()||i!==o.getPriority().val()?new Ae(a,je(i)):t}else{const o=t;return r=o,i!==o.getPriority().val()&&(r=r.updatePriority(new Ae(i))),o.forEachChild(we,(a,l)=>{const c=Jf(l,e.getImmediateChild(a),n);c!==l&&(r=r.updateImmediateChild(a,c))}),r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zf{constructor(e="",n=null,s={children:{},childCount:0}){this.name=e,this.parent=n,this.node=s}}function ep(t,e){let n=e instanceof te?e:new te(e),s=t,i=U(n);for(;i!==null;){const r=bi(s.node.children,i)||{children:{},childCount:0};s=new Zf(i,s,r),n=re(n),i=U(n)}return s}function $i(t){return t.node.value}function g_(t,e){t.node.value=e,Ud(t)}function y_(t){return t.node.childCount>0}function YA(t){return $i(t)===void 0&&!y_(t)}function ic(t,e){Ue(t.node.children,(n,s)=>{e(new Zf(n,t,s))})}function v_(t,e,n,s){n&&!s&&e(t),ic(t,i=>{v_(i,e,!0,s)}),n&&s&&e(t)}function QA(t,e,n){let s=t.parent;for(;s!==null;){if(e(s))return!0;s=s.parent}return!1}function Mo(t){return new te(t.parent===null?t.name:Mo(t.parent)+"/"+t.name)}function Ud(t){t.parent!==null&&qA(t.parent,t.name,t)}function qA(t,e,n){const s=YA(n),i=sn(t.node.children,e);s&&i?(delete t.node.children[e],t.node.childCount--,Ud(t)):!s&&!i&&(t.node.children[e]=n.node,t.node.childCount++,Ud(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XA=/[\[\].#$\/\u0000-\u001F\u007F]/,JA=/[\[\].#$\u0000-\u001F\u007F]/,cu=10*1024*1024,tp=function(t){return typeof t=="string"&&t.length!==0&&!XA.test(t)},x_=function(t){return typeof t=="string"&&t.length!==0&&!JA.test(t)},ZA=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),x_(t)},eD=function(t){return t===null||typeof t=="string"||typeof t=="number"&&!Tf(t)||t&&typeof t=="object"&&sn(t,".sv")},w_=function(t,e,n,s){s&&e===void 0||rc(Xl(t,"value"),e,n)},rc=function(t,e,n){const s=n instanceof te?new yI(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+ds(s));if(typeof e=="function")throw new Error(t+"contains a function "+ds(s)+" with contents = "+e.toString());if(Tf(e))throw new Error(t+"contains "+e.toString()+" "+ds(s));if(typeof e=="string"&&e.length>cu/3&&Jl(e)>cu)throw new Error(t+"contains a string greater than "+cu+" utf8 bytes "+ds(s)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,r=!1;if(Ue(e,(o,a)=>{if(o===".value")i=!0;else if(o!==".priority"&&o!==".sv"&&(r=!0,!tp(o)))throw new Error(t+" contains an invalid key ("+o+") "+ds(s)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);vI(s,o),rc(t,a,s),xI(s)}),i&&r)throw new Error(t+' contains ".value" child '+ds(s)+" in addition to actual children.")}},tD=function(t,e){let n,s;for(n=0;n<e.length;n++){s=e[n];const r=ro(s);for(let o=0;o<r.length;o++)if(!(r[o]===".priority"&&o===r.length-1)){if(!tp(r[o]))throw new Error(t+"contains an invalid key ("+r[o]+") in path "+s.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(gI);let i=null;for(n=0;n<e.length;n++){if(s=e[n],i!==null&&Nt(i,s))throw new Error(t+"contains a path "+i.toString()+" that is ancestor of another path "+s.toString());i=s}},nD=function(t,e,n,s){const i=Xl(t,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const r=[];Ue(e,(o,a)=>{const l=new te(o);if(rc(i,a,xe(n,l)),Af(l)===".priority"&&!eD(a))throw new Error(i+"contains an invalid value for '"+l.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");r.push(l)}),tD(i,r)},__=function(t,e,n,s){if(!x_(n))throw new Error(Xl(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},sD=function(t,e,n,s){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),__(t,e,n)},np=function(t,e){if(U(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},iD=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!tp(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!ZA(n))throw new Error(Xl(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rD{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function oc(t,e){let n=null;for(let s=0;s<e.length;s++){const i=e[s],r=i.getPath();n!==null&&!Df(r,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:r}),n.events.push(i)}n&&t.eventLists_.push(n)}function S_(t,e,n){oc(t,n),C_(t,s=>Df(s,e))}function Rt(t,e,n){oc(t,n),C_(t,s=>Nt(s,e)||Nt(e,s))}function C_(t,e){t.recursionDepth_++;let n=!0;for(let s=0;s<t.eventLists_.length;s++){const i=t.eventLists_[s];if(i){const r=i.path;e(r)?(oD(t.eventLists_[s]),t.eventLists_[s]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function oD(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const s=n.getEventRunner();Nr&&ze("event: "+n.toString()),zi(s)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aD="repo_interrupt",lD=25;class cD{constructor(e,n,s,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=s,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new rD,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=pl(),this.transactionQueueTree_=new Zf,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function uD(t,e,n){if(t.stats_=Rf(t.repoInfo_),t.forceRestClient_||BR())t.server_=new fl(t.repoInfo_,(s,i,r,o)=>{Py(t,s,i,r,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>Ry(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Pe(n)}catch(s){throw new Error("Invalid authOverride provided: "+s)}}t.persistentConnection_=new fn(t.repoInfo_,e,(s,i,r,o)=>{Py(t,s,i,r,o)},s=>{Ry(t,s)},s=>{dD(t,s)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(s=>{t.server_.refreshAuthToken(s)}),t.appCheckProvider_.addTokenChangeListener(s=>{t.server_.refreshAppCheckToken(s.token)}),t.statsReporter_=KR(t.repoInfo_,()=>new HI(t.stats_,t.server_)),t.infoData_=new zI,t.infoSyncTree_=new Ty({startListening:(s,i,r,o)=>{let a=[];const l=t.infoData_.getNode(s._path);return l.isEmpty()||(a=Do(t.infoSyncTree_,s._path,l),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),sp(t,"connected",!1),t.serverSyncTree_=new Ty({startListening:(s,i,r,o)=>(t.server_.listen(s,r,i,(a,l)=>{const c=o(a,l);Rt(t.eventQueue_,s._path,c)}),[]),stopListening:(s,i)=>{t.server_.unlisten(s,i)}})}function E_(t){const n=t.infoData_.getNode(new te(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function ac(t){return HA({timestamp:E_(t)})}function Py(t,e,n,s,i){t.dataUpdateCount++;const r=new te(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(i)if(s){const l=ol(n,c=>je(c));o=VA(t.serverSyncTree_,r,l,i)}else{const l=je(n);o=u_(t.serverSyncTree_,r,l,i)}else if(s){const l=ol(n,c=>je(c));o=LA(t.serverSyncTree_,r,l)}else{const l=je(n);o=Do(t.serverSyncTree_,r,l)}let a=r;o.length>0&&(a=Pi(t,r)),Rt(t.eventQueue_,a,o)}function Ry(t,e){sp(t,"connected",e),e===!1&&mD(t)}function dD(t,e){Ue(e,(n,s)=>{sp(t,n,s)})}function sp(t,e,n){const s=new te("/.info/"+e),i=je(n);t.infoData_.updateSnapshot(s,i);const r=Do(t.infoSyncTree_,s,i);Rt(t.eventQueue_,s,r)}function ip(t){return t.nextWriteId_++}function hD(t,e,n){const s=zA(t.serverSyncTree_,e);return s!=null?Promise.resolve(s):t.server_.get(e).then(i=>{const r=je(i).withIndex(e._queryParams.getIndex());$d(t.serverSyncTree_,e,n,!0);let o;if(e._queryParams.loadsAllData())o=Do(t.serverSyncTree_,e._path,r);else{const a=uo(t.serverSyncTree_,e);o=u_(t.serverSyncTree_,e._path,r,a)}return Rt(t.eventQueue_,e._path,o),Sl(t.serverSyncTree_,e,n,null,!0),r},i=>(Lo(t,"get for query "+Pe(e)+" failed: "+i),Promise.reject(new Error(i))))}function fD(t,e,n,s,i){Lo(t,"set",{path:e.toString(),value:n,priority:s});const r=ac(t),o=je(n,s),a=Kf(t.serverSyncTree_,e),l=m_(o,a,r),c=ip(t),d=c_(t.serverSyncTree_,e,l,c,!0);oc(t.eventQueue_,d),t.server_.put(e.toString(),o.val(!0),(h,p)=>{const y=h==="ok";y||nt("set at "+e+" failed: "+h);const w=Ln(t.serverSyncTree_,c,!y);Rt(t.eventQueue_,e,w),Wd(t,i,h,p)});const f=op(t,e);Pi(t,f),Rt(t.eventQueue_,f,[])}function pD(t,e,n,s){Lo(t,"update",{path:e.toString(),value:n});let i=!0;const r=ac(t),o={};if(Ue(n,(a,l)=>{i=!1,o[a]=p_(xe(e,a),je(l),t.serverSyncTree_,r)}),i)ze("update() called with empty data.  Don't do anything."),Wd(t,s,"ok",void 0);else{const a=ip(t),l=MA(t.serverSyncTree_,e,o,a);oc(t.eventQueue_,l),t.server_.merge(e.toString(),n,(c,d)=>{const f=c==="ok";f||nt("update at "+e+" failed: "+c);const h=Ln(t.serverSyncTree_,a,!f),p=h.length>0?Pi(t,e):e;Rt(t.eventQueue_,p,h),Wd(t,s,c,d)}),Ue(n,c=>{const d=op(t,xe(e,c));Pi(t,d)}),Rt(t.eventQueue_,e,[])}}function mD(t){Lo(t,"onDisconnectEvents");const e=ac(t),n=pl();Ld(t.onDisconnect_,Z(),(i,r)=>{const o=p_(i,r,t.serverSyncTree_,e);Yw(n,i,o)});let s=[];Ld(n,Z(),(i,r)=>{s=s.concat(Do(t.serverSyncTree_,i,r));const o=op(t,i);Pi(t,o)}),t.onDisconnect_=pl(),Rt(t.eventQueue_,Z(),s)}function gD(t,e,n){let s;U(e._path)===".info"?s=$d(t.infoSyncTree_,e,n):s=$d(t.serverSyncTree_,e,n),S_(t.eventQueue_,e._path,s)}function b_(t,e,n){let s;U(e._path)===".info"?s=Sl(t.infoSyncTree_,e,n):s=Sl(t.serverSyncTree_,e,n),S_(t.eventQueue_,e._path,s)}function yD(t){t.persistentConnection_&&t.persistentConnection_.interrupt(aD)}function Lo(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),ze(n,...e)}function Wd(t,e,n,s){e&&zi(()=>{if(n==="ok")e(null);else{const i=(n||"error").toUpperCase();let r=i;s&&(r+=": "+s);const o=new Error(r);o.code=i,e(o)}})}function N_(t,e,n){return Kf(t.serverSyncTree_,e,n)||O.EMPTY_NODE}function rp(t,e=t.transactionQueueTree_){if(e||lc(t,e),$i(e)){const n=T_(t,e);A(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&vD(t,Mo(e),n)}else y_(e)&&ic(e,n=>{rp(t,n)})}function vD(t,e,n){const s=n.map(c=>c.currentWriteId),i=N_(t,e,s);let r=i;const o=i.hash();for(let c=0;c<n.length;c++){const d=n[c];A(d.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),d.status=1,d.retryCount++;const f=et(e,d.path);r=r.updateChild(f,d.currentOutputSnapshotRaw)}const a=r.val(!0),l=e;t.server_.put(l.toString(),a,c=>{Lo(t,"transaction put response",{path:l.toString(),status:c});let d=[];if(c==="ok"){const f=[];for(let h=0;h<n.length;h++)n[h].status=2,d=d.concat(Ln(t.serverSyncTree_,n[h].currentWriteId)),n[h].onComplete&&f.push(()=>n[h].onComplete(null,!0,n[h].currentOutputSnapshotResolved)),n[h].unwatcher();lc(t,ep(t.transactionQueueTree_,e)),rp(t,t.transactionQueueTree_),Rt(t.eventQueue_,e,d);for(let h=0;h<f.length;h++)zi(f[h])}else{if(c==="datastale")for(let f=0;f<n.length;f++)n[f].status===3?n[f].status=4:n[f].status=0;else{nt("transaction at "+l.toString()+" failed: "+c);for(let f=0;f<n.length;f++)n[f].status=4,n[f].abortReason=c}Pi(t,e)}},o)}function Pi(t,e){const n=k_(t,e),s=Mo(n),i=T_(t,n);return xD(t,i,s),s}function xD(t,e,n){if(e.length===0)return;const s=[];let i=[];const o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const l=e[a],c=et(n,l.path);let d=!1,f;if(A(c!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),l.status===4)d=!0,f=l.abortReason,i=i.concat(Ln(t.serverSyncTree_,l.currentWriteId,!0));else if(l.status===0)if(l.retryCount>=lD)d=!0,f="maxretry",i=i.concat(Ln(t.serverSyncTree_,l.currentWriteId,!0));else{const h=N_(t,l.path,o);l.currentInputSnapshot=h;const p=e[a].update(h.val());if(p!==void 0){rc("transaction failed: Data returned ",p,l.path);let y=je(p);typeof p=="object"&&p!=null&&sn(p,".priority")||(y=y.updatePriority(h.getPriority()));const C=l.currentWriteId,g=ac(t),m=m_(y,h,g);l.currentOutputSnapshotRaw=y,l.currentOutputSnapshotResolved=m,l.currentWriteId=ip(t),o.splice(o.indexOf(C),1),i=i.concat(c_(t.serverSyncTree_,l.path,m,l.currentWriteId,l.applyLocally)),i=i.concat(Ln(t.serverSyncTree_,C,!0))}else d=!0,f="nodata",i=i.concat(Ln(t.serverSyncTree_,l.currentWriteId,!0))}Rt(t.eventQueue_,n,i),i=[],d&&(e[a].status=2,function(h){setTimeout(h,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(f==="nodata"?s.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):s.push(()=>e[a].onComplete(new Error(f),!1,null))))}lc(t,t.transactionQueueTree_);for(let a=0;a<s.length;a++)zi(s[a]);rp(t,t.transactionQueueTree_)}function k_(t,e){let n,s=t.transactionQueueTree_;for(n=U(e);n!==null&&$i(s)===void 0;)s=ep(s,n),e=re(e),n=U(e);return s}function T_(t,e){const n=[];return j_(t,e,n),n.sort((s,i)=>s.order-i.order),n}function j_(t,e,n){const s=$i(e);if(s)for(let i=0;i<s.length;i++)n.push(s[i]);ic(e,i=>{j_(t,i,n)})}function lc(t,e){const n=$i(e);if(n){let s=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[s]=n[i],s++);n.length=s,g_(e,n.length>0?n:void 0)}ic(e,s=>{lc(t,s)})}function op(t,e){const n=Mo(k_(t,e)),s=ep(t.transactionQueueTree_,e);return QA(s,i=>{uu(t,i)}),uu(t,s),v_(s,i=>{uu(t,i)}),n}function uu(t,e){const n=$i(e);if(n){const s=[];let i=[],r=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(A(r===o-1,"All SENT items should be at beginning of queue."),r=o,n[o].status=3,n[o].abortReason="set"):(A(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(Ln(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&s.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));r===-1?g_(e,void 0):n.length=r+1,Rt(t.eventQueue_,Mo(e),i);for(let o=0;o<s.length;o++)zi(s[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wD(t){let e="";const n=t.split("/");for(let s=0;s<n.length;s++)if(n[s].length>0){let i=n[s];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function _D(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const s=n.split("=");s.length===2?e[decodeURIComponent(s[0])]=decodeURIComponent(s[1]):nt(`Invalid query segment '${n}' in query '${t}'`)}return e}const Iy=function(t,e){const n=SD(t),s=n.namespace;n.domain==="firebase.com"&&En(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!s||s==="undefined")&&n.domain!=="localhost"&&En("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||IR();const i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new Rw(n.host,n.secure,s,i,e,"",s!==n.subdomain),path:new te(n.pathString)}},SD=function(t){let e="",n="",s="",i="",r="",o=!0,a="https",l=443;if(typeof t=="string"){let c=t.indexOf("//");c>=0&&(a=t.substring(0,c-1),t=t.substring(c+2));let d=t.indexOf("/");d===-1&&(d=t.length);let f=t.indexOf("?");f===-1&&(f=t.length),e=t.substring(0,Math.min(d,f)),d<f&&(i=wD(t.substring(d,f)));const h=_D(t.substring(Math.min(t.length,f)));c=e.indexOf(":"),c>=0?(o=a==="https"||a==="wss",l=parseInt(e.substring(c+1),10)):c=e.length;const p=e.slice(0,c);if(p.toLowerCase()==="localhost")n="localhost";else if(p.split(".").length<=2)n=p;else{const y=e.indexOf(".");s=e.substring(0,y).toLowerCase(),n=e.substring(y+1),r=s}"ns"in h&&(r=h.ns)}return{host:e,port:l,domain:n,subdomain:s,secure:o,scheme:a,pathString:i,namespace:r}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ay="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",CD=function(){let t=0;const e=[];return function(n){const s=n===t;t=n;let i;const r=new Array(8);for(i=7;i>=0;i--)r[i]=Ay.charAt(n%64),n=Math.floor(n/64);A(n===0,"Cannot push at time == 0");let o=r.join("");if(s){for(i=11;i>=0&&e[i]===63;i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(Math.random()*64);for(i=0;i<12;i++)o+=Ay.charAt(e[i]);return A(o.length===20,"nextPushId: Length should be 20."),o}}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ED{constructor(e,n,s,i){this.eventType=e,this.eventRegistration=n,this.snapshot=s,this.prevName=i}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Pe(this.snapshot.exportVal())}}class bD{constructor(e,n,s){this.eventRegistration=e,this.error=n,this.path=s}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ap{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return A(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lp{constructor(e,n,s,i){this._repo=e,this._path=n,this._queryParams=s,this._orderByCalled=i}get key(){return H(this._path)?null:Af(this._path)}get ref(){return new Nn(this._repo,this._path)}get _queryIdentifier(){const e=vy(this._queryParams),n=jf(e);return n==="{}"?"default":n}get _queryObject(){return vy(this._queryParams)}isEqual(e){if(e=Fs(e),!(e instanceof lp))return!1;const n=this._repo===e._repo,s=Df(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&s&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+mI(this._path)}}class Nn extends lp{constructor(e,n){super(e,n,new Of,!1)}get parent(){const e=zw(this._path);return e===null?null:new Nn(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class ho{constructor(e,n,s){this._node=e,this.ref=n,this._index=s}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new te(e),s=fo(this.ref,e);return new ho(this._node.getChild(n),s,we)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(s,i)=>e(new ho(i,fo(this.ref,s),we)))}hasChild(e){const n=new te(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Y(t,e){return t=Fs(t),t._checkNotDeleted("ref"),e!==void 0?fo(t._root,e):t._root}function fo(t,e){return t=Fs(t),U(t._path)===null?sD("child","path",e):__("child","path",e),new Nn(t._repo,xe(t._path,e))}function Hd(t,e){t=Fs(t),np("push",t._path),w_("push",e,t._path,!0);const n=E_(t._repo),s=CD(n),i=fo(t,s),r=fo(t,s);let o;return o=Promise.resolve(r),i.then=o.then.bind(o),i.catch=o.then.bind(o,void 0),i}function P_(t){return np("remove",t._path),Dt(t,null)}function Dt(t,e){t=Fs(t),np("set",t._path),w_("set",e,t._path,!1);const n=new jo;return fD(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function cr(t,e){nD("update",e,t._path);const n=new jo;return pD(t._repo,t._path,e,n.wrapCallback(()=>{})),n.promise}function jn(t){t=Fs(t);const e=new ap(()=>{}),n=new Fo(e);return hD(t._repo,t,n).then(s=>new ho(s,new Nn(t._repo,t._path),t._queryParams.getIndex()))}class Fo{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const s=n._queryParams.getIndex();return new ED("value",this,new ho(e.snapshotNode,new Nn(n._repo,n._path),s))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new bD(this,e,n):null}matches(e){return e instanceof Fo?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function ND(t,e,n,s,i){const r=new ap(n,void 0),o=new Fo(r);return gD(t._repo,t,o),()=>b_(t._repo,t,o)}function Ft(t,e,n,s){return ND(t,"value",e)}function Ot(t,e,n){let s=null;const i=n?new ap(n):null;s=new Fo(i),b_(t._repo,t,s)}kA(Nn);IA(Nn);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kD="FIREBASE_DATABASE_EMULATOR_HOST",Kd={};let TD=!1;function jD(t,e,n,s){const i=e.lastIndexOf(":"),r=e.substring(0,i),o=Nf(r);t.repoInfo_=new Rw(e,o,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0,n),s&&(t.authTokenProvider_=s)}function PD(t,e,n,s,i){let r=s||t.options.databaseURL;r===void 0&&(t.options.projectId||En("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),ze("Using default host for project ",t.options.projectId),r=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=Iy(r,i),a=o.repoInfo,l;typeof process<"u"&&ey&&(l=ey[kD]),l?(r=`http://${l}?ns=${a.namespace}`,o=Iy(r,i),a=o.repoInfo):o.repoInfo.secure;const c=new UR(t.name,t.options,e);iD("Invalid Firebase Database URL",o),H(o.path)||En("Database URL must point to the root of a Firebase Database (not including a child path).");const d=ID(a,t,c,new $R(t,n));return new AD(d,t)}function RD(t,e){const n=Kd[e];(!n||n[t.key]!==t)&&En(`Database ${e}(${t.repoInfo_}) has already been deleted.`),yD(t),delete n[t.key]}function ID(t,e,n,s){let i=Kd[e.name];i||(i={},Kd[e.name]=i);let r=i[t.toURLString()];return r&&En("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),r=new cD(t,TD,n,s),i[t.toURLString()]=r,r}class AD{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(uD(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Nn(this._repo,Z())),this._rootInternal}_delete(){return this._rootInternal!==null&&(RD(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&En("Cannot call "+e+" on a deleted database.")}}function DD(t=fR(),e){const n=lR(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const s=Yj("database");s&&MD(n,...s)}return n}function MD(t,e,n,s={}){t=Fs(t),t._checkNotDeleted("useEmulator");const i=`${e}:${n}`,r=t._repoInternal;if(t._instanceStarted){if(i===t._repoInternal.repoInfo_.host&&al(s,r.repoInfo_.emulatorOptions))return;En("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let o;if(r.repoInfo_.nodeAdmin)s.mockUserToken&&En('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new ka(ka.OWNER);else if(s.mockUserToken){const a=typeof s.mockUserToken=="string"?s.mockUserToken:qj(s.mockUserToken,t.app.options.projectId);o=new ka(a)}Nf(e)&&(Qj(e),Zj("Database",!0)),jD(r,i,s,o)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LD(t){NR(hR),cl(new no("database",(e,{instanceIdentifier:n})=>{const s=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),r=e.getProvider("app-check-internal");return PD(s,i,r,n)},"PUBLIC").setMultipleInstances(!0)),pi(ty,ny,t),pi(ty,ny,"esm2020")}fn.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};fn.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};LD();const FD={apiKey:"AIzaSyAlumyyH_QKhS86Xnr70MbdseqfauELVBw",authDomain:"aletwende.firebaseapp.com",databaseURL:"https://aletwende-default-rtdb.firebaseio.com",projectId:"aletwende",storageBucket:"aletwende.firebasestorage.app",messagingSenderId:"142861545293",appId:"1:142861545293:web:68937455173fb34ce19104",measurementId:"G-VKEVKGT6QK"},OD=pw(FD),Q=DD(OD),VD="T8GhAVunanZmkz3QMfPZfRsCdzJ2";class zD{async createRideRequest(e){const n={...e,timestamp:Date.now()},s=Y(Q,"rides"),i=Hd(s),r=i.key;return await Dt(i,n),await Dt(Y(Q,`rideRequests/${r}`),n),await Dt(Y(Q,`drivers/${VD}/incoming/${r}`),n),r}async updateRideStatus(e,n){const s=Y(Q,`rides/${e}/status`);console.log("Updating ride status:",{rideId:e,status:n}),await Dt(s,n),console.log("Ride status updated successfully")}async cancelRideRequest(e){await this.updateRideStatus(e,"cancelled")}async saveCancellationReason(e,n,s,i){if(!e)throw new Error("Missing rideId for cancellation");const r=Y(Q,`cancellations/${e}`),o={rideId:e,cancelledReason:n,cancelledAt:Date.now(),userId:s,userName:i};console.log("Saving cancellation reason:",o),await Dt(r,o),console.log("Cancellation reason saved successfully")}async findActiveRideByUser(e){const n=Y(Q,"rides"),s=await jn(n);if(!s.exists())return null;let i=null,r=0;return s.forEach(o=>{const a=o.val(),l=o.key;a&&a.userId===e&&a.status==="pending"&&(!i||a.timestamp>r)&&(r=a.timestamp,i=l)}),i}listenToRideRequest(e,n){const s=Y(Q,`rides/${e}`),i=Ft(s,r=>{const o=r.val();n(o?{...o,id:e}:null)});return()=>Ot(s,"value",i)}async saveUserProfile(e,n){const s=Y(Q,`users/${e}`),i=await jn(s),r=Date.now(),o={...n,id:e,createdAt:i.exists()?i.val().createdAt:r,updatedAt:r};await Dt(s,o)}async getUserProfile(e){const n=Y(Q,`users/${e}`),s=await jn(n);return s.exists()?s.val():null}listenToUserProfile(e,n){const s=Y(Q,`users/${e}`),i=Ft(s,r=>{const o=r.val();n(o||null)});return()=>Ot(s,"value",i)}async getDriverInfo(e){const n=Y(Q,`drivers/${e}`),s=await jn(n);return s.exists()?s.val():null}listenToRideStatus(e,n){const s=Y(Q,`rides/${e}`),i=Ft(s,r=>{const o=r.val();n(o?{status:o.status,driverId:o.driverId}:null)});return()=>Ot(s,"value",i)}async startRide(e){const n=Y(Q,`rides/${e}/status`);await Dt(n,"started")}listenToDriverLocation(e,n){const s=Y(Q,`drivers/${e}/operation`),i=Ft(s,r=>{const o=r.val();o&&o.lat&&o.lng?n({lat:o.lat,lng:o.lng,timestamp:o.timestamp||Date.now()}):n(null)});return()=>Ot(s,"value",i)}async sendMessage(e,n,s,i,r){const o=Y(Q,`rides/${e}/messages`),a=Hd(o),l=a.key,c={senderId:n,sender:i,senderName:r||(i==="client"?"Client":"Driver"),text:s,timestamp:Date.now(),read:i==="client",readBy:{[n]:!0}};return await Dt(a,c),l}listenToMessages(e,n){const s=Y(Q,`rides/${e}/messages`),i=Ft(s,r=>{if(!r.exists())return;const o=[];r.forEach(a=>{const l=a.val();l&&o.push({id:a.key,...l})}),o.sort((a,l)=>a.timestamp-l.timestamp),o.forEach(a=>n(a))});return()=>Ot(s,"value",i)}async markMessageAsRead(e,n,s){const i=Y(Q,`rides/${e}/messages/${n}`);await cr(i,{read:!0,[`readBy/${s}`]:!0})}async markAllMessagesAsRead(e){const n=Y(Q,`rides/${e}/messages`),s=await jn(n);if(!s.exists())return;const i={};s.forEach(r=>{const o=r.val();o.sender==="driver"&&!o.read&&(i[`${r.key}/read`]=!0)}),Object.keys(i).length>0&&await cr(n,i)}async getAllMessages(e){const n=Y(Q,`rides/${e}/messages`),s=await jn(n);if(!s.exists())return[];const i=[];return s.forEach(r=>{i.push({id:r.key,...r.val()})}),i.sort((r,o)=>r.timestamp-o.timestamp)}async clearRideMessages(e){const n=Y(Q,`rides/${e}/messages`);await P_(n),localStorage.removeItem(`messages_${e}`),localStorage.removeItem(`unread_${e}`)}listenToRideCompletion(e,n){const s=Y(Q,`rides/${e}/status`),i=Ft(s,async r=>{r.val()==="completed"&&(await this.clearRideMessages(e),n(!0))});return()=>Ot(s,"value",i)}async submitRating(e,n,s,i,r){const o=Y(Q,`ratings/${e}/${n}`);await Dt(o,{score:s,comment:i,userId:r,timestamp:Date.now()});const a=Y(Q,`ratings/${e}`),l=await jn(a);if(l.exists()){const c=l.val(),d=Object.values(c),f=d.reduce((h,p)=>h+p.score,0)/d.length;await cr(Y(Q,`drivers/${e}`),{rating:parseFloat(f.toFixed(2))})}await cr(Y(Q,`rides/${n}`),{rated:!0})}listenToDriverLocationAndETA(e,n){const s=Y(Q,`rides/${e}`),i=Ft(s,r=>{const o=r.val();if(!o||!o.driverLocation)return;const{lat:a,lng:l}=o.driverLocation,c=o.driverETA||"3 mins";n({location:{lat:a,lng:l},eta:c})});return()=>Ot(s,"value",i)}}const Ce=new zD,R_=v.createContext({currentRide:null,setCurrentRide:()=>{},isRideActive:!1,rideStatus:null}),cp=()=>v.useContext(R_),BD=({rideId:t,children:e})=>{const[n,s]=v.useState(null),[i,r]=v.useState(null);v.useEffect(()=>{if(!t){s(null),r(null);return}const a=Ce.listenToRideRequest(t,l=>{s(l),r((l==null?void 0:l.status)||null)});return()=>a()},[t]);const o=i==="pending"||i==="accepted"||i==="arrived"||i==="started"||i==="on_trip";return u.jsx(R_.Provider,{value:{currentRide:n,setCurrentRide:s,isRideActive:o,rideStatus:i},children:e})},la=({onSearchSelect:t})=>{const e=be(),[n,s]=v.useState(!0),{isRideActive:i,rideStatus:r}=cp(),o=h=>{alert(r==="pending"?"You already have an active request.":"You already have an active ride."),e(h)},a=()=>{i||r==="pending"?o(r==="pending"?"/waiting-for-driver":"/driver-coming"):e("/your-route")},l=()=>{i||r==="pending"?o(r==="pending"?"/waiting-for-driver":"/driver-coming"):e("/your-route")},c=h=>{i||r==="pending"?o(r==="pending"?"/waiting-for-driver":"/driver-coming"):t(h)},f=[{id:"rides",label:"Rides",description:"Let's get moving",icon:"",action:a},{id:"schedule",label:"Schedule",description:"Book ahead",icon:""},{id:"aletwende",label:"Aletwende Send",description:"Package delivery",icon:"",action:()=>{i||r==="pending"?o(r==="pending"?"/waiting-for-driver":"/driver-coming"):e("/aletwende-send")}}];return u.jsxs("div",{className:"min-h-screen relative overflow-hidden",children:[u.jsx(Ls,{}),u.jsx(j.div,{className:"absolute top-0 left-0 right-0 z-10 p-4",initial:{y:-50,opacity:0},animate:{y:0,opacity:1},transition:{delay:.1},children:u.jsx("div",{className:"flex items-center justify-between",children:u.jsx("button",{className:"w-10 h-10 bg-white rounded-full shadow-lg flex items-center justify-center",children:u.jsx("div",{className:"w-6 h-6 grid grid-cols-3 gap-0.5",children:[...Array(9)].map((h,p)=>u.jsx("div",{className:"w-1 h-1 bg-gray-800 rounded-full"},p))})})})}),n&&u.jsx(j.div,{className:"absolute top-20 left-4 right-4 z-10 bg-blue-100 rounded-xl p-4 shadow-lg",initial:{y:-100,opacity:0},animate:{y:0,opacity:1},transition:{delay:.3},children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsx("div",{className:"w-12 h-12 bg-blue-600 rounded-full flex items-center justify-center",children:u.jsx(X1,{className:"text-white",size:24})}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-bold text-gray-800",children:"Go Cashless, Enjoy 25% OFF!"}),u.jsx("p",{className:"text-sm text-gray-600",children:"Add your card today and enjoy 25% off your next 5 rides this month!"})]})]}),u.jsx("button",{onClick:()=>s(!1),className:"p-2 hover:bg-blue-200 rounded-full transition-colors",children:u.jsx(Ee,{size:20,className:"text-gray-600"})})]})}),u.jsx(Ql,{initialHeight:450,maxHeight:600,minHeight:300,children:u.jsxs("div",{className:"space-y-6",children:[u.jsx(j.h1,{className:"text-3xl font-bold text-gray-900 mt-4",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},children:"Let's go places."}),u.jsx(j.div,{className:"grid grid-cols-3 gap-4",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},children:f.map((h,p)=>u.jsxs(j.button,{onClick:()=>{h.action?h.action():h.id==="schedule"&&e("/schedule-ride")},className:"bg-gray-100 rounded-2xl p-4 text-center hover:bg-gray-200 transition-all",whileTap:{scale:.95},initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:.6+p*.1},children:[u.jsx("div",{className:"text-3xl mb-2",children:h.icon}),u.jsx("h3",{className:"font-semibold text-gray-900",children:h.label}),u.jsx("p",{className:"text-xs text-gray-600 mt-1",children:h.description})]},h.id))}),u.jsxs(j.div,{className:"space-y-4",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.7},children:[u.jsxs("div",{className:"flex space-x-3",children:[u.jsxs("div",{className:"flex-1 relative",children:[u.jsx(Yl,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),u.jsx("button",{onClick:l,className:"w-full bg-gray-100 rounded-xl pl-12 pr-4 py-4 text-left text-gray-500 hover:bg-gray-200 transition-colors",children:"Where to?"})]}),u.jsx("button",{onClick:()=>e("/schedule-ride"),className:"bg-gray-100 rounded-xl p-4 hover:bg-gray-200 transition-colors",children:u.jsx(To,{className:"text-gray-600",size:20})})]}),u.jsx(Ms,{maxHeight:"max-h-40",children:u.jsx("div",{className:"space-y-2",children:Fj.map((h,p)=>u.jsxs(j.button,{onClick:()=>c(h.address),className:"w-full flex items-center space-x-3 p-3 hover:bg-gray-50 rounded-lg transition-colors text-left",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.8+p*.1},whileTap:{scale:.98},children:[u.jsx(Ts,{className:"text-gray-400 flex-shrink-0",size:20}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("p",{className:"font-medium text-gray-900 truncate",children:h.address}),u.jsx("p",{className:"text-sm text-gray-500 truncate",children:h.description})]})]},h.id))})})]})]})}),u.jsx(ql,{})]})},up=()=>{const[t,e]=v.useState({latitude:null,longitude:null,address:null,loading:!0,error:null}),n=async(s,i)=>{const r=["49 Cornwell Street, West Turffontein, Johannesburg","34 Beaumont Street, Marshalltown, Johannesburg","78 Eastwood Street, West Turffontein, Johannesburg","92 Beaumont Street, West Turffontein, Johannesburg"];return r[Math.floor(Math.random()*r.length)]};return v.useEffect(()=>{if(!navigator.geolocation){e(s=>({...s,loading:!1,error:"Geolocation is not supported by this browser"}));return}navigator.geolocation.getCurrentPosition(async s=>{const{latitude:i,longitude:r}=s.coords;try{const o=await n(i,r);e({latitude:i,longitude:r,address:o,loading:!1,error:null})}catch{e(a=>({...a,latitude:i,longitude:r,loading:!1,error:"Failed to get address"}))}},s=>{e(i=>({...i,loading:!1,error:s.message}))},{enableHighAccuracy:!0,timeout:1e4,maximumAge:3e5})},[]),t},Dy=[{id:"1",address:"78 Eastwood Street",description:"West Turffontein, Johannesburg",distance:"<1 km"},{id:"2",address:"KFC Gandhi Square",description:"Umnutho House, Eloff Street, Marshalltown",distance:"2.5 km"},{id:"3",address:"130 Main Street",description:"Marshalltown, Johannesburg",distance:"1.8 km"},{id:"4",address:"8 Turf Street",description:"Forest Hill, Johannesburg",distance:"3.2 km"},{id:"5",address:"Johannesburg Park Station",description:"Rissik Street, Johannesburg",distance:"2.1 km"},{id:"6",address:"Mall of Africa",description:"Magwa Crescent, Waterval City, Johannesburg",distance:"15.3 km"},{id:"7",address:"Johannesburg OR Tambo Airport (JNB)",description:"1 Jones Road, OR Tambo International Airport",distance:"45.2 km"},{id:"8",address:"49 Cornwell Street",description:"West Turffontein, Johannesburg",distance:"<1 km"},{id:"9",address:"47 Cornwell Street",description:"West Turffontein, Johannesburg",distance:"<1 km"},{id:"10",address:"46 Cornwell Street",description:"West Turffontein, Johannesburg",distance:"<1 km"}],Cl=t=>t.trim()?Dy.filter(e=>e.address.toLowerCase().includes(t.toLowerCase())||e.description.toLowerCase().includes(t.toLowerCase())):Dy,$D=({onRouteComplete:t})=>{const e=be(),n=xt(),{address:s,loading:i}=up(),[r,o]=v.useState(""),[a,l]=v.useState(""),[c,d]=v.useState([]),[f,h]=v.useState("destination"),[p,y]=v.useState(""),[w,C]=v.useState(Cl(""));v.useEffect(()=>{s&&!r&&o(s)},[s,r]),v.useEffect(()=>{if(n.state){const{highlightDestination:N,highlightAddStop:P,prefilledDestination:$,prefilledPickup:M}=n.state;M&&o(M),$&&l($),N?(h("destination"),y($||"")):P?(d([""]),h(0),y("")):h("destination")}else h("destination")},[n.state]),v.useEffect(()=>{C(Cl(p))},[p]);const g=()=>{if(!r)return"pickup";if(!a)return"destination";for(let N=0;N<c.length;N++)if(!c[N]||c[N].trim()==="")return N;return null},m=()=>{const N=r&&r.trim()!=="",P=a&&a.trim()!=="",$=c.length===0||c.every(M=>M&&M.trim()!=="");return N&&P&&$},x=N=>{h(N),y(N==="pickup"?r:N==="destination"?a:c[N]||"")},b=N=>{if(f==="pickup")o(N);else if(f==="destination")l(N);else if(typeof f=="number"){const P=[...c];P[f]=N,d(P)}y(""),setTimeout(()=>{const P=g();P!==null?(h(P),y(P==="pickup"?r:P==="destination"?a:c[P]||"")):m()&&(t==null||t(r,a,c),e("/select-ride"))},100)},S=()=>{if(c.length<3){const N=[...c,""];d(N),h(N.length-1),y("")}},T=N=>{const P=c.filter(($,M)=>M!==N);if(d(P),f===N){const $=g();h($||"destination")}},E=N=>{if(f==="pickup")o(N);else if(f==="destination")l(N);else if(typeof f=="number"){const P=[...c];P[f]=N,d(P)}y(N)},_=N=>N==="pickup"?"Search pick-up location":N==="destination"?"Destination":"Add stop",k=N=>f===N;return u.jsxs("div",{className:"min-h-screen relative overflow-hidden bg-gray-50",children:[u.jsx(Ls,{}),u.jsx(j.div,{className:"absolute top-0 left-0 right-0 z-10 p-4 bg-white shadow-sm",initial:{y:-50,opacity:0},animate:{y:0,opacity:1},transition:{delay:.1},children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("button",{onClick:()=>e("/"),className:"w-10 h-10 flex items-center justify-center hover:bg-gray-100 rounded-full transition-colors",children:u.jsx(Ee,{size:24,className:"text-gray-800"})}),u.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:"Your route"}),u.jsx("div",{className:"w-10"})]})}),u.jsx(j.div,{className:"absolute top-16 left-0 right-0 bottom-0 bg-white z-10 p-4 pt-8",initial:{y:50,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2},children:u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full flex-shrink-0"}),u.jsxs("div",{className:"flex-1 relative",children:[u.jsx("input",{type:"text",value:r,onChange:N=>E(N.target.value),onFocus:()=>x("pickup"),placeholder:i?"Getting your location...":_("pickup"),className:`w-full bg-gray-100 rounded-xl px-4 py-3 text-gray-900 placeholder-gray-500 focus:outline-none transition-all ${k("pickup")?"ring-2 ring-green-500 bg-white shadow-lg shadow-green-500/20 border-2 border-green-500":"focus:ring-2 focus:ring-green-500 focus:bg-white"}`,disabled:i}),r&&f==="pickup"&&u.jsx("button",{onClick:()=>{o(""),y("")},className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-6 h-6 bg-gray-300 rounded-full flex items-center justify-center",children:u.jsx(Ee,{size:14,className:"text-gray-600"})})]}),u.jsx("button",{onClick:S,className:"w-10 h-10 flex items-center justify-center hover:bg-gray-100 rounded-full transition-colors",disabled:c.length>=3,children:u.jsx(Sn,{size:20,className:c.length>=3?"text-gray-300":"text-gray-600"})})]}),u.jsx(Je,{children:c.map((N,P)=>u.jsxs(j.div,{className:"flex items-center space-x-3 ml-6",initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},children:[u.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full flex-shrink-0"}),u.jsx("div",{className:"flex-1 relative",children:u.jsx("input",{type:"text",value:N,onChange:$=>E($.target.value),onFocus:()=>x(P),placeholder:_(P),className:`w-full bg-gray-100 rounded-xl px-4 py-3 text-gray-900 placeholder-gray-500 focus:outline-none transition-all ${k(P)?"ring-2 ring-green-500 bg-white shadow-lg shadow-green-500/20 border-2 border-green-500":"focus:ring-2 focus:ring-green-500 focus:bg-white"}`})}),u.jsx("button",{onClick:()=>T(P),className:"w-10 h-10 flex items-center justify-center hover:bg-gray-100 rounded-full transition-colors",children:u.jsx(Ee,{size:16,className:"text-red-500"})})]},P))}),u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsx("div",{className:"w-3 h-3 bg-gray-400 rounded-full flex-shrink-0"}),u.jsxs("div",{className:"flex-1 relative",children:[u.jsx("input",{type:"text",value:a,onChange:N=>E(N.target.value),onFocus:()=>x("destination"),placeholder:_("destination"),className:`w-full bg-gray-100 rounded-xl px-4 py-3 text-gray-900 placeholder-gray-500 focus:outline-none transition-all ${k("destination")?"ring-2 ring-green-500 bg-white shadow-lg shadow-green-500/20 border-2 border-green-500":"focus:ring-2 focus:ring-green-500 focus:bg-white"}`}),u.jsx(Yl,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20})]}),u.jsx("div",{className:"w-10 flex items-center justify-center",children:u.jsxs("div",{className:"flex flex-col space-y-1",children:[u.jsx("div",{className:"w-1 h-1 bg-gray-400 rounded-full"}),u.jsx("div",{className:"w-1 h-1 bg-gray-400 rounded-full"}),u.jsx("div",{className:"w-1 h-1 bg-gray-400 rounded-full"})]})})]}),u.jsx(Ms,{maxHeight:"max-h-96",children:u.jsxs("div",{className:"space-y-2 mt-6",children:[w.map((N,P)=>u.jsxs(j.button,{onClick:()=>b(N.address),className:"w-full flex items-center space-x-3 p-3 hover:bg-gray-50 rounded-lg transition-colors text-left",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:P*.05},whileTap:{scale:.98},children:[u.jsx(Ts,{className:"text-gray-400 flex-shrink-0",size:20}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("p",{className:"font-medium text-gray-900 truncate",children:N.address}),u.jsx("p",{className:"text-sm text-gray-500 truncate",children:N.description})]}),N.distance&&u.jsx("span",{className:"text-sm text-gray-400 flex-shrink-0",children:N.distance})]},N.id)),u.jsxs(j.button,{onClick:()=>b(s||"Current Location"),className:"w-full flex items-center space-x-3 p-3 hover:bg-gray-50 rounded-lg transition-colors text-left",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:w.length*.05},whileTap:{scale:.98},children:[u.jsx(q1,{className:"text-blue-500 flex-shrink-0",size:20}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("p",{className:"font-medium text-blue-600",children:"My location"}),s&&u.jsx("p",{className:"text-sm text-gray-500 truncate",children:s})]})]})]})})]})})]})},UD=()=>{const t=be(),[e,n]=v.useState("upcoming"),[s]=v.useState(!1);return u.jsxs("div",{className:"min-h-screen bg-gray-50",children:[u.jsx(j.div,{className:"bg-white p-4 pt-12",initial:{y:-50,opacity:0},animate:{y:0,opacity:1},transition:{delay:.1},children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Rides"}),u.jsx("button",{className:"w-10 h-10 bg-gray-100 rounded-full flex items-center justify-center",children:u.jsx(Cj,{size:20,className:"text-gray-600"})})]})}),u.jsx(j.div,{className:"bg-white px-4 pb-4",initial:{y:-30,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2},children:u.jsxs("div",{className:"flex space-x-8",children:[u.jsx("button",{onClick:()=>n("upcoming"),className:`pb-3 border-b-2 transition-colors ${e==="upcoming"?"border-green-500 text-green-600 font-semibold":"border-transparent text-gray-500"}`,children:"Upcoming"}),u.jsx("button",{onClick:()=>n("past"),className:`pb-3 border-b-2 transition-colors ${e==="past"?"border-green-500 text-green-600 font-semibold":"border-transparent text-gray-500"}`,children:"Past"})]})}),u.jsxs(j.div,{className:"flex-1 flex flex-col items-center justify-center px-4 py-16",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:[u.jsxs("div",{className:"relative mb-8",children:[u.jsx("div",{className:"w-32 h-32 bg-gray-200 rounded-2xl flex items-center justify-center",children:u.jsx(To,{size:48,className:"text-gray-400"})}),u.jsx("div",{className:"absolute -top-2 -right-2 w-16 h-16 bg-green-500 rounded-full flex items-center justify-center",children:u.jsx("div",{className:"w-8 h-8 bg-white rounded-full flex items-center justify-center",children:u.jsx("div",{className:"w-4 h-4 border-2 border-green-500 rounded-full border-t-transparent animate-spin"})})})]}),u.jsxs("h2",{className:"text-2xl font-bold text-gray-900 mb-4 text-center",children:["No ",e," rides"]}),u.jsx("p",{className:"text-gray-600 text-center mb-8 max-w-sm",children:e==="upcoming"?"Whatever is on your schedule, a Scheduled Ride can get you there on time":"Your past rides will appear here"}),e==="upcoming"&&u.jsx("button",{onClick:()=>t("/schedule-ride"),className:"text-green-600 font-semibold hover:text-green-700 transition-colors",children:"Learn how it works"})]}),!s&&e==="upcoming"&&u.jsx(j.div,{className:"fixed bottom-20 left-4 right-4 z-20",initial:{y:100,opacity:0},animate:{y:0,opacity:1},transition:{delay:.5},children:u.jsx("button",{onClick:()=>t("/schedule-ride"),className:"w-full bg-green-600 text-white py-4 rounded-xl font-semibold text-lg hover:bg-green-700 transition-colors shadow-lg",children:"Schedule a ride"})}),u.jsx(ql,{activeTab:"rides"})]})},Ui=(t="user123")=>{const[e,n]=v.useState(null),[s,i]=v.useState(!0),[r,o]=v.useState(null);v.useEffect(()=>((async()=>{try{const f=await Ce.getUserProfile(t);n(f)}catch(f){console.error("Failed to load profile:",f)}finally{i(!1)}})(),Ce.listenToUserProfile(t,f=>{n(f),s&&i(!1)})),[t,s]);const a=v.useCallback(async c=>{try{o(null),await Ce.saveUserProfile(t,c)}catch(d){throw o(d instanceof Error?d.message:"Failed to update profile"),d}},[t]),l=v.useCallback(async c=>new Promise((d,f)=>{const h=new FileReader;h.onload=()=>{const p=h.result;d(p)},h.onerror=()=>f(new Error("Failed to read file")),h.readAsDataURL(c)}),[]);return{profile:e,loading:s,error:r,updateProfile:a,uploadProfilePicture:l}},WD=()=>{const t=be(),{profile:e,uploadProfilePicture:n,updateProfile:s}=Ui(),[i,r]=v.useState(!1),o={name:(e==null?void 0:e.name)||"User",rating:4.55},a=[{title:"Account",items:[{icon:Z1,label:"Personal info",action:()=>t("/personal-info")},{icon:ew,label:"Family profile",action:()=>{}},{icon:Bg,label:"Safety",action:()=>{}},{icon:Ej,label:"Login & security",action:()=>{}},{icon:_j,label:"Privacy",action:()=>{}}]},{title:"Saved places",items:[{icon:Q1,label:"Enter home location",action:()=>{}},{icon:gj,label:"Enter work location",action:()=>{}},{icon:Sn,label:"Add a place",action:()=>{}}]},{title:"Settings",items:[{icon:Sj,label:"Language",subtitle:"English - US",action:()=>{}},{icon:kj,label:"Communication preferences",action:()=>{}},{icon:To,label:"Calendars",action:()=>{}},{icon:Tj,label:"Dark mode",action:()=>{},toggle:!0}]},{title:"Account Actions",items:[{icon:bj,label:"Log out",action:()=>{},danger:!1},{icon:Ij,label:"Delete account",action:()=>{},danger:!0}]}],l=async()=>{const c=document.createElement("input");c.type="file",c.accept="image/*",c.onchange=async d=>{var h;const f=(h=d.target.files)==null?void 0:h[0];if(f)try{r(!0);const p=await n(f);await s({name:(e==null?void 0:e.name)||"User",phone:(e==null?void 0:e.phone)||"",email:(e==null?void 0:e.email)||"",profilePicture:p})}catch(p){console.error("Failed to upload image:",p),alert("Failed to upload image. Please try again.")}finally{r(!1)}},c.click()};return u.jsxs("div",{className:"min-h-screen bg-gray-50",children:[u.jsx(j.div,{className:"bg-white pt-12 pb-6",initial:{y:-50,opacity:0},animate:{y:0,opacity:1},transition:{delay:.1},children:u.jsxs("div",{className:"text-center",children:[u.jsxs("div",{className:"relative inline-block mb-4",children:[e!=null&&e.profilePicture?u.jsx("img",{src:e.profilePicture,alt:"Profile",className:"w-24 h-24 rounded-full object-cover"}):u.jsx("div",{className:"w-24 h-24 bg-gradient-to-br from-green-400 to-blue-500 rounded-full flex items-center justify-center text-white text-2xl font-bold",children:o.name.split(" ").map(c=>c[0]).join("")}),u.jsx("button",{onClick:l,disabled:i,className:`absolute -bottom-1 -right-1 w-8 h-8 bg-green-500 rounded-full flex items-center justify-center shadow-lg hover:bg-green-600 transition-colors ${i?"opacity-50 cursor-not-allowed":""}`,children:i?u.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):u.jsx(Sn,{size:16,className:"text-white"})})]}),u.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-1",children:o.name}),u.jsxs("div",{className:"flex items-center justify-center space-x-1",children:[u.jsx(J1,{size:16,className:"text-green-500 fill-current"}),u.jsxs("span",{className:"text-green-600 font-medium",children:[o.rating," Rating"]})]})]})}),u.jsx(j.div,{className:"mx-4 mb-6 bg-green-50 rounded-2xl p-4",initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.3},children:u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsx("div",{className:"w-10 h-10 bg-green-500 rounded-full flex items-center justify-center",children:u.jsx(Bg,{className:"text-white",size:20})}),u.jsxs("div",{className:"flex-1",children:[u.jsx("h3",{className:"font-semibold text-gray-900",children:"Let's update your account"}),u.jsx("p",{className:"text-sm text-gray-600",children:"Improve your app experience"}),u.jsx("p",{className:"text-sm text-green-600 font-medium mt-1",children:"4 new suggestions"})]})]})}),u.jsx(Ms,{maxHeight:"max-h-96",children:u.jsx("div",{className:"px-4 space-y-6 pb-24",children:a.map((c,d)=>u.jsxs(j.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4+d*.1},children:[c.title!=="Account Actions"&&u.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:c.title}),u.jsx("div",{className:"bg-white rounded-2xl overflow-hidden shadow-sm",children:c.items.map((f,h)=>{const p=f.icon;return u.jsxs(j.button,{onClick:f.action,className:`w-full flex items-center justify-between p-4 hover:bg-gray-50 transition-colors ${h!==c.items.length-1?"border-b border-gray-100":""}`,whileTap:{scale:.98},children:[u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsx(p,{size:20,className:f.danger?"text-red-500":"text-gray-600"}),u.jsxs("div",{className:"text-left",children:[u.jsx("p",{className:`font-medium ${f.danger?"text-red-600":"text-gray-900"}`,children:f.label}),f.subtitle&&u.jsx("p",{className:"text-sm text-gray-500",children:f.subtitle})]})]}),f.toggle?u.jsx("div",{className:"w-12 h-6 bg-gray-200 rounded-full relative",children:u.jsx("div",{className:"w-5 h-5 bg-white rounded-full absolute top-0.5 left-0.5 shadow-sm"})}):u.jsx("span",{className:"text-gray-400",children:""})]},f.label)})})]},c.title))})}),u.jsx(ql,{activeTab:"account"})]})},HD=()=>{const t=be(),{profile:e,updateProfile:n}=Ui(),[s,i]=v.useState(null),[r,o]=v.useState({name:(e==null?void 0:e.name)||"",phone:(e==null?void 0:e.phone)||"",email:(e==null?void 0:e.email)||""}),[a,l]=v.useState(!1);Z_.useEffect(()=>{e&&o({name:e.name,phone:e.phone,email:e.email})},[e]);const c=p=>{i(p),o({name:(e==null?void 0:e.name)||"",phone:(e==null?void 0:e.phone)||"",email:(e==null?void 0:e.email)||""})},d=async p=>{try{l(!0),await n({name:r.name,phone:r.phone,email:r.email,profilePicture:e==null?void 0:e.profilePicture}),i(null)}catch(y){console.error("Failed to save profile:",y),alert("Failed to save changes. Please try again.")}finally{l(!1)}},f=()=>{o({name:(e==null?void 0:e.name)||"",phone:(e==null?void 0:e.phone)||"",email:(e==null?void 0:e.email)||""}),i(null)},h=[{key:"name",label:"Name",value:(e==null?void 0:e.name)||"",type:"text"},{key:"phone",label:"Cell number",value:(e==null?void 0:e.phone)||"",type:"tel"},{key:"email",label:"Email",value:(e==null?void 0:e.email)||"",type:"email"}];return u.jsxs("div",{className:"min-h-screen bg-gray-50",children:[u.jsx(j.div,{className:"bg-white p-4 shadow-sm",initial:{y:-50,opacity:0},animate:{y:0,opacity:1},transition:{delay:.1},children:u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsx("button",{onClick:()=>t("/account"),className:"w-10 h-10 flex items-center justify-center hover:bg-gray-100 rounded-full transition-colors",children:u.jsx(Ds,{size:24,className:"text-gray-800"})}),u.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:"Personal info"})]})}),u.jsx(j.div,{className:"p-4 mt-6",initial:{y:50,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2},children:u.jsx("div",{className:"bg-white rounded-2xl overflow-hidden shadow-sm",children:h.map((p,y)=>u.jsxs("div",{className:`p-4 ${y!==h.length-1?"border-b border-gray-100":""}`,children:[u.jsxs("div",{className:"flex items-center justify-between mb-2",children:[u.jsx("label",{className:"text-sm font-medium text-gray-600",children:p.label}),s!==p.key&&u.jsx("button",{onClick:()=>c(p.key),className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:u.jsx(cn,{size:16,className:"text-gray-500"})})]}),s===p.key?u.jsxs("div",{className:"space-y-3",children:[u.jsx("input",{type:p.type,value:r[p.key],onChange:w=>o(C=>({...C,[p.key]:w.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent",autoFocus:!0}),u.jsxs("div",{className:"flex space-x-2",children:[u.jsx("button",{onClick:()=>d(p.key),disabled:a,className:`flex-1 bg-green-600 text-white py-2 rounded-lg font-medium hover:bg-green-700 transition-colors ${a?"opacity-50 cursor-not-allowed":""}`,children:a?"Saving...":"Save"}),u.jsx("button",{onClick:f,disabled:a,className:"flex-1 bg-gray-200 text-gray-800 py-2 rounded-lg font-medium hover:bg-gray-300 transition-colors",children:"Cancel"})]})]}):u.jsx("p",{className:"text-gray-900 font-medium",children:p.value})]},p.key))})})]})},cc=(t,e,n=[],s=15,i=2.5)=>{const r=[];let o=0;const a=[t,...n,e];for(let d=0;d<a.length-1;d++){const f={from:a[d],to:a[d+1],distance:5};r.push(f),o+=f.distance}const l=o*i,c=s+l;return{totalDistance:o,totalPrice:Math.round(c),baseFare:s,distanceFare:l,legs:r}},po=(t,e)=>{const s={Economy:.9,Bolt:1,Comfort:1.2,"Bolt XL":1.5}[e]||1;return Math.round(t*s)},KD=({destination:t,pickup:e,stops:n,onBack:s,onSelectRide:i})=>{const r=be(),{isRideActive:o,rideStatus:a}=cp(),l=cc(e,t,n),c=Lj.map(h=>({...h,price:po(l.totalPrice,h.name),originalPrice:Math.round(po(l.totalPrice,h.name)*1.25)})),[d,f]=v.useState(c[0]);return u.jsxs("div",{className:"min-h-screen relative overflow-hidden",children:[u.jsx(Ls,{}),u.jsx(j.div,{className:"absolute top-0 left-0 right-0 z-10 p-4",initial:{y:-50,opacity:0},animate:{y:0,opacity:1},transition:{delay:.1},children:u.jsx("div",{className:"bg-white rounded-2xl shadow-lg p-4",children:u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsx("button",{onClick:s,className:"w-8 h-8 flex items-center justify-center hover:bg-gray-100 rounded-full transition-colors",children:u.jsx(Ee,{size:20,className:"text-gray-600"})}),u.jsx("button",{onClick:()=>r("/your-route",{state:{highlightDestination:!0,prefilledDestination:t,prefilledPickup:e}}),className:"flex-1 flex items-center space-x-2 text-left hover:bg-gray-50 rounded-lg p-2 transition-colors",children:u.jsxs("div",{className:"flex items-center space-x-2 flex-1 min-w-0",children:[u.jsx("span",{className:"text-sm font-medium text-gray-900 truncate",children:e}),u.jsx(mj,{size:16,className:"text-gray-400 flex-shrink-0"}),u.jsx("span",{className:"text-sm font-medium text-green-600 truncate",children:t})]})}),u.jsx("button",{onClick:()=>r("/your-route",{state:{highlightAddStop:!0,prefilledDestination:t,prefilledPickup:e}}),className:"w-8 h-8 flex items-center justify-center hover:bg-gray-100 rounded-full transition-colors",children:u.jsx(Sn,{size:20,className:"text-gray-600"})})]})})}),u.jsx(j.div,{className:"absolute top-24 left-1/2 transform -translate-x-1/2 z-10 bg-blue-600 text-white px-4 py-2 rounded-full shadow-lg",initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.3,type:"spring"},children:u.jsx("span",{className:"font-medium",children:"Arrive by 20:38"})}),u.jsx(j.div,{className:"absolute top-36 left-4 right-4 z-10 bg-blue-600 text-white rounded-xl p-3 shadow-lg",initial:{y:-100,opacity:0},animate:{y:0,opacity:1},transition:{delay:.4},children:u.jsx("div",{className:"flex items-center justify-center space-x-2",children:u.jsx("span",{className:"text-white font-medium",children:" 20% promo applied"})})}),u.jsx(Ql,{initialHeight:400,maxHeight:550,minHeight:250,children:u.jsxs("div",{className:"space-y-4",children:[u.jsx(Ms,{maxHeight:"max-h-80",children:u.jsx("div",{className:"space-y-3",children:c.map((h,p)=>u.jsx(j.button,{onClick:()=>f(h),className:`w-full p-4 rounded-2xl border-2 transition-all ${d.id===h.id?"border-green-500 bg-green-50":"border-gray-200 bg-white hover:border-gray-300"}`,initial:{opacity:0,x:-30},animate:{opacity:1,x:0},transition:{delay:.5+p*.1},whileTap:{scale:.98},children:u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsx("div",{className:"text-2xl",children:h.icon}),u.jsxs("div",{className:"flex-1 text-left",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("h3",{className:"font-bold text-gray-900",children:h.name}),u.jsxs("div",{className:"text-right",children:[u.jsxs("p",{className:"font-bold text-gray-900",children:["R ",h.price]}),h.originalPrice&&u.jsxs("p",{className:"text-sm text-gray-500 line-through",children:["R ",h.originalPrice]})]})]}),u.jsxs("div",{className:"flex items-center space-x-4 mt-1",children:[u.jsx("span",{className:"text-sm text-gray-600",children:h.eta}),u.jsxs("div",{className:"flex items-center space-x-1",children:[u.jsx(ew,{size:14,className:"text-gray-500"}),u.jsx("span",{className:"text-sm text-gray-600",children:h.capacity})]}),u.jsx("span",{className:"text-sm text-gray-600",children:h.description})]}),u.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:[l.totalDistance,"km  ",n.length>0?`${n.length+1} stops`:"Direct"]}),h.badge&&u.jsx("span",{className:`inline-block mt-2 px-2 py-1 rounded-full text-xs font-bold ${h.badge==="FASTER"?"bg-green-100 text-green-800":h.badge==="CHEAPER"?"bg-blue-100 text-blue-800":"bg-purple-100 text-purple-800"}`,children:h.badge})]})]})},h.id))})}),u.jsx(j.div,{className:"border-t border-gray-200 pt-4",initial:{opacity:0},animate:{opacity:1},transition:{delay:.8},children:u.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-50 rounded-xl",children:[u.jsx("div",{className:"w-8 h-5 bg-green-600 rounded flex items-center justify-center",children:u.jsx("span",{className:"text-white text-xs font-bold",children:""})}),u.jsx("span",{className:"font-medium text-gray-900",children:"Cash"}),u.jsx("span",{className:"text-gray-500",children:""})]})})]})}),u.jsxs(j.div,{className:"fixed bottom-20 left-4 right-4 z-30",initial:{y:100,opacity:0},animate:{y:0,opacity:1},transition:{delay:.6},children:[u.jsxs("div",{className:"flex space-x-3",children:[u.jsx(j.button,{onClick:()=>{if(o){alert("You already have an active ride.");return}i(d.name,d.price)},disabled:o,className:`flex-1 py-4 rounded-xl font-semibold text-lg shadow-lg transition-colors ${o?"bg-gray-400 text-gray-200 cursor-not-allowed":"bg-green-600 text-white hover:bg-green-700"}`,whileTap:{scale:o?1:.98},children:o?"Ride Active":`Select ${d.name}`}),u.jsx(j.button,{onClick:()=>r("/schedule-ride"),className:"bg-gray-100 p-4 rounded-xl hover:bg-gray-200 transition-colors shadow-lg",whileTap:{scale:.95},children:u.jsx(To,{className:"text-gray-600",size:24})})]}),o&&u.jsx("p",{className:"text-gray-500 text-center text-sm mt-2",children:"Finish current ride before booking another"})]}),u.jsx(ql,{activeTab:"home"})]})},uc=t=>{const[e,n]=v.useState(null),[s,i]=v.useState(!1),[r,o]=v.useState(!1);v.useEffect(()=>{if(!t)return;const c=Ce.listenToRideRequest(t,d=>{d&&(n(d),d.driverId&&d.status==="accepted"&&o(!0))});return()=>{c()}},[t]);const a=v.useCallback(async c=>{i(!0);try{return await Ce.createRideRequest(c)}catch(d){throw console.error("Error creating ride:",d),d}finally{i(!1)}},[]),l=v.useCallback(async c=>{try{await Ce.updateRideStatus(c,"cancelled"),n(null)}catch(d){throw console.error("Error cancelling ride:",d),d}},[]);return{currentRide:e,isLoading:s,isAccepted:r,createRide:a,cancelRide:l}},GD=({destination:t,pickup:e,stops:n,carType:s,price:i,onBack:r,onRideConfirmed:o,onRideCreated:a})=>{const[l,c]=v.useState(!1),{profile:d}=Ui(),{createRide:f}=uc(),{isRideActive:h}=cp(),p=cc(e,t,n),y=po(p.totalPrice,s),w=async()=>{if(l||h){h&&alert("You already have an active ride.");return}c(!0);try{const C={pickup:e,destination:t,stops:n||[],carType:s,price:y,status:"pending",userId:(d==null?void 0:d.id)||"user123",userName:(d==null?void 0:d.name)||"Unknown User"},g=await f(C);a(g),o()}catch(C){console.error("Failed to create ride request:",C),o()}finally{c(!1)}};return u.jsxs("div",{className:"min-h-screen relative overflow-hidden",children:[u.jsx(Ls,{}),u.jsx(Je,{children:!l&&u.jsx(j.div,{className:"absolute top-0 left-0 right-0 z-10 p-4",initial:{y:-50,opacity:0},animate:{y:0,opacity:1},exit:{y:-50,opacity:0},transition:{delay:.1},children:u.jsx("button",{onClick:r,className:"w-10 h-10 bg-white rounded-full shadow-lg flex items-center justify-center hover:bg-gray-50 transition-colors",children:u.jsx(Ds,{size:20,className:"text-gray-800"})})})}),u.jsx(j.div,{className:"absolute top-24 left-1/2 transform -translate-x-1/2 z-10",initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.3},children:u.jsx("div",{className:"bg-green-600 text-white px-6 py-3 rounded-full shadow-lg",children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"text-2xl font-bold",children:"2"}),u.jsx("div",{className:"text-sm",children:"min"})]})})}),u.jsx(j.div,{className:"fixed bottom-0 left-0 right-0 bg-white rounded-t-3xl shadow-2xl p-6 z-20",initial:{y:200,opacity:0},animate:{y:0,opacity:1},transition:{type:"spring",damping:25,stiffness:200,delay:.2},children:u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"text-center",children:[u.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:t}),n.length>0&&u.jsxs("div",{className:"mt-2",children:[u.jsxs("p",{className:"text-sm text-gray-600",children:["via ",n.length," stop",n.length>1?"s":""]}),u.jsx("div",{className:"text-xs text-gray-500 mt-1",children:n.map((C,g)=>u.jsxs("span",{children:[C,g<n.length-1?"  ":""]},g))})]}),u.jsxs("div",{className:"flex items-center justify-center space-x-4 mt-4",children:[u.jsx("span",{className:"text-lg font-medium text-gray-700",children:s}),u.jsxs("span",{className:"text-2xl font-bold text-gray-900",children:["R ",y]})]}),u.jsxs("div",{className:"text-sm text-gray-500 mt-2",children:[p.totalDistance,"km total distance"]})]}),u.jsx(j.button,{onClick:w,disabled:l||h,className:`w-full py-4 rounded-xl font-semibold text-lg shadow-lg transition-colors
              ${l||h?"bg-gray-400 cursor-not-allowed":"bg-green-600 text-white hover:bg-green-700"}`,whileTap:{scale:.98},whileHover:{scale:l||h?1:1.02},children:l?"Processing...":h?"Ride Active":"Confirm order"}),h&&u.jsx("p",{className:"text-gray-500 text-center text-sm mt-2",children:"You have an active ride"})]})})]})},YD=({destination:t,pickup:e,stops:n,carType:s,price:i,currentRideId:r,onCancel:o,onDriverFound:a})=>{const l=be(),[c,d]=v.useState(0),[f,h]=v.useState(!1),[p,y]=v.useState(!1),[w,C]=v.useState(!0),{createRide:g,currentRide:m,isLoading:x,isAccepted:b}=uc(r),{profile:S}=Ui(),T=cc(e,t,n),E=po(T.totalPrice,s);v.useEffect(()=>{if(!w)return;const M=setInterval(()=>{d(ge=>ge>=100?(C(!1),h(!0),100):ge+100/30)},1e3);return()=>clearInterval(M)},[w]),v.useEffect(()=>{b&&setTimeout(()=>{a()},2e3)},[b,a]);const _=async()=>{if(x)return;h(!1),d(0),C(!0);const M={destination:t,pickup:e,stops:n||[],carType:s,price:E,status:"pending",userId:(S==null?void 0:S.id)||"user123",userName:(S==null?void 0:S.name)||"Unknown User"};try{const ge=await g(M)}catch(ge){console.error("Failed to request again:",ge)}},k=()=>{y(!0)},N=async()=>{try{let M=(m==null?void 0:m.id)||r||null;if(!M&&(S!=null&&S.id)&&(M=await Ce.findActiveRideByUser(S.id)),!M){console.error("No rideId available to cancel. Aborting."),y(!1);return}await Ce.updateRideStatus(M,"cancelled"),y(!1),l("/what-went-wrong",{state:{rideId:M,userId:(S==null?void 0:S.id)||"user123",userName:(S==null?void 0:S.name)||"Unknown User",destination:t,pickup:e,stops:n,carType:s,price:E}})}catch(M){console.error("Error cancelling ride:",M),y(!1),l("/what-went-wrong",{state:{rideId:(m==null?void 0:m.id)||r||null,userId:(S==null?void 0:S.id)||"user123",userName:(S==null?void 0:S.name)||"Unknown User",destination:t,pickup:e,stops:n,carType:s,price:E}})}},P=()=>{y(!1)},$=async()=>{if(m!=null&&m.id||r)try{const M=(m==null?void 0:m.id)||r;await Ce.updateRideStatus(M,"cancelled")}catch(M){console.error("Error cancelling ride:",M)}o()};return u.jsxs("div",{className:"min-h-screen relative overflow-hidden",children:[u.jsx(Ls,{}),u.jsx(Ql,{initialHeight:450,maxHeight:680,minHeight:300,children:u.jsxs("div",{className:"space-y-6",children:[u.jsxs(j.div,{className:"text-center pt-4",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:[u.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Waiting for driver to confirm the order"}),u.jsx("div",{className:"w-full bg-gray-200 rounded-full h-1 mb-6",children:u.jsx(j.div,{className:"bg-green-500 h-1 rounded-full",initial:{width:0},animate:{width:`${c}%`},transition:{duration:1,ease:"easeInOut"}})})]}),u.jsxs(j.div,{className:"flex justify-center space-x-8",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},children:[u.jsxs("button",{className:"flex flex-col items-center space-y-2 p-4 hover:bg-gray-50 rounded-xl transition-colors",children:[u.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center",children:u.jsx(cn,{className:"text-gray-600",size:20})}),u.jsx("span",{className:"text-sm text-gray-600",children:"Edit pickup"})]}),u.jsxs("button",{onClick:k,className:"flex flex-col items-center space-y-2 p-4 hover:bg-gray-50 rounded-xl transition-colors",children:[u.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center",children:u.jsx(Ee,{className:"text-gray-600",size:20})}),u.jsx("span",{className:"text-sm text-gray-600",children:"Cancel ride"})]})]}),u.jsx(Ms,{maxHeight:"max-h-[420px]",children:u.jsxs("div",{className:"space-y-6 pb-4",children:[u.jsxs(j.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},children:[u.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"News & highlights"}),u.jsx("div",{className:"bg-blue-50 rounded-2xl p-4 mb-4",children:u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsx("div",{className:"w-16 h-12 bg-blue-100 rounded-xl flex items-center justify-center",children:u.jsx("span",{className:"text-2xl",children:""})}),u.jsx("div",{className:"flex-1",children:u.jsx("p",{className:"font-medium text-gray-900",children:"Learn how the audio recording safety feature works"})}),u.jsx("div",{className:"w-8 h-8 bg-green-500 rounded-full flex items-center justify-center",children:u.jsx("span",{className:"text-white text-xs",children:""})})]})})]}),u.jsxs(j.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.7},children:[u.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"My route"}),u.jsxs("div",{className:"space-y-3",children:[u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),u.jsx("span",{className:"flex-1 text-gray-700",children:e}),u.jsx(cn,{className:"text-gray-400",size:16})]}),n.map((M,ge)=>u.jsxs("div",{className:"flex items-center space-x-3 ml-6",children:[u.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),u.jsx("span",{className:"flex-1 text-gray-700",children:M}),u.jsx(cn,{className:"text-gray-400",size:16})]},ge)),u.jsxs("div",{className:"flex items-center space-x-3 ml-6",children:[u.jsx(Sn,{className:"text-blue-600",size:16}),u.jsx("span",{className:"text-blue-600 font-medium",children:"Add stop"})]}),u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsx(Nd,{className:"text-blue-600",size:12}),u.jsx("span",{className:"flex-1 text-gray-700",children:t}),u.jsx(cn,{className:"text-gray-400",size:16})]}),u.jsxs("div",{className:"flex items-center space-x-3 ml-6",children:[u.jsx(Nd,{className:"text-gray-500",size:12}),u.jsx("span",{className:"text-gray-500",children:"Edit destinations"})]})]})]}),u.jsxs(j.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.8},children:[u.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Payment method"}),u.jsx("div",{className:"bg-gray-50 rounded-xl p-4",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsx("div",{className:"w-8 h-5 bg-green-600 rounded flex items-center justify-center",children:u.jsx("span",{className:"text-white text-xs font-bold",children:""})}),u.jsxs("div",{children:[u.jsx("p",{className:"font-medium text-gray-900",children:"Cash"}),u.jsxs("p",{className:"text-sm text-gray-500",children:["Fare  ",s]})]})]}),u.jsxs("span",{className:"font-bold text-gray-900",children:["R ",E]})]})})]})]})})]})}),u.jsx(Je,{children:p&&u.jsx(j.div,{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},children:u.jsxs(j.div,{className:"bg-white rounded-3xl p-6 max-w-sm w-full relative",initial:{scale:.8,opacity:0,y:50},animate:{scale:1,opacity:1,y:0},exit:{scale:.8,opacity:0,y:50},transition:{type:"spring",damping:25,stiffness:200},children:[u.jsx("button",{onClick:P,className:"absolute top-4 right-4 w-10 h-10 bg-gray-200 rounded-full flex items-center justify-center hover:bg-gray-300 transition-colors",children:u.jsx(Ee,{size:20,className:"text-gray-600"})}),u.jsx("div",{className:"text-center mb-6",children:u.jsxs("div",{className:"relative inline-block",children:[u.jsx("div",{className:"w-24 h-24 bg-pink-100 rounded-full flex items-center justify-center mb-4",children:u.jsx("span",{className:"text-4xl",children:""})}),u.jsx("div",{className:"absolute -bottom-2 -right-2 w-8 h-8 bg-red-500 rounded-full flex items-center justify-center",children:u.jsx(Ee,{size:16,className:"text-white"})})]})}),u.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-4 text-center",children:"Are you sure?"}),u.jsx("p",{className:"text-gray-600 text-center mb-8 leading-relaxed",children:"Do you really want to cancel the ride? Rebooking may not get you to your destination more quickly."}),u.jsxs("div",{className:"space-y-3",children:[u.jsx("button",{onClick:N,className:"w-full bg-red-500 text-white py-4 rounded-2xl font-semibold text-lg hover:bg-red-600 transition-colors",children:"Cancel ride"}),u.jsx("button",{onClick:P,className:"w-full bg-gray-100 text-gray-800 py-4 rounded-2xl font-semibold text-lg hover:bg-gray-200 transition-colors",children:"Wait for driver"})]})]})})}),u.jsx(Je,{children:f&&u.jsx(j.div,{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-40 p-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:u.jsxs(j.div,{className:"bg-white rounded-2xl p-6 max-w-sm w-full",initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},children:[u.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4 text-center",children:"Driver not found"}),u.jsx("p",{className:"text-gray-600 text-center mb-6",children:"No drivers are available right now. Would you like to try again?"}),u.jsxs("div",{className:"space-y-3",children:[u.jsx("button",{onClick:_,disabled:x,className:`w-full py-3 rounded-xl font-semibold transition-colors ${x?"bg-gray-400 text-gray-700 cursor-not-allowed":"bg-green-600 text-white hover:bg-green-700"}`,children:x?"Requesting...":"Request again"}),u.jsx("button",{onClick:$,className:"w-full bg-gray-200 text-gray-800 py-3 rounded-xl font-semibold hover:bg-gray-300 transition-colors",children:"Cancel request"})]})]})})})]})},QD=({message:t,isCurrentUser:e,senderName:n})=>{const s=i=>new Date(i).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0});return u.jsx(j.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.2},className:`flex ${e?"justify-end":"justify-start"} mb-3`,children:u.jsxs("div",{className:`max-w-[75%] ${e?"items-end":"items-start"} flex flex-col`,children:[u.jsx("div",{className:"text-xs text-gray-500 mb-1 px-2",children:n}),u.jsx("div",{className:`rounded-2xl px-4 py-2 ${e?"bg-green-500 text-white rounded-br-sm":"bg-gray-200 text-gray-900 rounded-bl-sm"}`,children:u.jsx("p",{className:"text-sm break-words",children:t.text})}),u.jsx("div",{className:"text-xs text-gray-400 mt-1 px-2",children:s(t.timestamp)})]})})},I_=v.createContext({unreadMessageCount:0,setUnreadMessageCount:()=>{},markMessagesAsRead:async()=>{},resetUnreadCount:()=>{}}),A_=()=>v.useContext(I_),qD=({userId:t,rideId:e,children:n})=>{const[s,i]=v.useState(0);v.useEffect(()=>{if(!e){i(0);return}const a=localStorage.getItem(`unread_${e}`);a&&i(parseInt(a,10));const l=Y(Q,`rides/${e}/messages`),c=Ft(l,d=>{if(!d.exists()){i(0),localStorage.setItem(`unread_${e}`,"0");return}let f=0;const h=[];d.forEach(p=>{const y=p.val();h.push({id:p.key,...y}),y.sender==="driver"&&!y.read&&f++}),i(f),localStorage.setItem(`unread_${e}`,f.toString()),localStorage.setItem(`messages_${e}`,JSON.stringify(h))});return()=>{Ot(l,"value",c)}},[e]),v.useEffect(()=>{if(!e)return;const a=Y(Q,`rides/${e}/status`),l=Ft(a,c=>{c.val()==="completed"&&(localStorage.removeItem(`messages_${e}`),localStorage.removeItem(`unread_${e}`),i(0))});return()=>{Ot(a,"value",l)}},[e]);const r=async()=>{if(e)try{const a=Y(Q,`rides/${e}/messages`),l=await jn(a);if(l.exists()){const c={};l.forEach(d=>{const f=d.val();f.sender==="driver"&&!f.read&&(c[`${d.key}/read`]=!0)}),Object.keys(c).length>0&&await cr(a,c),i(0),localStorage.setItem(`unread_${e}`,"0")}}catch(a){console.error("Error marking messages as read:",a)}},o=()=>{i(0),e&&localStorage.setItem(`unread_${e}`,"0")};return u.jsx(I_.Provider,{value:{unreadMessageCount:s,setUnreadMessageCount:i,markMessagesAsRead:r,resetUnreadCount:o},children:n})},XD=({isOpen:t,onClose:e,rideId:n,currentUserId:s,driverId:i,driverName:r,isRideActive:o})=>{const{markMessagesAsRead:a}=A_(),[l,c]=v.useState([]),[d,f]=v.useState(""),[h,p]=v.useState(!1),y=v.useRef(null),w=v.useRef(null);v.useEffect(()=>{if(!n)return;const m=localStorage.getItem(`messages_${n}`);if(m)try{const x=JSON.parse(m);c(x.sort((b,S)=>b.timestamp-S.timestamp))}catch(x){console.error("Error loading cached messages:",x)}},[n]),v.useEffect(()=>{if(!t||!n)return;const m=Y(Q,`rides/${n}/messages`),x=Ft(m,b=>{if(!b.exists()){c([]),localStorage.setItem(`messages_${n}`,JSON.stringify([]));return}const S=[];b.forEach(E=>{const _=E.val();S.push({id:E.key,text:_.text,sender:_.sender,senderName:_.senderName,timestamp:_.timestamp,read:_.read||!1})});const T=S.sort((E,_)=>E.timestamp-_.timestamp);c(T),localStorage.setItem(`messages_${n}`,JSON.stringify(T))});return()=>{Ot(m,"value",x)}},[t,n]),v.useEffect(()=>{t&&n&&a()},[t,n]),v.useEffect(()=>{y.current&&y.current.scrollIntoView({behavior:"smooth"})},[l]),v.useEffect(()=>{if(!n)return;const m=Y(Q,`rides/${n}/status`),x=Ft(m,async b=>{if(b.val()==="completed")try{const T=Y(Q,`rides/${n}/messages`);await P_(T),c([]),localStorage.removeItem(`messages_${n}`)}catch(T){console.error("Error clearing messages on completion:",T)}});return()=>{Ot(m,"value",x)}},[n]);const C=async()=>{if(!(!d.trim()||!o||h)){p(!0);try{const m=Y(Q,`rides/${n}/messages`),x=Hd(m);await Dt(x,{text:d.trim(),sender:"client",senderName:"You",timestamp:Date.now(),read:!0}),f("")}catch(m){console.error("Error sending message:",m)}finally{p(!1)}}},g=m=>{m.key==="Enter"&&!m.shiftKey&&(m.preventDefault(),C())};return u.jsx(Je,{children:t&&u.jsxs(u.Fragment,{children:[u.jsx(j.div,{className:"fixed inset-0 bg-black bg-opacity-50 z-50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e}),u.jsxs(j.div,{className:"fixed bottom-0 left-0 right-0 bg-white rounded-t-3xl shadow-2xl z-50 max-h-[70vh] flex flex-col",initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{type:"spring",damping:30,stiffness:300},children:[u.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[u.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Messages"}),u.jsx("button",{onClick:e,className:"w-8 h-8 bg-gray-100 rounded-full flex items-center justify-center hover:bg-gray-200 transition-colors",children:u.jsx(Ee,{size:18,className:"text-gray-600"})})]}),u.jsxs("div",{ref:w,className:"flex-1 overflow-y-auto p-4 space-y-2",style:{maxHeight:"calc(70vh - 140px)"},children:[l.length===0?u.jsx("div",{className:"flex items-center justify-center h-full text-gray-400 text-sm",children:"No messages yet. Start the conversation!"}):l.map(m=>u.jsx(QD,{message:{id:m.id,senderId:m.sender==="client"?s:i,text:m.text,timestamp:m.timestamp,readBy:{}},isCurrentUser:m.sender==="client",senderName:m.sender==="client"?"You":r},m.id)),u.jsx("div",{ref:y})]}),u.jsx("div",{className:"p-4 border-t border-gray-200",children:u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx("input",{type:"text",value:d,onChange:m=>f(m.target.value),onKeyPress:g,placeholder:o?"Type a message...":"Ride not active",disabled:!o||h,className:"flex-1 bg-gray-100 rounded-full px-4 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-green-500 disabled:opacity-50"}),u.jsx("button",{onClick:C,disabled:!d.trim()||!o||h,className:`w-10 h-10 rounded-full flex items-center justify-center transition-colors ${d.trim()&&o&&!h?"bg-green-500 hover:bg-green-600 text-white":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:u.jsx(jj,{size:18})})]})})]})]})})},D_=({isOpen:t,onClose:e,driverName:n,driverPhoto:s,onSubmitRating:i})=>{const[r,o]=v.useState(0),[a,l]=v.useState(0),[c,d]=v.useState(""),[f,h]=v.useState(!1),p=async()=>{if(r===0){alert("Please select a rating");return}h(!0);try{await i(r,c),o(0),d(""),e()}catch(y){console.error("Error submitting rating:",y)}finally{h(!1)}};return u.jsx(Je,{children:t&&u.jsxs(u.Fragment,{children:[u.jsx(j.div,{className:"fixed inset-0 bg-black bg-opacity-50 z-50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0}}),u.jsx(j.div,{className:"fixed inset-0 z-50 flex items-center justify-center p-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:u.jsxs(j.div,{className:"bg-white rounded-3xl p-6 max-w-md w-full relative",initial:{scale:.8,y:50},animate:{scale:1,y:0},exit:{scale:.8,y:50},transition:{type:"spring",damping:25,stiffness:200},children:[u.jsxs("div",{className:"text-center mb-6",children:[u.jsx(j.div,{className:"w-28 h-28 bg-gradient-to-br from-green-400 to-green-600 rounded-full flex items-center justify-center text-5xl mx-auto mb-6 shadow-lg",initial:{scale:0},animate:{scale:1},transition:{delay:.2,type:"spring",damping:15},children:s}),u.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-3",children:"Rate your driver"}),u.jsxs("p",{className:"text-lg text-gray-600",children:["How was your experience with ",n,"?"]})]}),u.jsx("div",{className:"flex justify-center space-x-2 mb-6",children:[1,2,3,4,5].map(y=>u.jsx(j.button,{onClick:()=>o(y),onMouseEnter:()=>l(y),onMouseLeave:()=>l(0),className:"focus:outline-none",whileHover:{scale:1.2},whileTap:{scale:.9},children:u.jsx(J1,{size:40,className:`transition-colors ${y<=(a||r)?"fill-yellow-400 text-yellow-400":"text-gray-300"}`})},y))}),r>0&&u.jsx(j.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"mb-6",children:u.jsx("textarea",{value:c,onChange:y=>d(y.target.value),placeholder:"Share your experience (optional)",className:"w-full bg-gray-100 rounded-2xl px-4 py-3 text-sm focus:outline-none focus:ring-2 focus:ring-green-500 resize-none",rows:4})}),u.jsx("div",{className:"space-y-3",children:u.jsx("button",{onClick:p,disabled:r===0||f,className:`w-full py-4 rounded-2xl font-semibold text-lg transition-colors ${r===0||f?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-green-600 text-white hover:bg-green-700"}`,children:f?"Submitting...":"Submit rating"})})]})})]})})};function My(t,e,n,s,i=40){const o=(n-t)*Math.PI/180,a=(s-e)*Math.PI/180,l=Math.sin(o/2)**2+Math.cos(t*Math.PI/180)*Math.cos(n*Math.PI/180)*Math.sin(a/2)**2,c=6371*2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l)),d=Math.round(c/i*60);return`${d} min${d!==1?"s":""}`}const JD=({destination:t,pickup:e,stops:n,carType:s,price:i,currentRideId:r,onBack:o})=>{const a=be(),{profile:l}=Ui(),{currentRide:c}=uc(r),{unreadMessageCount:d,markMessagesAsRead:f}=A_(),[h,p]=v.useState(null),[y,w]=v.useState("accepted"),[C,g]=v.useState("3 mins"),[m,x]=v.useState("Arriving in 3 mins"),[b,S]=v.useState(!1),[T,E]=v.useState(!1),[_,k]=v.useState(!1),[N,P]=v.useState(!1),[$,M]=v.useState(null),[ge,Qe]=v.useState(!1),wt=cc(e,t,n),ne=po(wt.totalPrice,s),D={id:"driver123",name:"Allen",rating:4.8,plateNumber:"KW14CKGP",carModel:"Silver  Honda Amaze",eta:"3 mins",photo:"",location:{latitude:-26.2041,longitude:28.0473}};v.useEffect(()=>{(async()=>{if(c!=null&&c.driverId)try{const J=await Ce.getDriverInfo(c.driverId);if(J){p(J),g(J.eta||"3 mins");return}}catch(J){console.error("Error fetching driver info:",J)}p(D)})()},[c]),v.useEffect(()=>{if(!r)return;const X=Ce.listenToRideStatus(r,J=>{if(J){const qe=J.status;w(qe),qe==="arrived"&&!T&&(S(!0),E(!0),setTimeout(()=>S(!1),5e3)),qe==="completed"&&P(!0)}});return()=>X()},[r,T]),v.useEffect(()=>{if(!(c!=null&&c.driverId))return;const X=Ce.listenToDriverLocation(c.driverId,J=>{if(J){M(J);const qe=c.pickupLocation||{latitude:-26.2041,longitude:28.0473},zs=c.destinationLocation||{latitude:-26.195,longitude:28.04};if(y==="accepted"){const rs=My(J.lat,J.lng,qe.latitude,qe.longitude);g(rs),x(`Arriving in ${rs}`)}else if(y==="started"){const rs=My(J.lat,J.lng,zs.latitude,zs.longitude);g(rs),x(`On trip  ETA ${rs}`)}}});return()=>X()},[c,y]),v.useEffect(()=>{y==="arrived"?x("Your driver has arrived"):y==="completed"&&x("You've arrived at your destination")},[y]);const R=async()=>{k(!0),await f()},L=()=>Qe(!0),z=()=>Qe(!1),B=async()=>{try{const X=(c==null?void 0:c.id)||r;if(!X)return;await Ce.updateRideStatus(X,"cancelled"),Qe(!1),a("/what-went-wrong",{state:{rideId:X,userId:(l==null?void 0:l.id)||"user123",userName:(l==null?void 0:l.name)||"Unknown User",destination:t,pickup:e,stops:n,carType:s,price:ne}})}catch(X){console.error("Error cancelling ride:",X),Qe(!1)}},ht=async(X,J)=>{if(!(!r||!(c!=null&&c.driverId)||!(l!=null&&l.id)))try{await Ce.submitRating(c.driverId,r,X,J,l.id),P(!1),a("/")}catch(qe){console.error("Error submitting rating:",qe)}};if(!h)return u.jsx("div",{className:"min-h-screen flex items-center justify-center",children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"w-8 h-8 border-2 border-green-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),u.jsx("p",{className:"text-gray-600",children:"Loading driver information..."})]})});const Fe=y==="pending"||y==="completed";return u.jsxs("div",{className:"min-h-screen relative overflow-hidden",children:[u.jsx(Ls,{}),u.jsx(Ql,{initialHeight:500,maxHeight:680,minHeight:350,children:u.jsxs("div",{className:"space-y-6 pb-6",children:[u.jsx(j.div,{className:"text-center pt-4",initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:u.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:m})}),u.jsx(j.div,{className:"bg-gray-50 rounded-2xl p-4",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},children:u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsx("div",{className:"relative",children:u.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-amber-400 to-orange-500 rounded-full flex items-center justify-center text-2xl",children:h.photo})}),u.jsxs("div",{className:"flex-1",children:[u.jsx("h3",{className:"font-bold text-lg text-gray-900",children:h.plateNumber}),u.jsx("p",{className:"text-gray-600",children:h.carModel}),u.jsx("p",{className:"text-gray-900 font-medium",children:h.name})]}),u.jsx("div",{className:"text-3xl",children:""})]})}),u.jsx(j.div,{className:"bg-gray-50 rounded-xl p-4",children:u.jsxs("div",{className:"flex items-center justify-between",children:[y!=="arrived"&&y!=="started"&&u.jsx("button",{onClick:L,className:"text-sm text-red-600 font-medium hover:text-red-700 transition-colors",children:"Cancel ride"}),u.jsx(j.p,{animate:{scale:[1,1.05,1],textShadow:["0 0 0px rgba(147, 51, 234, 0)","0 0 20px rgba(147, 51, 234, 0.8)","0 0 0px rgba(147, 51, 234, 0)"]},transition:{repeat:1/0,duration:1,repeatDelay:4},className:`text-sm text-gray-700 text-center ${y==="arrived"||y==="started"?"flex-1 text-left":"flex-1"}`,children:"Tap the message icon to chat with your driver"}),u.jsxs(j.button,{onClick:R,disabled:Fe,whileTap:{scale:.9},whileHover:{scale:1.05},className:`relative p-2 rounded-full transition-colors ${Fe?"opacity-50 cursor-not-allowed":"hover:bg-gray-200"}`,children:[u.jsx(Nj,{className:`${Fe?"text-gray-400":"text-gray-700"}`,size:24}),d>0&&!Fe&&u.jsx(j.span,{initial:{scale:0},animate:{scale:1},className:"absolute -top-1 -right-1 bg-red-500 text-white text-[10px] w-5 h-5 rounded-full flex items-center justify-center font-bold shadow-lg",children:d})]})]})}),u.jsx(Ms,{maxHeight:"max-h-[420px]",children:u.jsxs("div",{className:"space-y-6 pb-4",children:[u.jsxs(j.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[u.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"My route"}),u.jsxs("div",{className:"space-y-3",children:[u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),u.jsx("span",{className:"flex-1 text-gray-700",children:e}),u.jsx(cn,{className:"text-gray-400",size:16})]}),n.map((X,J)=>u.jsxs("div",{className:"flex items-center space-x-3 ml-6",children:[u.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),u.jsx("span",{className:"flex-1 text-gray-700",children:X}),u.jsx(cn,{className:"text-gray-400",size:16})]},J)),u.jsxs("div",{className:"flex items-center space-x-3 ml-6",children:[u.jsx(Sn,{className:"text-blue-600",size:16}),u.jsx("span",{className:"text-blue-600 font-medium",children:"Add stop"})]}),u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsx(Nd,{className:"text-blue-600",size:12}),u.jsx("span",{className:"flex-1 text-gray-700",children:t}),u.jsx(cn,{className:"text-gray-400",size:16})]})]})]}),u.jsxs(j.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[u.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Payment method"}),u.jsx("div",{className:"bg-gray-50 rounded-xl p-4",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsx(wj,{className:"text-green-600",size:20}),u.jsxs("div",{children:[u.jsx("p",{className:"font-medium text-gray-900",children:"Cash"}),u.jsxs("p",{className:"text-sm text-gray-500",children:["Fare  ",s]})]})]}),u.jsxs("span",{className:"font-bold text-gray-900",children:["R ",ne]})]})})]})]})})]})}),u.jsx(Je,{children:ge&&u.jsx(j.div,{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:u.jsxs(j.div,{className:"bg-white rounded-3xl p-6 max-w-sm w-full relative",initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},children:[u.jsx("button",{onClick:z,className:"absolute top-4 right-4 w-10 h-10 bg-gray-200 rounded-full flex items-center justify-center hover:bg-gray-300",children:u.jsx(Ee,{size:20,className:"text-gray-600"})}),u.jsx("div",{className:"text-center mb-6",children:u.jsxs("div",{className:"relative inline-block",children:[u.jsx("div",{className:"w-24 h-24 bg-pink-100 rounded-full flex items-center justify-center mb-4",children:u.jsx("span",{className:"text-4xl",children:""})}),u.jsx("div",{className:"absolute -bottom-2 -right-2 w-8 h-8 bg-red-500 rounded-full flex items-center justify-center",children:u.jsx(Ee,{size:16,className:"text-white"})})]})}),u.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-4 text-center",children:"Are you sure?"}),u.jsx("p",{className:"text-gray-600 text-center mb-8 leading-relaxed",children:"Do you really want to cancel the ride? Rebooking may not get you there faster."}),u.jsxs("div",{className:"space-y-3",children:[u.jsx("button",{onClick:B,className:"w-full bg-red-500 text-white py-4 rounded-2xl font-semibold text-lg hover:bg-red-600",children:"Cancel ride"}),u.jsx("button",{onClick:z,className:"w-full bg-gray-100 text-gray-800 py-4 rounded-2xl font-semibold text-lg hover:bg-gray-200",children:"Wait for driver"})]})]})})}),u.jsx(XD,{isOpen:_,onClose:()=>k(!1),rideId:r||"",currentUserId:(l==null?void 0:l.id)||"user123",driverId:(c==null?void 0:c.driverId)||"driver123",driverName:h.name,isRideActive:!0}),u.jsx(D_,{isOpen:N,onClose:()=>{},driverName:h.name,driverPhoto:h.photo,onSubmitRating:ht})]})},ZD=()=>{const t=be(),[e,n]=v.useState(new Date),[s,i]=v.useState(""),[r,o]=v.useState(!1),[a,l]=v.useState(!1),[c,d]=v.useState(!1),[f,h]=v.useState(!1),[p,y]=v.useState(new Date().getMonth()),[w,C]=v.useState(new Date().getFullYear()),[g,m]=v.useState(18),[x,b]=v.useState(54),[S,T]=v.useState("");v.useEffect(()=>{const R=new Date;n(R),y(R.getMonth()),C(R.getFullYear());const L=String(R.getDate()).padStart(2,"0"),z=String(R.getMonth()+1).padStart(2,"0"),B=R.getFullYear();T(`${L}/${z}/${B}`)},[]);const E=R=>{const L=new Date;return R.toDateString()===L.toDateString()?`Today, ${R.getDate()} ${R.toLocaleDateString("en-US",{month:"short"})}`:`${R.toLocaleDateString("en-US",{weekday:"short"})}, ${R.getDate()} ${R.toLocaleDateString("en-US",{month:"short"})}`},_=()=>s||"Select",k=R=>{const L=new Date(w,p,R),z=new Date,B=new Date;B.setMonth(B.getMonth()+3),L>=z&&L<=B&&(n(L),o(!1))},N=()=>{const R=g>12?g-12:g===0?12:g,L=g>=12?"PM":"AM",z=`${R}:${String(x).padStart(2,"0")} ${L}`;i(z),l(!1)},P=()=>{try{const[R,L,z]=S.split("/").map(Number),B=new Date(z,L-1,R),ht=new Date,Fe=new Date;Fe.setMonth(Fe.getMonth()+3),B>=ht&&B<=Fe&&(n(B),y(B.getMonth()),C(B.getFullYear()),d(!1))}catch{console.error("Invalid date format")}},$=()=>{s&&t("/schedule-your-route")},M=(R,L)=>new Date(L,R+1,0).getDate(),ge=(R,L)=>new Date(L,R,1).getDay(),Qe=()=>{const R=M(p,w),L=ge(p,w),z=new Date,B=new Date;B.setMonth(B.getMonth()+3);const ht=[];["S","M","T","W","T","F","S"].forEach(X=>{ht.push(u.jsx("div",{className:"text-center text-gray-500 font-medium py-2",children:X},X))});for(let X=0;X<L;X++)ht.push(u.jsx("div",{className:"p-2"},`empty-${X}`));for(let X=1;X<=R;X++){const J=new Date(w,p,X),qe=e.toDateString()===J.toDateString(),zs=J<z||J>B,rs=J.toDateString()===z.toDateString();ht.push(u.jsx("button",{onClick:()=>!zs&&k(X),disabled:zs,className:`w-10 h-10 rounded-full flex items-center justify-center text-sm font-medium transition-colors ${qe?"bg-green-600 text-white":rs?"bg-green-100 text-green-600":zs?"text-gray-300 cursor-not-allowed":"text-gray-700 hover:bg-gray-100"}`,children:X},X))}return ht},wt=()=>{const R=new Date().getFullYear(),L=new Date().getMonth(),z=[R];return L>=9&&z.push(R+1),z},ne=["JANUARY","FEBRUARY","MARCH","APRIL","MAY","JUNE","JULY","AUGUST","SEPTEMBER","OCTOBER","NOVEMBER","DECEMBER"],D=R=>{const L=new Date,z=new Date;if(z.setMonth(z.getMonth()+3),R==="next")if(p===11){const B=w+1;B<=z.getFullYear()&&(y(0),C(B))}else new Date(w,p+1,1)<=z&&y(p+1);else if(p===0){const B=w-1;B>=L.getFullYear()&&(y(11),C(B))}else new Date(w,p-1,1)>=new Date(L.getFullYear(),L.getMonth(),1)&&y(p-1)};return u.jsxs(j.div,{className:"min-h-screen bg-gray-50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},children:[u.jsx(j.div,{className:"bg-white p-4 shadow-sm",initial:{y:-50,opacity:0},animate:{y:0,opacity:1},transition:{delay:.1},children:u.jsx("div",{className:"flex items-center space-x-4",children:u.jsx("button",{onClick:()=>t(-1),className:"w-10 h-10 flex items-center justify-center hover:bg-gray-100 rounded-full transition-colors",children:u.jsx(Ee,{size:24,className:"text-gray-800"})})})}),u.jsxs(j.div,{className:"p-6 space-y-8",initial:{y:50,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2},children:[u.jsxs("div",{children:[u.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Select pickup time"}),u.jsx("p",{className:"text-gray-600",children:"From 30 minutes, up to 90 days in advance"})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsx("label",{className:"block text-lg font-medium text-gray-900",children:"Date"}),u.jsx("button",{onClick:()=>o(!0),className:"w-full bg-gray-100 rounded-xl p-4 text-left hover:bg-gray-200 transition-colors flex items-center justify-between",children:u.jsx("span",{className:"text-gray-900 font-medium",children:E(e)})})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsx("label",{className:"block text-lg font-medium text-gray-900",children:"Pickup time"}),u.jsxs("button",{onClick:()=>l(!0),className:"w-full bg-gray-100 rounded-xl p-4 text-left hover:bg-gray-200 transition-colors flex items-center justify-between",children:[u.jsx("span",{className:`${s?"text-gray-900 font-medium":"text-gray-500"}`,children:_()}),u.jsx("span",{className:"text-green-600 font-medium",children:"Select"})]})]}),u.jsx("button",{className:"text-green-600 font-medium",children:"Terms of Scheduled Rides"})]}),u.jsx(j.div,{className:"fixed bottom-6 left-6 right-6",initial:{y:100,opacity:0},animate:{y:0,opacity:1},transition:{delay:.4},children:u.jsx("button",{onClick:$,disabled:!s,className:`w-full py-4 rounded-xl font-semibold text-lg transition-colors ${s?"bg-green-600 text-white hover:bg-green-700":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:"Continue"})}),u.jsx(Je,{children:r&&u.jsx(j.div,{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:u.jsxs(j.div,{className:"bg-white rounded-2xl overflow-hidden max-w-sm w-full",initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},children:[u.jsxs("div",{className:"bg-green-600 text-white p-4",children:[u.jsx("div",{className:"text-sm font-medium mb-1",children:"SELECT DATE"}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"text-2xl font-light",children:[e.toLocaleDateString("en-US",{month:"short"})," ",e.getDate(),", ",e.getFullYear()]}),u.jsx("button",{onClick:()=>d(!0),className:"p-2 hover:bg-green-700 rounded-full transition-colors",children:u.jsx(cn,{size:20})})]})]}),u.jsxs("div",{className:"p-4 border-b",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsxs("button",{onClick:()=>h(!0),className:"flex items-center space-x-1 text-gray-700 hover:bg-gray-100 px-2 py-1 rounded",children:[u.jsxs("span",{className:"font-medium",children:[ne[p]," ",w]}),u.jsx(vj,{size:16})]}),u.jsxs("div",{className:"flex space-x-2",children:[u.jsx("button",{onClick:()=>D("prev"),className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:u.jsx(xj,{size:20})}),u.jsx("button",{onClick:()=>D("next"),className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:u.jsx(Y1,{size:20})})]})]}),u.jsx("div",{className:"grid grid-cols-7 gap-1",children:Qe()})]}),u.jsxs("div",{className:"p-4 flex justify-end space-x-4",children:[u.jsx("button",{onClick:()=>o(!1),className:"text-green-600 font-medium px-4 py-2 hover:bg-green-50 rounded transition-colors",children:"CANCEL"}),u.jsx("button",{onClick:()=>o(!1),className:"text-green-600 font-medium px-4 py-2 hover:bg-green-50 rounded transition-colors",children:"OK"})]})]})})}),u.jsx(Je,{children:a&&u.jsx(j.div,{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:u.jsxs(j.div,{className:"bg-white rounded-2xl p-6 max-w-sm w-full",initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},children:[u.jsx("h3",{className:"text-lg font-medium text-gray-700 mb-6 text-center",children:"SELECT TIME"}),u.jsxs("div",{className:"flex items-center justify-center space-x-4 mb-8",children:[u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"border-2 border-green-600 rounded-lg p-4 mb-2",children:u.jsx("input",{type:"number",min:"0",max:"23",value:g,onChange:R=>m(parseInt(R.target.value)||0),className:"text-4xl font-light text-center w-16 bg-transparent outline-none"})}),u.jsx("div",{className:"text-sm text-gray-500",children:"Hour"})]}),u.jsx("div",{className:"text-4xl font-light text-gray-400",children:":"}),u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"bg-gray-100 rounded-lg p-4 mb-2",children:u.jsx("input",{type:"number",min:"0",max:"59",value:x,onChange:R=>b(parseInt(R.target.value)||0),className:"text-4xl font-light text-center w-16 bg-transparent outline-none"})}),u.jsx("div",{className:"text-sm text-gray-500",children:"Minute"})]})]}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx(Ts,{size:24,className:"text-gray-400"}),u.jsxs("div",{className:"flex space-x-4",children:[u.jsx("button",{onClick:()=>l(!1),className:"text-green-600 font-medium px-4 py-2 hover:bg-green-50 rounded transition-colors",children:"CANCEL"}),u.jsx("button",{onClick:N,className:"text-green-600 font-medium px-4 py-2 hover:bg-green-50 rounded transition-colors",children:"OK"})]})]})]})})}),u.jsx(Je,{children:c&&u.jsx(j.div,{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:u.jsxs(j.div,{className:"bg-white rounded-2xl overflow-hidden max-w-sm w-full",initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},children:[u.jsxs("div",{className:"bg-green-600 text-white p-4",children:[u.jsx("div",{className:"text-sm font-medium mb-1",children:"SELECT DATE"}),u.jsxs("div",{className:"text-2xl font-light",children:[e.toLocaleDateString("en-US",{month:"short"})," ",e.getDate(),", ",e.getFullYear()]})]}),u.jsx("div",{className:"p-6",children:u.jsxs("div",{className:"bg-gray-100 rounded-lg p-4",children:[u.jsx("div",{className:"text-sm text-green-600 font-medium mb-2",children:"Date"}),u.jsx("input",{type:"text",value:S,onChange:R=>T(R.target.value),placeholder:"DD/MM/YYYY",className:"w-full text-lg font-medium bg-transparent outline-none border-b-2 border-green-600 pb-1"})]})}),u.jsxs("div",{className:"p-4 flex justify-end space-x-4",children:[u.jsx("button",{onClick:()=>d(!1),className:"text-green-600 font-medium px-4 py-2 hover:bg-green-50 rounded transition-colors",children:"CANCEL"}),u.jsx("button",{onClick:P,className:"text-green-600 font-medium px-4 py-2 hover:bg-green-50 rounded transition-colors",children:"OK"})]})]})})}),u.jsx(Je,{children:f&&u.jsx(j.div,{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:u.jsxs(j.div,{className:"bg-white rounded-2xl p-6 max-w-sm w-full",initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},children:[u.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4 text-center",children:"Select Year"}),u.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:wt().map(R=>u.jsx("button",{onClick:()=>{C(R),h(!1)},className:`w-full p-3 rounded-lg text-left hover:bg-green-100 transition-colors ${w===R?"bg-green-600 text-white":"text-gray-900"}`,children:R},R))}),u.jsx("button",{onClick:()=>h(!1),className:"w-full mt-4 bg-gray-200 text-gray-800 py-3 rounded-xl font-semibold hover:bg-gray-300 transition-colors",children:"Close"})]})})})]})},e4=()=>{const t=be(),{address:e,loading:n}=up(),[s,i]=v.useState(""),[r,o]=v.useState(""),[a,l]=v.useState([]),[c,d]=v.useState("destination"),[f,h]=v.useState(""),[p,y]=v.useState(Cl(""));v.useEffect(()=>{e&&!s&&i(e)},[e,s]),v.useEffect(()=>{d("destination")},[]),v.useEffect(()=>{y(Cl(f))},[f]);const w=()=>{if(!s)return"pickup";if(!r)return"destination";for(let _=0;_<a.length;_++)if(!a[_]||a[_].trim()==="")return _;return null},C=()=>{const _=s&&s.trim()!=="",k=r&&r.trim()!=="",N=a.length===0||a.every(P=>P&&P.trim()!=="");return _&&k&&N},g=_=>{d(_),h(_==="pickup"?s:_==="destination"?r:a[_]||"")},m=_=>{if(c==="pickup")i(_);else if(c==="destination")o(_);else if(typeof c=="number"){const k=[...a];k[c]=_,l(k)}h(""),setTimeout(()=>{const k=w();k!==null?(d(k),h(k==="pickup"?s:k==="destination"?r:a[k]||"")):C()&&t("/schedule-confirm",{state:{pickup:s,destination:r,stops:a}})},100)},x=()=>{if(a.length<3){const _=[...a,""];l(_),d(_.length-1),h("")}},b=_=>{const k=a.filter((N,P)=>P!==_);if(l(k),c===_){const N=w();d(N||"destination")}},S=_=>{if(c==="pickup")i(_);else if(c==="destination")o(_);else if(typeof c=="number"){const k=[...a];k[c]=_,l(k)}h(_)},T=_=>_==="pickup"?"Search pick-up location":_==="destination"?"Destination":"Add stop",E=_=>c===_;return u.jsxs(j.div,{className:"min-h-screen bg-gray-50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},children:[u.jsx(j.div,{className:"bg-white p-4 shadow-sm",initial:{y:-50,opacity:0},animate:{y:0,opacity:1},transition:{delay:.1},children:u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsx("button",{onClick:()=>t(-1),className:"w-10 h-10 flex items-center justify-center hover:bg-gray-100 rounded-full transition-colors",children:u.jsx(Ee,{size:24,className:"text-gray-800"})}),u.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:"Schedule your ride"})]})}),u.jsxs(j.div,{className:"p-4 pt-8 space-y-4",initial:{y:50,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2},children:[u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full flex-shrink-0"}),u.jsxs("div",{className:"flex-1 relative",children:[u.jsx("input",{type:"text",value:s,onChange:_=>S(_.target.value),onFocus:()=>g("pickup"),placeholder:n?"Getting your location...":T("pickup"),className:`w-full bg-gray-100 rounded-xl px-4 py-3 text-gray-900 placeholder-gray-500 focus:outline-none transition-all ${E("pickup")?"ring-2 ring-green-500 bg-white shadow-lg shadow-green-500/20 border-2 border-green-500":"focus:ring-2 focus:ring-green-500 focus:bg-white"}`,disabled:n}),s&&c==="pickup"&&u.jsx("button",{onClick:()=>{i(""),h("")},className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-6 h-6 bg-gray-300 rounded-full flex items-center justify-center",children:u.jsx(Ee,{size:14,className:"text-gray-600"})})]}),u.jsx("button",{onClick:x,className:"w-10 h-10 flex items-center justify-center hover:bg-gray-100 rounded-full transition-colors",disabled:a.length>=3,children:u.jsx(Sn,{size:20,className:a.length>=3?"text-gray-300":"text-gray-600"})})]}),u.jsx(Je,{children:a.map((_,k)=>u.jsxs(j.div,{className:"flex items-center space-x-3 ml-6",initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},children:[u.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full flex-shrink-0"}),u.jsx("div",{className:"flex-1 relative",children:u.jsx("input",{type:"text",value:_,onChange:N=>S(N.target.value),onFocus:()=>g(k),placeholder:T(k),className:`w-full bg-gray-100 rounded-xl px-4 py-3 text-gray-900 placeholder-gray-500 focus:outline-none transition-all ${E(k)?"ring-2 ring-green-500 bg-white shadow-lg shadow-green-500/20 border-2 border-green-500":"focus:ring-2 focus:ring-green-500 focus:bg-white"}`})}),u.jsx("button",{onClick:()=>b(k),className:"w-10 h-10 flex items-center justify-center hover:bg-gray-100 rounded-full transition-colors",children:u.jsx(Ee,{size:16,className:"text-red-500"})})]},k))}),u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsx("div",{className:"w-3 h-3 bg-gray-400 rounded-full flex-shrink-0"}),u.jsxs("div",{className:"flex-1 relative",children:[u.jsx("input",{type:"text",value:r,onChange:_=>S(_.target.value),onFocus:()=>g("destination"),placeholder:T("destination"),className:`w-full bg-gray-100 rounded-xl px-4 py-3 text-gray-900 placeholder-gray-500 focus:outline-none transition-all ${E("destination")?"ring-2 ring-green-500 bg-white shadow-lg shadow-green-500/20 border-2 border-green-500":"focus:ring-2 focus:ring-green-500 focus:bg-white"}`}),u.jsx(Yl,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20})]}),u.jsx("div",{className:"w-10 flex items-center justify-center",children:u.jsxs("div",{className:"flex flex-col space-y-1",children:[u.jsx("div",{className:"w-1 h-1 bg-gray-400 rounded-full"}),u.jsx("div",{className:"w-1 h-1 bg-gray-400 rounded-full"}),u.jsx("div",{className:"w-1 h-1 bg-gray-400 rounded-full"})]})})]}),u.jsx(Ms,{maxHeight:"max-h-96",children:u.jsxs("div",{className:"space-y-2 mt-6",children:[p.map((_,k)=>u.jsxs(j.button,{onClick:()=>m(_.address),className:"w-full flex items-center space-x-3 p-3 hover:bg-gray-50 rounded-lg transition-colors text-left",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:k*.05},whileTap:{scale:.98},children:[u.jsx(Ts,{className:"text-gray-400 flex-shrink-0",size:20}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("p",{className:"font-medium text-gray-900 truncate",children:_.address}),u.jsx("p",{className:"text-sm text-gray-500 truncate",children:_.description})]}),_.distance&&u.jsx("span",{className:"text-sm text-gray-400 flex-shrink-0",children:_.distance})]},_.id)),u.jsxs(j.button,{onClick:()=>m(e||"Current Location"),className:"w-full flex items-center space-x-3 p-3 hover:bg-gray-50 rounded-lg transition-colors text-left",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:p.length*.05},whileTap:{scale:.98},children:[u.jsx(q1,{className:"text-blue-500 flex-shrink-0",size:20}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsx("p",{className:"font-medium text-blue-600",children:"My location"}),e&&u.jsx("p",{className:"text-sm text-gray-500 truncate",children:e})]})]})]})})]})]})},t4=()=>{const t=be(),e=xt(),{pickup:n,destination:s,stops:i}=e.state||{};return u.jsxs(j.div,{className:"min-h-screen relative overflow-hidden",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},children:[u.jsx(Ls,{}),u.jsx(j.div,{className:"absolute top-0 left-0 right-0 z-10 bg-white shadow-sm p-4",initial:{y:-50,opacity:0},animate:{y:0,opacity:1},transition:{delay:.1},children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("button",{onClick:()=>t(-1),className:"w-10 h-10 flex items-center justify-center hover:bg-gray-100 rounded-full transition-colors",children:u.jsx(Ds,{size:20,className:"text-gray-800"})}),u.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:s}),u.jsx("button",{className:"w-10 h-10 flex items-center justify-center hover:bg-gray-100 rounded-full transition-colors",children:u.jsx(Sn,{size:20,className:"text-gray-800"})})]})}),u.jsx(j.div,{className:"fixed bottom-0 left-0 right-0 bg-white rounded-t-3xl shadow-2xl p-6 z-20",initial:{y:200,opacity:0},animate:{y:0,opacity:1},transition:{type:"spring",damping:25,stiffness:200,delay:.2},children:u.jsxs("div",{className:"space-y-6",children:[u.jsx("div",{className:"flex justify-end",children:u.jsx("button",{onClick:()=>t("/"),className:"w-8 h-8 bg-gray-200 rounded-full flex items-center justify-center hover:bg-gray-300 transition-colors",children:u.jsx(Ee,{size:16,className:"text-gray-600"})})}),u.jsxs("div",{className:"text-center",children:[u.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Choose payment method"}),u.jsx("p",{className:"text-gray-600",children:"Set your payment method before requesting a ride."})]}),u.jsx(j.button,{onClick:()=>{console.log("Add card clicked")},className:"w-full bg-green-600 text-white py-4 rounded-xl font-semibold text-lg hover:bg-green-700 transition-colors shadow-lg",whileTap:{scale:.98},whileHover:{scale:1.02},children:"Add card"})]})})]})},n4=()=>{const t=be(),e=xt(),{rideId:n,userId:s,userName:i}=e.state||{},[r,o]=v.useState(""),[a,l]=v.useState(!1),c=["Long pickup time","Car not moving towards me","Accidental request","Driver asked to pay off-the-app","Driver not at pickup point","Driver asked to cancel","Driver asked for personal info","Other"],d=h=>{o(h)},f=async()=>{if(r){l(!0);try{let h=n;if(!h&&s&&(h=await Ce.findActiveRideByUser(s)),!h){console.error("No valid rideId found to attach cancellation reason to."),t("/",{replace:!0});return}await Ce.updateRideStatus(h,"cancelled"),await Ce.saveCancellationReason(h,r,s||"user123",i||"Unknown User"),t("/",{replace:!0})}catch(h){console.error("Failed to save cancellation reason:",h),t("/",{replace:!0})}finally{l(!1)}}};return u.jsxs(j.div,{className:"min-h-screen bg-white",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},children:[u.jsx(j.div,{className:"p-4 pt-12",initial:{y:-50,opacity:0},animate:{y:0,opacity:1},transition:{delay:.1},children:u.jsx("div",{className:"flex items-center justify-between",children:u.jsx("button",{onClick:()=>t("/",{replace:!0}),className:"w-10 h-10 flex items-center justify-center hover:bg-gray-100 rounded-full transition-colors",children:u.jsx(Ee,{size:24,className:"text-gray-800"})})})}),u.jsxs(j.div,{className:"px-4 pb-32",initial:{y:50,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2},children:[u.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-8",children:"What went wrong?"}),u.jsx("div",{className:"space-y-0 max-h-96 overflow-y-auto",children:c.map((h,p)=>u.jsxs(j.button,{onClick:()=>d(h),className:"w-full flex items-center justify-between p-4 hover:bg-gray-50 transition-colors border-b border-gray-100 last:border-b-0",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.3+p*.05},whileTap:{scale:.98},children:[u.jsx("span",{className:"text-lg text-gray-900 text-left",children:h}),u.jsxs("div",{className:"flex items-center space-x-3",children:[h==="Other"&&u.jsx(Y1,{size:20,className:"text-gray-400"}),u.jsx("div",{className:`w-6 h-6 rounded-full border-2 flex items-center justify-center transition-colors ${r===h?"border-green-500 bg-green-500":"border-gray-300"}`,children:r===h&&u.jsx("div",{className:"w-3 h-3 bg-white rounded-full"})})]})]},h))})]}),u.jsx(j.div,{className:"fixed bottom-6 left-4 right-4",initial:{y:100,opacity:0},animate:{y:0,opacity:1},transition:{delay:.5},children:u.jsx("button",{onClick:f,disabled:!r||a,className:`w-full py-4 rounded-2xl font-semibold text-lg transition-colors ${r&&!a?"bg-green-600 text-white hover:bg-green-700":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:a?"Saving...":"Done"})})]})},s4=()=>{const t=be(),[e,n]=v.useState(null),s=[{id:"package",label:"Send My Package",description:"Delivery for parcels",icon:u.jsx(X1,{size:40}),color:"bg-blue-50",borderColor:"border-blue-200"},{id:"foodies",label:"Foodies",description:"Order from shops",icon:"",color:"bg-red-50",borderColor:"border-red-200"},{id:"clothes",label:"Clothes & Others",description:"Shop deliveries",icon:u.jsx(Pj,{size:40}),color:"bg-purple-50",borderColor:"border-purple-200"},{id:"truck",label:"Delivery Truck",description:"Large shipments",icon:u.jsx(Aj,{size:40}),color:"bg-cyan-50",borderColor:"border-cyan-200"},{id:"heavy",label:"Heavy Duty",description:"Industrial delivery",icon:u.jsx(Mj,{size:40}),color:"bg-teal-600",borderColor:"border-teal-600"}],i=a=>{a==="foodies"?t("/shop"):n(a)},r={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1,delayChildren:.2}}},o={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.5,ease:"easeOut"}}};return u.jsx("div",{className:"min-h-screen bg-white",children:u.jsxs(j.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.4},className:"flex flex-col h-screen",children:[u.jsxs("div",{className:"p-4 pt-6 border-b border-gray-100",children:[u.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[u.jsx(j.button,{onClick:()=>t("/"),whileTap:{scale:.95},className:"flex items-center justify-center w-10 h-10 rounded-full bg-gray-100 hover:bg-gray-200 transition-colors",children:u.jsx(Ds,{size:24,className:"text-gray-800"})}),u.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Aletwende Send"})]}),u.jsx("p",{className:"text-lg text-gray-600 font-medium pl-14",children:"What would you like to send?"})]}),u.jsx(j.div,{variants:r,initial:"hidden",animate:"visible",className:"flex-1 overflow-y-auto p-4 space-y-3",children:s.map((a,l)=>u.jsx(j.button,{variants:o,onClick:()=>i(a.id),whileTap:{scale:.98},className:`w-full ${l===4?"col-span-2 rounded-2xl p-6 flex flex-col items-center justify-center gap-3":"rounded-3xl p-5 flex items-center gap-4"} ${a.color} border ${a.borderColor} transition-all hover:shadow-lg`,children:l===4?u.jsxs(u.Fragment,{children:[u.jsx("div",{className:`text-5xl ${a.color==="bg-teal-600"?"text-white":""}`,children:""}),u.jsxs("div",{className:`text-center ${a.color==="bg-teal-600"?"text-white":""}`,children:[u.jsx("h3",{className:"font-bold text-xl",children:a.label}),u.jsx("p",{className:"text-sm opacity-80",children:a.description})]})]}):u.jsxs(u.Fragment,{children:[u.jsx("div",{className:`flex-shrink-0 text-4xl ${typeof a.icon=="string"?"":"text-gray-700"}`,children:(typeof a.icon=="string",a.icon)}),u.jsxs("div",{className:"text-left",children:[u.jsx("h3",{className:"font-bold text-gray-900",children:a.label}),u.jsx("p",{className:"text-xs text-gray-600",children:a.description})]})]})},a.id))})]})})},M_=[{id:"hungry-lion",name:"Hungry Lion",image:"https://images.pexels.com/photos/3407899/pexels-photo-3407899.jpeg?auto=compress&cs=tinysrgb&w=400",foods:[{id:"hl-fried-chicken",name:"Fried Chicken & Chips",price:90,image:"https://images.pexels.com/photos/5639730/pexels-photo-5639730.jpeg?auto=compress&cs=tinysrgb&w=400"},{id:"hl-double-cheese",name:"Double Cheese Lion",price:80,image:"https://images.pexels.com/photos/5737368/pexels-photo-5737368.jpeg?auto=compress&cs=tinysrgb&w=400"},{id:"hl-burger-chips",name:"Lion Burger & Chips",price:65,image:"https://images.pexels.com/photos/5632672/pexels-photo-5632672.jpeg?auto=compress&cs=tinysrgb&w=400"},{id:"hl-combo",name:"Classic Combo",price:70,image:"https://images.pexels.com/photos/3915857/pexels-photo-3915857.jpeg?auto=compress&cs=tinysrgb&w=400"}]},{id:"pizza-hub",name:"Pizza Hub",image:"https://images.pexels.com/photos/7974/pexels-photo.jpeg?auto=compress&cs=tinysrgb&w=400",foods:[{id:"ph-margherita",name:"Margherita Pizza",price:120,image:"https://images.pexels.com/photos/3621613/pexels-photo-3621613.jpeg?auto=compress&cs=tinysrgb&w=400"},{id:"ph-pepperoni",name:"Pepperoni Special",price:140,image:"https://images.pexels.com/photos/4551832/pexels-photo-4551832.jpeg?auto=compress&cs=tinysrgb&w=400"},{id:"ph-hawaiian",name:"Hawaiian Pizza",price:130,image:"https://images.pexels.com/photos/1997603/pexels-photo-1997603.jpeg?auto=compress&cs=tinysrgb&w=400"},{id:"ph-quattro",name:"Quattro Formaggi",price:150,image:"https://images.pexels.com/photos/3536236/pexels-photo-3536236.jpeg?auto=compress&cs=tinysrgb&w=400"}]},{id:"sushi-spot",name:"Sushi Spot",image:"https://images.pexels.com/photos/1092730/pexels-photo-1092730.jpeg?auto=compress&cs=tinysrgb&w=400",foods:[{id:"ss-california",name:"California Roll",price:110,image:"https://images.pexels.com/photos/370984/pexels-photo-370984.jpeg?auto=compress&cs=tinysrgb&w=400"},{id:"ss-spicy-tuna",name:"Spicy Tuna Roll",price:115,image:"https://images.pexels.com/photos/1092730/pexels-photo-1092730.jpeg?auto=compress&cs=tinysrgb&w=400"},{id:"ss-dragon",name:"Dragon Roll",price:140,image:"https://images.pexels.com/photos/1092730/pexels-photo-1092730.jpeg?auto=compress&cs=tinysrgb&w=400"},{id:"ss-assorted",name:"Assorted Platter",price:160,image:"https://images.pexels.com/photos/1092730/pexels-photo-1092730.jpeg?auto=compress&cs=tinysrgb&w=400"}]},{id:"thai-delight",name:"Thai Delight",image:"https://images.pexels.com/photos/5725721/pexels-photo-5725721.jpeg?auto=compress&cs=tinysrgb&w=400",foods:[{id:"td-pad-thai",name:"Pad Thai",price:85,image:"https://images.pexels.com/photos/1410235/pexels-photo-1410235.jpeg?auto=compress&cs=tinysrgb&w=400"},{id:"td-green-curry",name:"Green Curry",price:95,image:"https://images.pexels.com/photos/1059905/pexels-photo-1059905.jpeg?auto=compress&cs=tinysrgb&w=400"},{id:"td-tom-yum",name:"Tom Yum Soup",price:75,image:"https://images.pexels.com/photos/5737368/pexels-photo-5737368.jpeg?auto=compress&cs=tinysrgb&w=400"},{id:"td-spring-rolls",name:"Spring Rolls",price:55,image:"https://images.pexels.com/photos/5731455/pexels-photo-5731455.jpeg?auto=compress&cs=tinysrgb&w=400"}]}];function i4(){const t=be(),e=n=>{t(`/order-foodies/${n}`)};return u.jsxs("div",{className:"flex flex-col h-screen bg-gray-50",children:[u.jsxs("div",{className:"fixed top-0 left-0 right-0 z-10 bg-white pt-4 pb-4 px-4 border-b border-gray-100",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsx("button",{onClick:()=>t("/aletwende-send"),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:u.jsx(Ds,{className:"w-6 h-6 text-gray-800"})}),u.jsx("h1",{className:"text-2xl font-bold text-center text-green-600",children:"Shop"}),u.jsx("div",{className:"w-10"})]}),u.jsxs("div",{className:"relative mb-2",children:[u.jsx(Yl,{className:"absolute left-3 top-3 w-5 h-5 text-gray-400"}),u.jsx("input",{type:"text",placeholder:"Search stores...",className:"w-full pl-10 pr-4 py-2 rounded-lg bg-gray-100 text-sm border-0 focus:outline-none focus:ring-2 focus:ring-green-500"})]}),u.jsx("p",{className:"text-xs text-gray-500 text-center",children:"Aletewende"})]}),u.jsx("div",{className:"flex-1 overflow-y-auto mt-32 px-4 pb-4",children:u.jsx("div",{className:"grid grid-cols-2 gap-4",children:M_.map(n=>u.jsxs("button",{onClick:()=>e(n.id),className:"flex flex-col rounded-lg overflow-hidden bg-white shadow-sm hover:shadow-md transition-shadow",children:[u.jsx("img",{src:n.image,alt:n.name,className:"w-full h-32 object-cover"}),u.jsxs("div",{className:"p-3 flex-1 flex flex-col justify-between",children:[u.jsx("h3",{className:"font-semibold text-gray-800 text-sm text-left",children:n.name}),u.jsxs("p",{className:"text-xs text-gray-500 text-left",children:[n.foods.length," items"]})]})]},n.id))})})]})}const L_=v.createContext(void 0),Ly="foodOrderSession";function r4({children:t}){const[e,n]=v.useState([]),[s,i]=v.useState([]),[r,o]=v.useState([]);v.useEffect(()=>{const E=localStorage.getItem(Ly);if(E)try{const _=JSON.parse(E);n(_.cartItems||[]),i(_.currentLocationFoodIds||[]),o(_.stops||[])}catch(_){console.error("Error loading order session:",_)}},[]),v.useEffect(()=>{const E={cartItems:e,currentLocationFoodIds:s,stops:r};localStorage.setItem(Ly,JSON.stringify(E))},[e,s,r]);const a=v.useCallback(E=>{n(_=>{if(_.find(P=>P.id===E.id))return _.filter(P=>P.id!==E.id);const N=[..._,E];return i(P=>[...P,E.id]),N})},[]),l=v.useCallback(E=>{n(_=>_.filter(k=>k.id!==E)),i(_=>_.filter(k=>k!==E)),o(_=>_.map(k=>({...k,foodIds:k.foodIds.filter(N=>N!==E)})))},[]),c=v.useCallback(()=>{n([]),i([]),o([])},[]),d=v.useCallback(E=>e.some(_=>_.id===E),[e]),f=v.useCallback(()=>e.length,[e]),h=v.useCallback(E=>{r.length>=3||o(_=>[..._,E])},[r.length]),p=v.useCallback(E=>{const _=r.find(k=>k.id===E);_&&i(k=>[...k,..._.foodIds]),o(k=>k.filter(N=>N.id!==E))},[r]),y=v.useCallback((E,_)=>{o(k=>k.map(N=>N.id===E?{...N,..._}:N))},[]),w=v.useCallback((E,_)=>{const k=r.find($=>$.id===E);if(!k)return;const P=k.foodIds.filter($=>!_.includes($));i($=>{let M=$.filter(ge=>!_.includes(ge));return M=[...M,...P],M}),o($=>$.map(M=>M.id===E?{...M,foodIds:_}:M))},[r]),C=v.useCallback((E,_)=>{o(k=>k.map(N=>N.id===E?{...N,foodIds:N.foodIds.filter(P=>P!==_)}:N)),i(k=>[...k,_])},[]),g=v.useCallback(()=>e.filter(E=>s.includes(E.id)),[e,s]),m=v.useCallback(E=>{const _=r.find(k=>k.id===E);return _?e.filter(k=>_.foodIds.includes(k.id)):[]},[e,r]),x=v.useCallback(()=>{const E=new Set(s);return r.forEach(_=>{_.foodIds.forEach(k=>E.add(k))}),e.filter(_=>!E.has(_.id))},[e,s,r]),b=v.useCallback(()=>r.length>=3||e.length<2?!1:x().length+s.length>1,[r.length,e.length,x,s.length]),S=v.useCallback(E=>e,[e]),T=v.useCallback(()=>{o(E=>{const _=E.filter(N=>N.foodIds.length>0&&N.address&&N.address.trim()!=="");return E.filter(N=>N.foodIds.length===0||!N.address||N.address.trim()==="").forEach(N=>{i(P=>[...P,...N.foodIds])}),_})},[]);return u.jsx(L_.Provider,{value:{cartItems:e,currentLocationFoodIds:s,stops:r,addToCart:a,removeFromCart:l,clearCart:c,isItemInCart:d,getCartCount:f,addStop:h,removeStop:p,updateStop:y,assignFoodToStop:w,removeFoodFromStop:C,getCurrentLocationFoods:g,getStopFoods:m,getUnassignedFoods:x,canAddStop:b,getAvailableFoodsForStop:S,removeStopsWithoutFoodOrAddress:T},children:t})}function dp(){const t=v.useContext(L_);if(!t)throw new Error("useFoodOrderSession must be used within FoodOrderSessionProvider");return t}function o4(){const{storeId:t}=zE(),e=be(),{addToCart:n,isItemInCart:s,getCartCount:i}=dp(),r=M_.find(a=>a.id===t);if(!r)return u.jsxs("div",{className:"flex flex-col h-screen items-center justify-center bg-gray-50",children:[u.jsx("p",{className:"text-gray-600",children:"Store not found"}),u.jsx("button",{onClick:()=>e("/shop"),className:"mt-4 px-4 py-2 bg-green-600 text-white rounded-lg",children:"Back to Shop"})]});const o=i();return u.jsxs("div",{className:"flex flex-col h-screen bg-gray-50",children:[u.jsxs("div",{className:"fixed top-0 left-0 right-0 z-10 bg-white px-4 py-3 border-b border-gray-100",children:[u.jsxs("div",{className:"flex items-center justify-between mb-3",children:[u.jsx("button",{onClick:()=>e("/shop"),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:u.jsx(Ds,{className:"w-6 h-6 text-gray-800"})}),u.jsxs("div",{className:"relative",children:[u.jsx(Rj,{className:"w-6 h-6 text-gray-800"}),o>0&&u.jsx("span",{className:"absolute -top-2 -right-2 bg-red-500 text-white text-xs font-bold rounded-full w-5 h-5 flex items-center justify-center",children:o})]})]}),u.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Order Foodies"}),u.jsx("h1",{className:"text-xl font-bold text-gray-900",children:r.name})]}),u.jsx("div",{className:"flex-1 overflow-y-auto mt-28 px-4 pb-24",children:u.jsx("div",{className:"grid grid-cols-2 gap-4",children:r.foods.map(a=>u.jsxs("div",{className:`bg-white rounded-lg overflow-hidden shadow-sm transition-all ${s(a.id)?"ring-2 ring-green-500":""}`,children:[u.jsx("img",{src:a.image,alt:a.name,className:"w-full h-32 object-cover"}),u.jsxs("div",{className:"p-3",children:[u.jsx("h3",{className:"font-semibold text-gray-800 text-sm mb-1",children:a.name}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("span",{className:"text-green-600 font-bold text-sm",children:["K",a.price]}),u.jsx("button",{onClick:()=>n({id:a.id,name:a.name,price:a.price,image:a.image,storeId:r.id,storeName:r.name}),className:`w-8 h-8 rounded-full flex items-center justify-center transition-colors ${s(a.id)?"bg-green-600 text-white":"bg-green-500 text-white hover:bg-green-600"}`,children:"+"})]})]})]},a.id))})}),u.jsx("div",{className:"fixed bottom-0 left-0 right-0 z-10 bg-white px-4 py-3 border-t border-gray-100",children:u.jsxs("button",{onClick:()=>o>0&&e("/foodies-route"),disabled:o===0,className:`w-full py-3 rounded-lg font-semibold text-white transition-colors ${o>0?"bg-red-600 hover:bg-red-700":"bg-gray-300 cursor-not-allowed"}`,children:["Complete Order (",o,")"]})})]})}function Fy({isOpen:t,onClose:e,title:n,stopId:s,mode:i}){const{cartItems:r,currentLocationFoodIds:o,stops:a,removeFromCart:l,assignFoodToStop:c,getCurrentLocationFoods:d,getStopFoods:f}=dp(),[h,p]=v.useState([]);v.useEffect(()=>{if(i==="current-location")p(o);else{const S=a.find(T=>T.id===s);p((S==null?void 0:S.foodIds)||[])}},[i,s,o,a]);const y=S=>{if(i==="current-location")return null;const T=a.find(_=>_.id===s);return T!=null&&T.foodIds.includes(S)?null:a.find(_=>_.foodIds.includes(S))?"another stop":null},w=S=>i==="current-location"?!1:y(S)!==null,C=S=>h.includes(S),g=()=>{if(i==="current-location")return!0;const S=r.length,T=h.length,E=r.filter(k=>w(k.id)&&!h.includes(k.id)).length,_=S-E-1;return T<_},m=S=>i==="current-location"?!1:w(S)?!0:C(S)?!1:!g(),x=S=>{if(i==="current-location"){l(S);return}m(S)||p(T=>T.includes(S)?T.filter(E=>E!==S):[...T,S])},b=()=>{i==="stop"&&c(s,h),e()};return u.jsx(Je,{children:t&&u.jsxs(u.Fragment,{children:[u.jsx(j.div,{className:"fixed inset-0 bg-black bg-opacity-50 z-50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e}),u.jsxs(j.div,{className:"fixed bottom-0 left-0 right-0 z-50 bg-white/95 backdrop-blur-md rounded-t-3xl shadow-2xl max-h-[70vh] flex flex-col",initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{type:"spring",damping:30,stiffness:300},children:[u.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[u.jsx("h3",{className:"text-lg font-bold text-gray-900",children:n}),u.jsx("button",{onClick:e,className:"w-8 h-8 bg-gray-100 rounded-full flex items-center justify-center hover:bg-gray-200 transition-colors",children:u.jsx(Ee,{size:18,className:"text-gray-600"})})]}),u.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:r.map(S=>{const T=w(S.id),E=C(S.id),_=m(S.id);return u.jsxs(j.button,{onClick:()=>x(S.id),disabled:_&&!E,className:`w-full flex items-center gap-3 p-3 rounded-xl transition-all ${E?"bg-green-100/60 border-2 border-green-600":T||_?"bg-gray-300/40 border border-gray-400 opacity-60":"bg-white border border-gray-200 hover:bg-gray-50"}`,whileTap:{scale:_&&!E?1:.98},children:[u.jsx("img",{src:S.image,alt:S.name,className:"w-16 h-16 object-cover rounded-lg"}),u.jsxs("div",{className:"flex-1 text-left",children:[u.jsx("p",{className:"font-semibold text-gray-900",children:S.name}),u.jsxs("p",{className:"text-sm text-gray-600",children:["K",S.price]}),T&&u.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Assigned to another stop"})]}),E&&i==="current-location"&&u.jsx("button",{onClick:k=>{k.stopPropagation(),x(S.id)},className:"w-6 h-6 bg-red-500 rounded-full flex items-center justify-center",children:u.jsx(Ee,{size:14,className:"text-white"})}),E&&i==="stop"&&u.jsx("button",{onClick:k=>{k.stopPropagation(),x(S.id)},className:"w-6 h-6 bg-red-500 rounded-full flex items-center justify-center",children:u.jsx(Ee,{size:14,className:"text-white"})})]},S.id)})}),u.jsx("div",{className:"p-4 border-t border-gray-200",children:u.jsx("button",{onClick:b,className:"w-full bg-green-600 text-white py-3 rounded-xl font-semibold hover:bg-green-700 transition-colors",children:"OK"})})]})]})})}const El=[{id:"1",name:"KFC Gandhi Square",address:"KFC Gandhi Square",description:"Umnutho House, Eloff Street, Marshalltown",distance:"3.7 km",latitude:-26.2041,longitude:28.0473},{id:"2",name:"108 Eloff Street",address:"108 Eloff Street",description:"Marshalltown, Johannesburg",distance:"3.6 km",latitude:-26.2051,longitude:28.0463},{id:"3",name:"Builders Warehouse Glen Eagles",address:"Builders Warehouse Glen Eagles",description:"Lois Avenue, Glenanda, Johannesburg",distance:"4.1 km",latitude:-26.2141,longitude:28.0573},{id:"4",name:"5A Lois Avenue",address:"5A Lois Avenue",description:"Glenanda, Johannesburg",distance:"4.1 km",latitude:-26.2151,longitude:28.0583},{id:"5",name:"home",address:"home",description:"Honchos Hillbrow, 54 Kotze Street",distance:"5.5 km",latitude:-26.1841,longitude:28.0373},{id:"6",name:"65 Saint Frusquin Street",address:"65 Saint Frusquin Street",description:"Malvern, Johannesburg",distance:"8.2 km",latitude:-26.2341,longitude:28.0773},{id:"7",name:"130 Main Street",address:"130 Main Street",description:"Marshalltown, Johannesburg",distance:"3.8 km",latitude:-26.2061,longitude:28.0483},{id:"8",name:"78 Eastwood Street",address:"78 Eastwood Street",description:"West Turffontein, Johannesburg",distance:"<1 km",latitude:-26.2241,longitude:28.0273},{id:"9",name:"8 Turf Street",address:"8 Turf Street",description:"Forest Hill, Johannesburg",distance:"3.2 km",latitude:-26.2121,longitude:28.0523},{id:"10",name:"Johannesburg Park Station",address:"Johannesburg Park Station",description:"Rissik Street, Johannesburg",distance:"2.1 km",latitude:-26.1941,longitude:28.0423}],a4=t=>t.trim()?El.filter(e=>e.name.toLowerCase().includes(t.toLowerCase())||e.address.toLowerCase().includes(t.toLowerCase())||e.description.toLowerCase().includes(t.toLowerCase())):El;function l4(){const t=be(),{address:e,loading:n}=up(),{cartItems:s,currentLocationFoodIds:i,stops:r,addStop:o,removeStop:a,updateStop:l,canAddStop:c,getCurrentLocationFoods:d,getStopFoods:f,removeStopsWithoutFoodOrAddress:h}=dp(),[p,y]=v.useState(!1),[w,C]=v.useState(null),[g,m]=v.useState(null),[x,b]=v.useState({}),[S,T]=v.useState("");v.useEffect(()=>{e&&!S&&T(e)},[e,S]),v.useEffect(()=>{s.length===0&&t("/shop")},[s.length,t]);const E=()=>{if(!c())return;const M={id:`stop-${Date.now()}`,address:"",foodIds:[]};o(M),m(M.id)},_=M=>{a(M),m(null)},k=(M,ge,Qe)=>{l(M,{address:ge,description:Qe}),m(null),b(wt=>({...wt,[M]:""}))},N=()=>{h(),console.log("Navigate to delivery selection page")},P=d(),$=g?a4(x[g]||""):El;return u.jsxs("div",{className:"flex flex-col h-screen bg-gray-50",children:[u.jsxs("div",{className:"bg-white p-4 border-b border-gray-100",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[u.jsx("button",{onClick:()=>t(-1),className:"w-10 h-10 flex items-center justify-center rounded-full hover:bg-gray-100 transition-colors",children:u.jsx(Ds,{size:24,className:"text-gray-800"})}),u.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Foodies Route"})]}),u.jsx("div",{className:"relative mb-3",children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full flex-shrink-0"}),u.jsxs("div",{className:"flex-1 relative flex items-center bg-gray-100 rounded-xl px-4 py-3",children:[u.jsx("input",{type:"text",value:S,readOnly:!0,placeholder:n?"Getting your location...":"Search delivery location",className:"flex-1 bg-transparent text-gray-900 text-sm outline-none"}),u.jsxs(j.button,{onClick:()=>y(!0),disabled:P.length===0,className:"ml-2 flex items-center gap-1 bg-white px-3 py-1.5 rounded-full border border-gray-200 hover:bg-gray-50 transition-colors relative",whileTap:{scale:.95},children:[u.jsx(Dj,{size:14,className:"text-gray-700"}),u.jsx("span",{className:"text-xs font-medium text-gray-700",children:"View your food"}),P.length>0&&u.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-[10px] font-bold rounded-full w-4 h-4 flex items-center justify-center",children:P.length})]})]}),u.jsx(j.button,{onClick:E,disabled:!c(),className:`w-10 h-10 flex items-center justify-center rounded-full transition-colors ${c()?"bg-green-500 hover:bg-green-600 text-white":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,whileTap:{scale:c()?.95:1},children:u.jsx(Sn,{size:20})})]})}),u.jsx(Je,{children:r.map((M,ge)=>u.jsx(j.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"mb-3",children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full flex-shrink-0"}),u.jsxs("div",{className:"flex-1 relative flex items-center bg-white rounded-xl px-4 py-3 border-2 border-green-500",children:[u.jsx("input",{type:"text",value:M.address||x[M.id]||"",onChange:Qe=>{b(wt=>({...wt,[M.id]:Qe.target.value})),m(M.id)},onFocus:()=>m(M.id),placeholder:"Add stop",className:"flex-1 bg-transparent text-gray-900 text-sm outline-none"}),u.jsx(j.button,{onClick:()=>C(M.id),disabled:s.length<2,className:"ml-2 px-3 py-1.5 bg-white rounded-full border border-gray-200 hover:bg-gray-50 transition-colors relative",whileTap:{scale:.95},children:u.jsx("span",{className:"text-xs font-medium text-gray-700",children:M.foodIds.length>0?u.jsxs(u.Fragment,{children:["Food added",u.jsx("sup",{className:"text-[10px]",children:M.foodIds.length})]}):"Add Food"})})]}),u.jsx("button",{onClick:()=>_(M.id),className:"w-10 h-10 flex items-center justify-center rounded-full hover:bg-gray-100 transition-colors",children:u.jsx(Ee,{size:16,className:"text-red-500"})})]})},M.id))})]}),u.jsxs("div",{className:"flex-1 overflow-y-auto px-4 py-4",children:[g&&u.jsx("div",{className:"space-y-2",children:$.map(M=>u.jsxs(j.button,{onClick:()=>k(g,M.address,M.description),className:"w-full flex items-center gap-3 p-3 bg-white rounded-xl hover:bg-gray-50 transition-colors",whileTap:{scale:.98},children:[u.jsx(Ts,{size:20,className:"text-gray-400 flex-shrink-0"}),u.jsxs("div",{className:"flex-1 text-left",children:[u.jsx("p",{className:"font-medium text-gray-900 text-sm",children:M.name}),u.jsx("p",{className:"text-xs text-gray-500",children:M.description})]}),M.distance&&u.jsx("span",{className:"text-xs text-gray-400",children:M.distance})]},M.id))}),!g&&u.jsx("div",{className:"space-y-2",children:El.slice(0,7).map(M=>u.jsxs("div",{className:"flex items-center gap-3 p-3 bg-white rounded-xl",children:[u.jsx(Ts,{size:20,className:"text-gray-400 flex-shrink-0"}),u.jsxs("div",{className:"flex-1",children:[u.jsx("p",{className:"font-medium text-gray-900 text-sm",children:M.name}),u.jsx("p",{className:"text-xs text-gray-500",children:M.description})]}),M.distance&&u.jsx("span",{className:"text-xs text-gray-400",children:M.distance})]},M.id))})]}),u.jsx("div",{className:"p-4 bg-white border-t border-gray-100",children:u.jsx("button",{onClick:N,disabled:P.length===0,className:`w-full py-4 rounded-xl font-semibold text-lg transition-colors ${P.length>0?"bg-green-600 text-white hover:bg-green-700":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:"Go to delivery"})}),u.jsx(Fy,{isOpen:p,onClose:()=>y(!1),title:"Your Food",stopId:"current-location",mode:"current-location"}),w&&u.jsx(Fy,{isOpen:!0,onClose:()=>C(null),title:"Select Food for Stop",stopId:w,mode:"stop"})]})}const c4=({driverName:t,carModel:e,eta:n,status:s})=>{const i=be();if(xt().pathname==="/driver-coming")return null;const o=()=>s==="accepted"?"Current Ride":s==="arrived"?"Driver Arrived":s==="started"?"On Trip":"Current Ride";return u.jsx(j.div,{className:"fixed top-4 right-4 z-40 bg-white rounded-2xl shadow-2xl p-3 cursor-pointer hover:shadow-3xl transition-shadow",initial:{x:100,opacity:0},animate:{x:0,opacity:1},exit:{x:100,opacity:0},onClick:()=>i("/driver-coming"),whileHover:{scale:1.02},whileTap:{scale:.98},children:u.jsxs("div",{className:"flex items-center space-x-3 min-w-[200px]",children:[u.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-green-400 to-green-600 rounded-full flex items-center justify-center",children:u.jsx(yj,{size:20,className:"text-white"})}),u.jsxs("div",{className:"flex-1",children:[u.jsx("p",{className:"text-xs font-semibold text-green-600 uppercase tracking-wide",children:o()}),u.jsx("p",{className:"text-sm font-bold text-gray-900 truncate",children:t}),u.jsxs("p",{className:"text-xs text-gray-500 truncate",children:[e,"  ",n]})]})]})})},u4=()=>{const t=be();return xt().pathname==="/waiting-for-driver"?null:u.jsx(j.div,{className:"fixed top-4 right-4 z-40 bg-amber-500 rounded-2xl shadow-2xl p-3 cursor-pointer hover:shadow-3xl transition-shadow",initial:{x:100,opacity:0},animate:{x:0,opacity:1},exit:{x:100,opacity:0},onClick:()=>t("/waiting-for-driver"),whileHover:{scale:1.02},whileTap:{scale:.98},children:u.jsxs("div",{className:"flex items-center space-x-3 min-w-[200px]",children:[u.jsx("div",{className:"w-10 h-10 bg-white bg-opacity-30 rounded-full flex items-center justify-center",children:u.jsx(Ts,{size:20,className:"text-white"})}),u.jsxs("div",{className:"flex-1",children:[u.jsx("p",{className:"text-xs font-semibold text-white uppercase tracking-wide",children:"Waiting for Driver"}),u.jsx("p",{className:"text-sm font-bold text-white",children:"Finding your ride..."})]})]})})};function d4(){const t=be(),e=xt(),{profile:n}=Ui(),[s,i]=v.useState({selectedDestination:"",selectedPickup:"Current Location",selectedStops:[],selectedCarType:"",selectedPrice:0,currentRideId:localStorage.getItem("currentRideId")}),{currentRide:r}=uc(s.currentRideId),[o,a]=v.useState(null),[l,c]=v.useState(null),[d,f]=v.useState("3 mins"),[h,p]=v.useState(!1);v.useEffect(()=>{const k=localStorage.getItem("currentRideId");k&&(i(N=>({...N,currentRideId:k})),t("/driver-coming"))},[]),v.useEffect(()=>{const k=()=>{console.log("Back online, syncing ride state...");const P=localStorage.getItem("currentRideId");P&&(i($=>({...$,currentRideId:P})),t("/driver-coming"))},N=()=>{console.warn("No internet connection. Reconnecting when available...")};return window.addEventListener("online",k),window.addEventListener("offline",N),()=>{window.removeEventListener("online",k),window.removeEventListener("offline",N)}},[t]),v.useEffect(()=>{if(!s.currentRideId)return;const k=Ce.listenToRideStatus(s.currentRideId,N=>{N&&(a(N.status),N.status==="pending"&&e.pathname!=="/waiting-for-driver"&&t("/waiting-for-driver"),N.status==="accepted"&&e.pathname!=="/driver-coming"&&t("/driver-coming"),(N.status==="arrived"||N.status==="started")&&e.pathname!=="/driver-coming"&&t("/driver-coming"),N.status==="completed"&&p(!0))});return()=>k()},[s.currentRideId,e.pathname,t]),v.useEffect(()=>{r!=null&&r.driverId&&Ce.getDriverInfo(r.driverId).then(k=>{k&&c(k)})},[r==null?void 0:r.driverId]);const y=(k,N,P)=>{i($=>({...$,selectedPickup:k,selectedDestination:N,selectedStops:P}))},w=k=>{if(E()){alert("You already have an active ride."),t("/driver-coming");return}i(N=>({...N,selectedDestination:k})),t("/select-ride")},C=(k,N)=>{if(E()){alert("You already have an active ride."),t("/driver-coming");return}i(P=>({...P,selectedCarType:k,selectedPrice:N})),t("/confirm-order")},g=()=>{if(E()){alert("You already have an active ride."),t("/driver-coming");return}t("/waiting-for-driver")},m=k=>{k&&i(N=>({...N,currentRideId:k})),t("/driver-coming")},x=k=>{localStorage.setItem("currentRideId",k),i(N=>({...N,currentRideId:k}))},b=()=>{const k=["/waiting-for-driver","/confirm-order","/select-ride"];if(E()||_()){const N=_()?"You already have an active request.":"You already have an active ride.",P=_()?"/waiting-for-driver":"/driver-coming";if(k.includes(e.pathname)){alert(N),t(P);return}alert(N),t(P);return}t(-1)},S=()=>{localStorage.removeItem("currentRideId"),i(k=>({...k,currentRideId:null})),a(null),t("/")},T=async(k,N)=>{if(!(!s.currentRideId||!(r!=null&&r.driverId)||!(n!=null&&n.id)))try{await Ce.submitRating(r.driverId,s.currentRideId,k,N,n.id),localStorage.removeItem("currentRideId"),p(!1),i(P=>({...P,currentRideId:null})),a(null),t("/")}catch(P){console.error("Error submitting rating:",P)}},E=()=>o==="accepted"||o==="arrived"||o==="started",_=()=>o==="pending";return u.jsx(qD,{userId:(n==null?void 0:n.id)||null,rideId:s.currentRideId,children:u.jsx(BD,{rideId:s.currentRideId,children:u.jsxs("div",{className:"app",children:[u.jsxs(Je,{children:[E()&&l&&e.pathname!=="/driver-coming"&&u.jsx(c4,{driverName:l.name,carModel:l.carModel,eta:d,status:o||"accepted"}),_()&&e.pathname!=="/waiting-for-driver"&&u.jsx(u4,{})]}),u.jsxs(tb,{children:[u.jsx(Ie,{path:"/",element:u.jsx(la,{onSearchSelect:k=>{if(E()){alert("You already have an active ride.");return}w(k)}})}),u.jsx(Ie,{path:"/your-route",element:E()?u.jsx(la,{onSearchSelect:()=>alert("You already have an active ride.")}):u.jsx($D,{onRouteComplete:y})}),u.jsx(Ie,{path:"/rides",element:u.jsx(UD,{})}),u.jsx(Ie,{path:"/account",element:u.jsx(WD,{})}),u.jsx(Ie,{path:"/personal-info",element:u.jsx(HD,{})}),u.jsx(Ie,{path:"/schedule-ride",element:u.jsx(ZD,{})}),u.jsx(Ie,{path:"/schedule-your-route",element:u.jsx(e4,{})}),u.jsx(Ie,{path:"/schedule-confirm",element:u.jsx(t4,{})}),u.jsx(Ie,{path:"/what-went-wrong",element:u.jsx(n4,{})}),u.jsx(Ie,{path:"/aletwende-send",element:u.jsx(s4,{})}),u.jsx(Ie,{path:"/shop",element:u.jsx(i4,{})}),u.jsx(Ie,{path:"/order-foodies/:storeId",element:u.jsx(o4,{})}),u.jsx(Ie,{path:"/foodies-route",element:u.jsx(l4,{})}),u.jsx(Ie,{path:"/select-ride",element:E()?u.jsx(la,{onSearchSelect:()=>alert("You already have an active ride.")}):u.jsx(KD,{destination:s.selectedDestination,pickup:s.selectedPickup,stops:s.selectedStops,onBack:b,onSelectRide:C})}),u.jsx(Ie,{path:"/confirm-order",element:E()||_()?u.jsx(la,{onSearchSelect:()=>alert("You already have an active ride.")}):u.jsx(GD,{destination:s.selectedDestination,pickup:s.selectedPickup,stops:s.selectedStops,carType:s.selectedCarType,price:s.selectedPrice,onBack:b,onRideConfirmed:g,onRideCreated:x})}),u.jsx(Ie,{path:"/waiting-for-driver",element:u.jsx(YD,{destination:s.selectedDestination,pickup:s.selectedPickup,stops:s.selectedStops,carType:s.selectedCarType,price:s.selectedPrice,currentRideId:s.currentRideId,onCancel:S,onDriverFound:m})}),u.jsx(Ie,{path:"/driver-coming",element:u.jsx(JD,{destination:s.selectedDestination,pickup:s.selectedPickup,stops:s.selectedStops,carType:s.selectedCarType,price:s.selectedPrice,currentRideId:s.currentRideId,onBack:S})})]}),h&&l&&u.jsx(D_,{isOpen:h,onClose:()=>{},driverName:l.name,driverPhoto:l.photo,onSubmitRating:T})]})})})}function h4(){return u.jsx(r4,{children:u.jsx(Eb,{children:u.jsx(d4,{})})})}qv(document.getElementById("root")).render(u.jsx(v.StrictMode,{children:u.jsx(h4,{})}));
